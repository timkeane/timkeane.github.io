import{i as e,j as t,O as a,L as n,W as s,V as o,G as i,P as r,a as l,F as c,d,b as u,T as p,t as f,c as g,D as m,o as h,C as v,e as _,M as b,R as y}from"./vendor-cBnjCObF.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const I={},E=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link");n=Promise.all(t.map((t=>{if(t=function(e,t){return new URL(e,t).href}(t,a),t in I)return;I[t]=!0;const n=t.endsWith(".css"),s=n?'[rel="stylesheet"]':"";if(!!a)for(let a=e.length-1;a>=0;a--){const s=e[a];if(s.href===t&&(!n||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${t}"]${s}`))return;const o=document.createElement("link");return o.rel=n?"stylesheet":"modulepreload",n||(o.as="script",o.crossOrigin=""),o.href=t,document.head.appendChild(o),n?new Promise(((e,a)=>{o.addEventListener("load",e),o.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${t}`))))})):void 0})))}return n.then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},w=(e,t)=>{const a=e[t];return a?"function"==typeof a?a():Promise.resolve(a):new Promise(((e,a)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+t)))}))},S={translation:{"app.title":"Illinois BEAD Challenge","app.desc":"Illinois BEAD Challenge","banner.state_seal.alt":"Illinois Stae Seal","banner.bb_lab.alt":"Illinois Broadband Lab Logo","tab.map.name":"Map","tab.location.msg":"<p>Search for a location to display a list of Community Anchor Institutions and Broadband Service Locations.</p>","tab.locations.long_msg":'<p>The Illinois BEAD Challenge Map contains all up-to-date Broadband Serviceable Locations (BSLs) and Community Anchor Institutions (CAIs) in Illinois. This map can be used as a resource for participating in Illinois\' challenge process. Any location on this map can be challenged.</p><h2>How it works:</h2><ul><li>Search for an address or locate an area on the map using the zoom function.</li><li>Click on a location to view the availability of broadband, and whether this location is currently eligible for funding.</li><li>If you would like to challenge the information you see, select the location(s) and click "Add Challenge." Added locations will show up in the Challenges tab.</li><li>You can select locations on the map by using the Select tool <img src="img/select.svg" alt="Select tool" style="width:20px;height:20px">. Locations can be added one at a time by clicking on them, or you can lasso a group of locations by drawing a loop around multiple locations.</li><li>Once you have finished your selection process, click the "Submit Challenges" button and you will be forwarded to the Challenge Portal to upload evidence and complete the challenge process.</li></ul><p>There is no limit or minimum to the number of locations you can select to challenge, or number of times you can submit challenges.</p><p>If you have a file of pre-selected challenges with Location IDs, you can skip these steps and upload the file directly to the <a href="javascript:alert(\'no url\')">Challenge Portal</a>.</p><p><a noopener href="javascript:$(\'#guide iframe\').attr(\'src\', \'guide.en.html\');$(\'#guide\').fadeIn();">Click here</a> for a more detailed user guide.</p>',"tab.challenge.msg":'<p class="message">Add a Challenge by clicking the challenge button on a Community Anchor Institution or Broadband Service Location in the Service Locations list, or by selecting locations on the map.</p>',"tab.locations.name":"Service Locations","tab.challenges.name":"Challenges","tab.challenges.new":"New Challenge","dialog.restore":"Would you like to restore the challenges from your last session?","dialog.always":"Always restore challenges","dialog.delete":"Are you sure you want to delete all challenges?","dialog.premature":"Challeng submission begins on","map.current_location":"Current Location","legend.name":"Layers","legend.served":"Served (Not eligible)","legend.underserved":"Underserved (Eligible)","legend.unserved":"Unserved (Eligible)","legend.filter":"Filter","form.search.placeholder":"Search for an address or ZIP Code...","form.challenges.submit":"Submit Challenges","form.challenges.table":"View challenges in table","form.challenges.save":"Save challenges as CSV","form.challenges.open":"Load challenges from CSV","form.challenges.delete":"Delete all challenges","layer.bsl.name":"Broadband Service Location","layer.cai.name":"Community Anchor Institution","layer.bg.name":"Census Block Group","feature.field.id":"Location ID","feature.field.service":"Serviceability","feature.field.enforce":"Enforceable Commitment","feature.field.eligible":"Eligibility","feature.field.mdu":"Multiple Dwelling Units","feature.field.speed":"Speed","feature.field.provider":"Provider","feature.field.tech":"Technology","feature.field.type":"Type","feature.field.tr":"Tract","feature.field.bg":"Block Group","feature.field.fund":"Funding","feature.value.addr_state":"IL","feature.value.eligible":"Eligible","feature.value.not_eligible":"Not Eligible","feature.value.served":"Served","feature.value.underserved":"Underserved","feature.value.unserved":"Unserved","feature.value.enforce":"Enforceable","feature.value.not_enforce":"Not Enforceable","feature.value.n":"No","feature.value.y":"Yes","feature.value.0":"No","feature.value.1":"Yes","feature.value.s":"School","feature.value.l":"Library","feature.value.g":"Government facility","feature.value.h":"Health facility","feature.value.f":"Public Safety","feature.value.p":"Public Housing","feature.value.c":"Community Support Organization","feature.value.distance":"miles from your location","feature.value.rdof":"Rural Digital Opportunity Fund","feature.value.rep":"Rural Econnectivity Program","feature.value.tbcp":"Tribal Broadband Connectivity Program","feature.value.tlp":"Telephone Loan Program (TLP)","feature.value.caf_ii":"Connect America Fund Phase II","feature.value.ccgp":"Community Connect Grant Program","feature.value.bip":"Broadband Infrastructure Program","feature.value.bprt":"Bringing Puerto Rico Together","feature.value.cusvi":"Connect U.S. Virgin Islands","feature.value.state_fund":"Connect Ilinois","feature.value.state_fund_abbr":"Conn. IL","feature.value.unkown":"Unkown","feature.value.unavailable":"Unavailable","feature.value.submitted":"Already submitted","btn.add_challenge.name":"Add to Challenge","btn.how_it_works.name":"How it works","btn.remove_challenge.name":"Remove from Challenge","btn.yes.name":"Yes","btn.no.name":"No","btn.ok.name":"OK","btn.close.name":"Close","btn.back.name":"Back to the map","btn.select.name":"Select locations to challenge","btn.providers.name":"Providers","table.column.name":"Name","table.column.addr":"Address","table.column.city":"City","table.column.state":"State","table.column.zip":"ZIP Code","table.column.county":"County","table.column.lid":"Location ID","table.column.type":"Type","table.column.eligible":"Eligiblity","table.column.max_up":"Max Upload Speed","table.column.max_down":"Max Download Speed","table.column.mdu":"Muti Dwelling Units","table.column.service":"Servicibility","table.column.enforce":"Enforceable Commitment","table.column.blank":"",translate:"Translate","translate.en":"English","translate.es":"Español","translate.pl":"Polski","translate.he":"עִברִית","translate.yi":"יידיש"}},C=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"})),T="en";const R={challenge:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#111a52" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M6.043 19.496l-1.482 1.505c-2.791-2.201-4.561-5.413-4.561-9.001s1.77-6.8 4.561-9l1.482 1.504c-2.326 1.835-3.804 4.512-3.804 7.496s1.478 5.661 3.804 7.496zm.675-7.496c0-1.791.887-3.397 2.282-4.498l-1.481-1.502c-1.86 1.467-3.04 3.608-3.04 6s1.18 4.533 3.04 6l1.481-1.502c-1.396-1.101-2.282-2.707-2.282-4.498zm15.043 0c0-2.984-1.478-5.661-3.804-7.496l1.482-1.504c2.791 2.2 4.561 5.412 4.561 9s-1.77 6.8-4.561 9.001l-1.482-1.505c2.326-1.835 3.804-4.512 3.804-7.496zm-6.761 4.498l1.481 1.502c1.86-1.467 3.04-3.608 3.04-6s-1.18-4.533-3.04-6l-1.481 1.502c1.396 1.101 2.282 2.707 2.282 4.498s-.886 3.397-2.282 4.498zm-3-7.498c-1.656 0-3 1.343-3 3s1.344 3 3 3 3-1.343 3-3-1.344-3-3-3z"/></svg>',served:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#CC0202" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M0 7.244c3.071-3.24 7.314-5.244 12-5.244 4.687 0 8.929 2.004 12 5.244l-2.039 2.15c-2.549-2.688-6.071-4.352-9.961-4.352s-7.412 1.664-9.961 4.352l-2.039-2.15zm5.72 6.034c1.607-1.696 3.827-2.744 6.28-2.744s4.673 1.048 6.28 2.744l2.093-2.208c-2.143-2.261-5.103-3.659-8.373-3.659s-6.23 1.398-8.373 3.659l2.093 2.208zm3.658 3.859c.671-.708 1.598-1.145 2.622-1.145 1.023 0 1.951.437 2.622 1.145l2.057-2.17c-1.197-1.263-2.851-2.044-4.678-2.044s-3.481.782-4.678 2.044l2.055 2.17zm2.622 1.017c-1.062 0-1.923.861-1.923 1.923s.861 1.923 1.923 1.923 1.923-.861 1.923-1.923-.861-1.923-1.923-1.923z"/></svg>',underserved:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#F7B500" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M0 7.244c3.071-3.24 7.314-5.244 12-5.244 4.687 0 8.929 2.004 12 5.244l-2.039 2.15c-2.549-2.688-6.071-4.352-9.961-4.352s-7.412 1.664-9.961 4.352l-2.039-2.15zm5.72 6.034c1.607-1.696 3.827-2.744 6.28-2.744s4.673 1.048 6.28 2.744l2.093-2.208c-2.143-2.261-5.103-3.659-8.373-3.659s-6.23 1.398-8.373 3.659l2.093 2.208zm3.658 3.859c.671-.708 1.598-1.145 2.622-1.145 1.023 0 1.951.437 2.622 1.145l2.057-2.17c-1.197-1.263-2.851-2.044-4.678-2.044s-3.481.782-4.678 2.044l2.055 2.17zm2.622 1.017c-1.062 0-1.923.861-1.923 1.923s.861 1.923 1.923 1.923 1.923-.861 1.923-1.923-.861-1.923-1.923-1.923z"/></svg>',unserved:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#008450" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M0 7.244c3.071-3.24 7.314-5.244 12-5.244 4.687 0 8.929 2.004 12 5.244l-2.039 2.15c-2.549-2.688-6.071-4.352-9.961-4.352s-7.412 1.664-9.961 4.352l-2.039-2.15zm5.72 6.034c1.607-1.696 3.827-2.744 6.28-2.744s4.673 1.048 6.28 2.744l2.093-2.208c-2.143-2.261-5.103-3.659-8.373-3.659s-6.23 1.398-8.373 3.659l2.093 2.208zm3.658 3.859c.671-.708 1.598-1.145 2.622-1.145 1.023 0 1.951.437 2.622 1.145l2.057-2.17c-1.197-1.263-2.851-2.044-4.678-2.044s-3.481.782-4.678 2.044l2.055 2.17zm2.622 1.017c-1.062 0-1.923.861-1.923 1.923s.861 1.923 1.923 1.923 1.923-.861 1.923-1.923-.861-1.923-1.923-1.923z"/></svg>',"y-eligible":'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><rect fill="#000" x="3" y="3" width="42" height="42"/><rect fill="#fff" x="6" y="6" width="36" height="36"/><rect fill="#008450" x="9" y="9" width="30" height="30"/><path fill="#fff" transform="translate(12, 12)" d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>',"n-eligible":'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><rect fill="#000" x="3" y="3" width="42" height="42"/><rect fill="#fff" x="6" y="6" width="36" height="36"/><rect fill="#CC0202" x="9" y="9" width="30" height="30"/><path fill="#fff" transform="translate(13.2, 13.2) scale(0.9 0.9)" d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"/></svg>',trash:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path fill="#111a52" transform="translate(6, 6) scale(1.5)" d="m20.015 6.506h-16v14.423c0 .591.448 1.071 1 1.071h14c.552 0 1-.48 1-1.071 0-3.905 0-14.423 0-14.423zm-5.75 2.494c.414 0 .75.336.75.75v8.5c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-8.5c0-.414.336-.75.75-.75zm-4.5 0c.414 0 .75.336.75.75v8.5c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-8.5c0-.414.336-.75.75-.75zm-.75-5v-1c0-.535.474-1 1-1h4c.526 0 1 .465 1 1v1h5.254c.412 0 .746.335.746.747s-.334.747-.746.747h-16.507c-.413 0-.747-.335-.747-.747s.334-.747.747-.747zm4.5 0v-.5h-3v.5z" fill-rule="nonzero"/></svg>'},x={},L={};function A(e,t,a){!function(e,t,a){if(void 0!==L.map)throw"store must only be called once";if(void 0===e)throw"store must be called with a map parameter";if(void 0===t)throw"store must be called with a locationTab parameter";if(void 0===a)throw"store must be called with a challengeTab parameter"}(e,t,a),L.map=e,L.locationTab=t,L.challengeTab=a}function D(e){const t=x[e];return x[e]=void 0===t?0:t+1,`${e}-${x[e]}`}function P(e){return`data:image/svg+xml;utf8,${encodeURIComponent(R[e])}`}function F(){return L.map}function B(){return L.map.get("caiLayer")}function V(){return L.map.get("bslLayer")}function O(){return L.map.get("bgLayer")}function k(){return L.map.get("challengeLayer")}function U(){return L.map.get("selectLayer")}function z(){return L.map.get("drawLayer")}function G(){return L.map.get("popupOverlay")}function N(){return L.challengeTab}function M(e){return e===B()||e===V()}function q(e,t,a){a=a||"1 = 1";const n=encodeURIComponent(a),s=`{"xmin":${t[0]},"ymin":${t[1]},"xmax":${t[2]},"ymax":${t[3]},"spatialReference":{"wkid":102100,"latestWkid":3857}}`;return`${e}&esriSpatialRelIntersects&geometry=${encodeURIComponent(s)}&where=${n}`}function j(){return F().get("locationOverlay")}function J(e,t){for(const a in t){const n=t[a].filter;if(e.get(n[1][1])==n[2])return t[a]}}function Y(e){const t=e.getView(),n=B(),s=V(),o=k().getSource(),i=U().getSource();function r(o){const i=$('<div class="pulse"></div>');$("body").append(i);const r=new a({element:i.get(0),offset:[-30,-30]});e.addOverlay(r);const l=o.feature,c=l.getId(),d=$(r.getElement());let u;u=c.indexOf("cai")>-1?n.getStyle():s.getStyle();const p=function(e,t,a){const n=J(t,a)["icon-scale"],s=n[3],o=n[5],i=n[1][1],r=Math.floor(e.getZoom()),l=[];for(let d=s;d<=o;d++)l.push(d);const c=l.indexOf(r)+1;return Math.pow(i,c)/Math.pow(i,l.length)}(t,l,u),f=Math.floor(48*p),g=function(e,t){return J(e,t)["icon-src"]}(l,u);d.css({"background-image":`url("${g}")`,"background-size":`${f}px`}).fadeIn(),r.setPosition(l.getGeometry().getCoordinates()),setTimeout((()=>{d.fadeOut((()=>{e.removeOverlay(r),r.dispose(),d.remove()}))}),3e3)}o.on("addfeature",r),i.on("addfeature",r)}class Z extends n{constructor(e){super(e),this.style=e.style}createRenderer(){return new s(this,{style:this.style})}getStyle(){return this.style}}const K={"circle-radius":["interpolate",["exponential",2],["zoom"],4,0,17,56],"circle-fill-color":"rgba(255, 240, 0, .8)","circle-stroke-color":"rgb(0, 105, 217)","circle-stroke-width":3},X={"fill-color":"rgba(237, 195, 128, .15)","stroke-color":"rgba(0, 98, 204, .5)","stroke-width":3},W=new o({}),H=new o({}),Q=new Z({source:W,style:K,minZoom:6});Q.set("name","selectLayer");const ee=new Z({source:H,style:X,minZoom:6});ee.set("name","drawLayer");const te=[{"circle-radius":["interpolate",["exponential",2],["zoom"],4,0,17,56],"circle-fill-color":"rgba(0, 105, 217, .25)","circle-stroke-color":"rgb(0, 105, 217)","circle-stroke-width":3},{"icon-src":P("challenge"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]}],ae=[{},{prop:"name",name:"table.column.name",csv:"NAME"},{prop:"addr",name:"table.column.addr",csv:"ADDRESS"},{prop:"city",name:"table.column.city",csv:"CITY"},{prop:"state",name:"table.column.state",csv:"STATE"},{prop:"zip",name:"table.column.zip",csv:"ZIP"},{prop:"county",name:"table.column.county",csv:"COUNTY"},{prop:"lid",name:"table.column.lid",csv:"LOCATION_ID"},{prop:"type",name:"table.column.type",csv:"TYPE",decode:!0},{prop:"eligible",name:"table.column.eligible",csv:"ELIGIBILITY",decode:!0},{prop:"max_up",name:"table.column.max_up",csv:"MAX_UPLOAD_SPEED"},{prop:"max_down",name:"table.column.max_down",csv:"MAX_DOWNLOAD_SPEED"},{prop:"mdu",name:"table.column.mdu",csv:"MULTI_DWELLING_UNITS"},{prop:"service",name:"table.column.service",csv:"SERVICEABILITY",decode:!0},{prop:"enforce",name:"table.column.enforce",csv:"ENFORCEABLE_COMMITMENT",decode:!0}];function ne(e){const t=$(e.target).data("feature");$e(e),$(`#table-${t.getId()}`).remove()}const se={quotes:!1,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0,newline:"\n",skipEmptyLines:!1,columns:function(){const e=["FID_DO_NOT_EDIT","COORDINATE_DO_NOT_EDIT"];return ae.forEach((t=>{void 0!==t.csv&&e.push(t.csv)})),e}()},oe=new i({dataProjection:"EPSG:3857"});function ie(){const e=[];return k().getSource().getFeatures().forEach((t=>{const a=function(e){const t={};return ae.forEach((a=>{t[a.csv]=e[a.prop]})),t}(t.getProperties());a.FID_DO_NOT_EDIT=t.getId(),a.COORDINATE_DO_NOT_EDIT=function(e){const t=e.getGeometry();return JSON.stringify(t.getCoordinates())}(t),e.push(a)})),encodeURIComponent(r.unparse(e,se))}function re(e){const t=oe.writeFeatures(e);localStorage.setItem("challenges",t)}function le(){const e=localStorage.getItem("challenges");if(null!==e){const t=JSON.parse(e);if(t.features.length>0)return t}}function ce(e,t){if(void 0!==t){const a=oe.readFeatures(t);e.addFeatures(a)}}function de(){localStorage.removeItem("challenges"),localStorage.removeItem("location")}function ue(e){const t=r.parse(e.target.result,{...se,skipFirstNLines:1}).data,a=k().getSource();t.forEach((e=>{a.addFeature(function(e){const t={challenge:!0};ae.forEach((a=>{a.csv&&(t[a.prop]=e[a.csv])})),t.geometry=new l(JSON.parse(e.COORDINATE_DO_NOT_EDIT));const a=new c(t);return a.setId(e.FID_DO_NOT_EDIT),a}(e))}))}function pe(e){const t=e.target.files[0],a=new FileReader;a.onload=ue,a.readAsText(t)}const fe=new bootstrap.Modal("#dialog",{keyboard:!1,backdrop:"static"}),ge=$("#dialog .modal-body"),me=$("#dialog button.yes"),he=$("#dialog button.no"),ve=$("#dialog button.ok"),_e=$("#dialog input.always");function be(e,t){fe.hide(),e(t)}function ye(){const e=N().attr("aria-labelledby");return $(`#${e}`)}function Ie(){ye().attr("data-i18n","tab.challenges.name").removeAttr("aria-alert").removeClass("new").localize()}function Ee(e){e.preventDefault();const t=k().getSource().getFeatures(),a={cai:[],bsl:[]};t.forEach((e=>{e.getId().indexOf("cai")>-1?a.cai.push({location_id:e.get("lid"),name:e.get("name"),address:e.get("addr"),zip:e.get("zip")}):a.bsl.push(e.get("lid"))})),et.addFeatures(t),function(e){const t=oe.writeFeatures(e);localStorage.setItem("submission",t)}(et.getFeatures()),xe(!0),console.warn(a)}function we(e){const t=function(e){return e instanceof c?e:$(e.target).data("feature")}(e),a=k().getSource();t.set("challenge",!0),a.addFeature(t),ye().addClass("new").attr("data-i18n","tab.challenges.new;[aria-alert]tab.challenges.new").one("click",Ie).localize(),re(a.getFeatures()),Se(!1)}function Se(e){L.challengeTab.find("form").find("button").each(((t,a)=>{$(a).hasClass("open")||$(a).prop("disabled",e)}))}function $e(e){const t=$(e.target).data("feature"),a=k().getSource();t.set("challenge",!1),a.removeFeature(t),re(a.getFeatures()),0===a.getFeatures().length&&(Ie(),Se(!0))}function Ce(e){e.preventDefault();!function(e){const t=$('<table class="table"><thead><tr></tr></thead><tbody></tbody><table>'),a=t.find("thead tr"),n=t.find("tbody");ae.forEach((e=>{const t=e.name,n=$("<th></th>");a.append(n),void 0!==t&&n.attr("data-i18n",t)})),e.forEach((e=>{const t=e.getId(),a=$(`<tr id="table-${t}"></tr>`);n.append(a),ae.forEach((t=>{var n,s;const o=$("<td></td>"),i=t.prop;if(void 0===i){const t=$("<img>"),a=$(`<img role="button" src="${P("trash")}" data-i18n="[alt]btn.remove_challenge.name;[title]btn.remove_challenge.name">`).data("feature",e).on("click",ne),i=null==(n=e.get("service"))?void 0:n.toLowerCase(),r=null==(s=e.get("eligible"))?void 0:s.toLowerCase();if(void 0!==i)t.attr("src",P(i)).attr("data-i18n",`[alt]feature.value.${i};[title]feature.value.${i}`);else{const e="y"===r?"eligible":"not_eligible";t.attr("src",P(`${r}-eligible`)).attr("data-i18n",`[alt]feature.value.${e};[title]feature.value.${e}`)}o.append(t).append(a)}else{const a=e.get(i);if(t.decode&&void 0!==a){const e=(a+"").toLowerCase();o.attr("data-i18n",`feature.value.${e}`)}else o.html(a).addClass(void 0===a?"empty":"")}a.append(o)}))}));const s=$("#container"),o=$('<div class="challenge-table" style="display:none"></div>'),i=$('<button class="btn btn-primary back" data-i18n="[aria-label]btn.back.name;[title]btn.back.name"></button>').on("click",(()=>{$("body").removeClass("challenge-table"),o.slideUp((()=>{o.remove(),s.attr("aria-hidden",!1)}))}));$(t.find("thead th").get(0)).append(i),o.append(t).css("top",s.get(0).offsetTop+"px"),$("body").addClass("challenge-table").append(o),o.localize().slideDown((()=>s.attr("aria-hidden",!0)))}(k().getSource().getFeatures())}function Te(e){e.preventDefault(),function(){const e=`data:text/csv;charset=utf-8,${ie()}`,t=$('<a class="csv-download"><img></a>');$("body").append(t),t.attr({href:e,download:"Illinois-BEAD-challenge.csv"}).find("img").trigger("click"),t.remove()}()}function Re(e){e.preventDefault(),function(){let e=$("#load-csv");0===e.length&&(e=$('<input id="load-csv" type="file">'),$("body").append(e),e.on("change",pe)),e.trigger("click")}()}function xe(e){if(e){const e=k().getSource();e.getFeatures().forEach((t=>{t.set("challenge",!1),e.removeFeature(t)})),de(),Se(!0)}}function Le(e){var t;e.preventDefault(),t=xe,ge.attr("data-i18n","dialog.delete").localize(),me.show().one("click",(()=>be(t,!0))),he.show().one("click",(()=>be(t,!1))),ve.hide(),$("#dialog .always").hide(),fe.show()}function Ae(e){e.preventDefault(),function(){const e=new Date("Jan 8 2023 00:00:00 CST");ge.html(`&nbsp;${e.toLocaleString()}`).attr("data-i18n","[prepend]dialog.premature").localize(),me.hide(),he.hide(),ve.show().on("click",(()=>fe.hide())),$("#dialog .always").hide(),fe.show()}()}function De(e,t){!function(e){const t={};["delete","table","save","open"].forEach((a=>{const n=$('<button class="btn btn-primary"></button>').attr("data-i18n",`[title]form.challenges.${a};[aria-label]form.challenges.${a}`).prop("disabled","open"!==a).addClass(`sm ${a}`);t[a]=n,e.append(n)})),t.save.on("click",Te),t.open.on("click",Re),t.table.on("click",Ce),t.delete.on("click",Le)}(e),Se(!t),function(e){const t=new Date("Jan 8 2023 00:00:00 CST").getTime();(new Date).getTime()>t?e.on("submit",Ee):e.on("submit",Ae)}(e),e.localize()}_e.on("change",(()=>{var e;e=_e.is(":checked"),localStorage.setItem("always",e)})),$("#challenge-tab").on("show.bs.tab",(()=>{$("#locate")[$(window).width()<972?"hide":"show"]()})),$("#challenge-tab").on("hide.bs.tab",(()=>$("#locate").show()));const Pe=$('<div id="popup" class="popup"><a href="#" id="popup-closer" class="popup-closer" data-i18n=[aria-label]btn.close.name}" rel="noopener">&#10006;</a><div id="popup-content"></div></div>');function Fe(e){e.setPosition(void 0),$("#popup").css("opacity",0).show()}function Be(e){if(G().active){const t=e.map,a=[];t.forEachFeatureAtPixel(e.pixel,((e,t)=>{t.get("name");const n=t.get("featureHtml");a.push(n(e,"popup"))}),{layerFilter:M,hitTolerance:50}),function(e,t,a){const n=$("#popup").attr("dir",$("html").attr("dir")),s=e.get("popupOverlay"),o=$("#popup-content");if(a.length>0){const e=a[0];o.empty().append(e).data("htmlFeatures",a),s.setPosition(t),n.animate({opacity:1}),$("#popup-closer").one("click",(e=>{n.fadeOut((()=>Fe(s)))}))}}(t,e.coordinate,a)}}function Ve(e){$("#popup"),this.active=e,setTimeout((()=>{Fe(this),e||$("popup").hide()}),500)}function Oe(){setTimeout((()=>{G().panIntoView()}),500)}const ke=["location","challenge","popup"];function Ue(e){const t=e.max_up;return"0"==`${t}`?'<span data-i18n="feature.value.unkown"/>':t+"/"+e.max_down+" mb/s"}function ze(e,t){const a=[],n=t?"button.challenge":"";return ke.forEach((t=>{"challenge"!==t&&a.push(`#${Ge(e,t)} ${n}`)})),$(a.join())}function Ge(e,t){return`${t}-${e.getId()}`}function Ne(e,t){const a=e.get("challenge"),n=$(`<button class="btn btn-primary challenge" data-i18n="${a?"btn.remove_challenge.name":"btn.add_challenge.name"}"></button>`).on("click",a?$e:we).data("feature",e);t.append(n)}function Me(e){const t=e.feature,a=null!==et.getFeatureById(t.getId()),n=t.get("challenge"),s=ze(t,!0);if(a)s.each(((e,t)=>{const a=$('<div class="submitted" data-i18n="feature.value.submitted"></div>');$(t).replaceWith(a.localize())}));else{const e=n?"btn.remove_challenge.name":"btn.add_challenge.name";s.attr("data-i18n",e).off("click",n?we:$e).on("click",n?$e:we).localize()}Oe(),function(e,t){const a=ze(e),n=t?"addClass":"removeClass";a.each(((e,t)=>{const a=$(t).parent();if("LI"===a.prop("nodeName"))a[n]("challenge");else{const e=F().get("popupOverlay").getElement();$(e)[n]("challenge")}}))}(t,!a||n),"addfeature"===e.type&&Se(!1)}function qe(e){const t=e.get("distance");if(void 0!==t){const e=$('<label data-i18n="feature.value.distance"></label>').localize(),a=(t/1609.34).toFixed(2);return $(`<div class="distance">${a} mi</div>`).attr("aria-label",`${a} ${e.html()}`)}return""}function je(e,t){return e.replace(t,"")}const Je={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Ye=Je.VITE_BSL_PROVIDER_URL,Ze=Je.VITE_PROVIDER_URL;function Ke(e,t){console.error({message:`Could not fetch providers for Location_ID=${t.get("lid")}`,error:e})}function Xe(e){const t=$(e.target),a=t.data("feature"),n=t.find("tbody");void 0===a.get("providers")&&(t.addClass("loading"),function(e){return new Promise(((t,a)=>{if(void 0!==e.get("providers"))t(e);else{const a=encodeURIComponent(`location_id=${e.get("lid")}`);fetch(`${Ye}&where=${a}`).then((a=>{a.json().then((a=>{const n=[];if(a.features.forEach((e=>{n.push(e.properties.provider_id)})),n.length>0){const a=encodeURIComponent(`provider_id IN (${n.join()})`);fetch(`${Ze}&where=${a}`).then((a=>{a.json().then((a=>{const n=[];a.features.forEach((e=>{n.push(e.properties)})),e.set("providers",n,!0),t(e)}))})).catch((t=>Ke(t,e)))}else e.set("providers",[]),t(e)}))})).catch((t=>Ke(t,e)))}}))}(a).then((e=>{const a=e.get("providers");a.length>0?a.forEach((e=>{const t=$("<tr></tr>").append(`<td>${e.name}</td>`).append(`<td>${e.tech}</td>`).append(`<td>${Ue(e)}</td>`);n.append(t)})):n.append('<tr><td  colspan="3" data-i18n="feature.value.unserved"></td></tr>').localize(),t.removeClass("loading"),Oe()})).catch((e=>Ke(e,a))))}function We(e,t){var a;const n=Ge(e,t),s=null!==et.getFeatureById(e.getId()),o=e.get("lid"),i=`${e.get("city")}, <span data-i18n="feature.value.addr_state"></span> ${e.get("zip")}`,r=je(e.get("addr"),i),l=null==(a=e.get("service"))?void 0:a.toLowerCase(),c=1===e.get("enforce")?"y":"n",d=e.get("mdu"),u=$(`<div id="${n}" class="feature-html ${`bsl ${t} ${l} ${c}`}"><h4 data-i18n="[prepend]layer.bsl.name"></h4></div>`).append(qe(e)).append(`<div class="addr">${r}<br>${i}</div>`).append(`<div class="location-id"><span class="field" data-i18n="[prepend]feature.field.id">:</span> <span>${o}</span></div>`).append(`<div class="enfoce"><span class="field" data-i18n="[prepend]feature.field.enforce">:</span> <span data-i18n="feature.value.${c}"></span></div>`).append(function(e){var t;const a=$('<span class="fund"><span class="field" data-i18n="[prepend]feature.field.fund">: </span></span>'),n=null==(t=e.get("fed_fund"))?void 0:t.toLowerCase(),s=1===e.get("state_fund")?"state_fund":"";return n&&a.append(`<span data-i18n="feature.value.${n}"></span>`),s&&(n&&a.append(", "),a.append(`<span data-i18n="feature.value.${s}"></span>`)),a.children().length>1?a:""}(e)).append(`<div class="service"><span class="field" data-i18n="[prepend]feature.field.service">:</span> <span data-i18n="feature.value.${l}"></span></div>`).append(d>1?`<div class="mdu"><span class="field" data-i18n="[prepend]feature.field.mdu">:</span> <span>${d}</span></div>`:"").append(function(e){const t=`prov-${e.getId()}`,a=$(`<table id="${t}" class="collapse hide provider">\n    <thead>\n      <th data-i18n="feature.field.provider"/>\n      <th data-i18n="feature.field.tech"/>\n      <th data-i18n="feature.field.speed"/>\n    </thead>\n    <tbody></tbody>\n  </table>`).data("feature",e),n=$(`<button\n    type="button"\n    class="btn btn-primary providers"\n    data-bs-toggle="collapse"\n    data-bs-target="#${t}"\n    aria-expanded="false"\n    data-i18n="btn.providers.name">\n  </button>`);return a.get(0).addEventListener("show.bs.collapse",Xe),[n,a]}(e));return s?u.append('<div class="submitted" data-i18n="feature.value.submitted"></div>'):Ne(e,u),u.localize()}function He(e,t){const a=Ge(e,t),n=0===e.get("lid")?e.get("lid"):'<span data-i18n="feature.value.unavailable"/>',s=null!==et.getFeatureById(e.getId()),o=`${e.get("city")}, <span data-i18n="feature.value.addr_state"></span> ${e.get("zip")}`,i=je(e.get("addr"),o),r=e.get("eligible").toLowerCase(),l=e.get("type").toLowerCase(),c=Ue(e.getProperties()),d=$(`<div id="${a}" class="feature-html ${`cai ${t} ${r}`}"><h4 data-i18n="layer.cai.name"></h4></div>`).append(qe(e)).append(`<div class="addr">${i}<br>${o}</div>`).append(`<div class="location-id"><span class="field" data-i18n="[prepend]feature.field.id">:</span> <span>${n}</span></div>`).append(`<div class="eligible"><span class="field" data-i18n="[prepend]feature.field.eligible">:</span> <span data-i18n="feature.value.${r}"></span></div>`).append(`<div class="type"><span class="field" data-i18n="[prepend]feature.field.type">:</span> <span data-i18n="feature.value.${l}"></span></div>`).append(`<div class="speed"><span class="field" data-i18n="[prepend]feature.field.speed">:</span> <span>${c}</span></div>`);return s?d.append('<div class="submitted" data-i18n="feature.value.submitted"></div>'):Ne(e,d),d.localize()}function Qe(e){return e.getId().indexOf("bsl")?We(e):He(e)}const et=new o;function tt(e){const t=new o;e?function(e){ce(e,le())}(t):de();const a=new Z({source:t,style:te,minZoom:12});return a.set("name","challengeLayer"),a.set("featureHtml",Qe),t.on("addfeature",Me),t.on("removefeature",Me),a}ce(et,function(){const e=localStorage.getItem("submission");return null!==e?JSON.parse(e):{type:"FeatureCollection",features:[]}}());class at extends i{constructor(e){super(e),this.idPrefix=e.idPrefix,this.idProp=e.idProp}readFeatureFromObject(e,t){const a=super.readFeatureFromObject(e,t);return a.setId(this.idPrefix+a.get(this.idProp)),a}}class nt extends at{constructor(e){super(e)}getType(){return"arraybuffer"}readFeature(e,t){const a=d(new Uint8Array(e));return super.readFeature(a.featureCollection,t)}readFeatures(e,t){const a=d(new Uint8Array(e));return super.readFeatures(a.featureCollection,t)}}class st extends o{constructor(e){super(e),this.filterUrl=e.url}loadFeatures(e,t,a){const n=setInterval((()=>{this.loading||(clearInterval(n),this.dispatchEvent("loadcomplete"))}),100);super.loadFeatures(e,t,a)}filter(e){this.setUrl(((t,a,n)=>this.filterUrl(t,a,n,e))),this.refresh()}}const ot=[{filter:["==",["get","service"],"SERVED"],"icon-src":P("served"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]},{filter:["==",["get","service"],"UNDERSERVED"],"icon-src":P("underserved"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]},{filter:["==",["get","service"],"UNSERVED"],"icon-src":P("unserved"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]}];const it={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},rt=`${it.VITE_BSL_URL}&token=${it.VITE_ARC_TOKEN}`;function lt(e){const t={},a=$(e.target),n=a.hasClass("enforce")?"input.filter.enforce":"input.filter.mdu";$(n).prop("checked",a.is(":checked")),$("input.filter").each(((e,a)=>{$(a).is(":checked")&&(t[$(a).data("where")]=!0)}));const s=a.data("layer").getSource(),o=Object.keys(t).join(" AND ");s.filter(o)}function ct(e,t){e.add(t).data("layer",V()).on("change",lt),e.data("where","enforceable_commitment = 1"),t.data("where","mdu > 1")}const dt=new st({format:new nt({dataProjection:"EPSG:3857",idPrefix:"bsl-",idProp:"lid"}),url:function(e,t,a,n){return q(rt,e,n)},strategy:u}),ut=new Z({source:dt,style:ot,minZoom:14});ut.set("name","bsl"),ut.set("featureHtml",We);const pt={"stroke-color":"rgb(17, 26, 82)","stroke-width":3},ft=new o({format:new p,url:"data/boundary.json"}),gt=new Z({source:ft,style:pt,minZoom:2,maxZoom:10}),mt={"stroke-color":"rgba(17, 26, 82, .25)","stroke-width":3,"fill-color":"rgba(17, 26, 82, 0.1)"};const ht={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},vt=`${ht.VITE_BG_URL}&token=${ht.VITE_ARC_TOKEN}`;const _t=new o({format:new nt({dataProjection:"EPSG:3857",idPrefix:"bg-",idProp:"FID"}),url:function(e,t,a){return q(vt,e)},strategy:f(g({tileSize:512}))}),bt=new Z({source:_t,style:mt,minZoom:10,visible:!1});bt.set("name","bg");const yt=[{filter:["==",["get","eligible"],"Y"],"icon-src":P("y-eligible"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]},{filter:["==",["get","eligible"],"N"],"icon-src":P("n-eligible"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]}];const It={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Et=`${It.VITE_CAI_URL}&token=${It.VITE_ARC_TOKEN}`;const wt=new st({format:new nt({dataProjection:"EPSG:3857",idPrefix:"cai-",idProp:"OBJECTID"}),url:function(e,t,a){return q(Et,e)},strategy:u}),St=new Z({source:wt,style:yt,minZoom:14});St.set("name","cai"),St.set("featureHtml",He);const $t="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",Ct={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Tt=Ct.VITE_ARC_TOKEN,Rt=encodeURIComponent(Ct.VITE_SEARCH_EXTENT),xt=`findAddressCandidates?f=pjson&outSR=3857&token=${Tt}&searchExtent=${Rt}&singleLine=`,Lt=`suggest?f=json&token=${Tt}&searchExtent=${Rt}&text=`;function At(e){const t=$("#search").val();e.preventDefault(),$("#locate button").addClass("loading"),$("#possible").slideUp(),function(e){const t=`${$t}${xt}${encodeURIComponent(e)}`;return new Promise(((e,a)=>{fetch(t).then((t=>{t.json().then((t=>{t.error&&a(t.error),e(t.candidates)})).catch((e=>{console.error(e),a(e)}))})).catch((e=>{console.error(e),a(e)}))}))}(t).then((t=>{t.length>0&&(1===t.length||100===t[0].score?Ft(t[0],$(e.target).data("view")):function(e){Pt(e,"address")}(t))})).catch((e=>console.error(e)))}function Dt(e){if("Enter"!==e.code){const e=$("#search").val();e.length>3&&function(e){const t=`${$t}${Lt}${encodeURIComponent(e)}`;return new Promise(((e,a)=>{fetch(t).then((t=>{t.json().then((t=>{t.error&&a(t.error),e(t.suggestions)})).catch((e=>{console.error(e),a(e)}))})).catch((e=>{console.error(e),a(e)}))}))}(e).then((e=>{!function(e){Pt(e,"text")}(e)})).catch((e=>console.error(e)))}}function Pt(e,t){const a={},n=$("#possible").empty();e.forEach((e=>{const s=e[t];if(!a[s]){const e=$(`<li class="list-group-item">${s}</li>`);a[s]=!0,e.on("click",(t=>{n.slideUp(),$("#search").val(e.html()),$("#locate").trigger("submit")})),n.append(e)}})),n.slideDown()}function Ft(e,t){const a=[e.location.x,e.location.y];if(n=t.getCenter(),s=a,n[0]!==s[0]||n[1]!==s[1]){const n=e.address,s=j();s.setPosition(a),t.animate({zoom:16,center:a},(()=>{$(s.getElement()).attr("title",n).attr("aria-label",n)})),function(e){localStorage.setItem("location",JSON.stringify(e))}(e)}else $("#locate button").removeClass("loading");var n,s}function Bt(e,t,n){const s=$('<div class="form-group search-map"><ul id="possible" class="list-group"></ul><button type="submit" class="btn btn-primary" data-i18n="[aria-label]search"><div></div></button></div>'),o=$('<input type="text" class="form-control" id="search" data-i18n="[placeholder]form.search.placeholder;[aria-label]form.search.placeholder">');t.prepend(s.prepend(o)).localize(),$("body").append('<div id="location" class="location"></div>'),o.on("click",(()=>o.select())),$(document).on("click",(()=>$("#possible").slideUp()));const i=new a({element:$("#location").get(0),offset:[-16,-28],className:"overlay-0 ol ol-overlay-container ol-selectable"}),r=e.getView();if(e.addOverlay(i),e.set("locationOverlay",i),$(t).data("view",r).on("submit",At),$("#search").on("keyup",Dt),n){$("#locate button").addClass("loading");const e=function(){const e=localStorage.getItem("location");if(null!==e)return JSON.parse(e)}();Ft(e,r),$("#search").val(e.address)}}const Vt=$('<div id="wait"></div>');$("body").append(Vt);const Ot=new a({element:Vt.get(0),offset:[-20,-20],className:"overlay-3 ol ol-overlay-container ol-selectable"});window.waitOverlay=Ot;class kt extends v{constructor(e){const t=$('<button data-i18n="btn.add_challenge.name"></button>');super({element:$('<div class="add-selection ol-unselectable ol-control"></div>').append(t).localize().get(0)}),this.selectedSource=e.selectedSource,this.challengeSource=e.challengeSource,t.on("click",this.addChallenges.bind(this)),this.selectedSource.on("change",this.hideShow.bind(this))}hideShow(){const e=this.selectedSource.getFeatures();$(".add-selection")[e.length>0?"fadeIn":"fadeOut"]()}addChallenges(){const e=this.getMap().getView();Ot.setPosition(e.getCenter()),setTimeout((()=>{this.selectedSource.getFeatures().forEach((e=>{we(e)})),this.selectedSource.clear(),Ot.setPosition(void 0)}),100)}}function Ut(e){const t=F();if(function(e){return e.getControls().getArray().filter((e=>e.get("select")))[0].getActive()}(t)){const a=U().getSource(),n=z().getSource();let s=!0;t.forEachFeatureAtPixel(e.pixel,((e,t)=>{s=!1;const n=e.getId();if(!(null!==et.getFeatureById(n))&&void 0!==n){const t=a.getFeatureById(n);null===t?a.addFeature(e):a.removeFeature(t)}}),{layerFilter:M}),s&&(a.clear(),n.clear())}}function zt(e){const t=e.feature.getGeometry(),a=Mt();Ot.setPosition(F().getView().getCenter()),setTimeout((()=>{!function(e,t){const a=U().getSource();t.forEach((t=>{if(null===et.getFeatureById(t.getId())){const n=t.getGeometry().getCoordinates();e.intersectsCoordinate(n)&&a.addFeature(t)}})),Ot.setPosition(void 0)}(t,a)}),100)}function Gt(e,t){const a=t.getGeometry().getCoordinates(),n=new _([e,a]).getLength();t.set("distance",n)}function Nt(e){const t=j().getPosition();if(t){if(1===e.length)return Gt(t,e[0]),e;e.sort(((e,a)=>{Gt(t,e),Gt(t,a);const n=e.get("distance"),s=a.get("distance");return n<s?-1:n>s?1:0}))}return e}function Mt(){const e=F(),t=e.getView(),a=B(),n=V(),s=a.getSource(),o=n.getSource(),i=t.calculateExtent(e.getSize()),r=a.getVisible()?s.getFeaturesInExtent(i):[],l=n.getVisible()?o.getFeaturesInExtent(i):[];return Nt(r.concat(l))}function qt(e){const t=L.locationTab.find("form"),a=$('button[aria-controls="how-it-works"]'),n="true"===a.attr("aria-expanded"),s=e.children().length>0;t.show(),n&&s&&a.trigger("click"),n||s||a.trigger("click")}function jt(e,t){t.find("form");const a=e.children().length>0;t.find(".message")[a?"hide":"show"]()}function Jt(e,t,a){const n=$('<li class="list-group-item"></li>').addClass(t.getId().indexOf("cai")>-1?"cai":"bsl").append(a(t,"location"));e.append(n)}function Yt(){const e=$("#location-list").empty(),t=Mt(),a=B().get("featureHtml"),n=V().get("featureHtml");t.forEach((t=>{t.getId().indexOf("cai")>-1?Jt(e,t,a):Jt(e,t,n)})),qt(e),$("#locate button").removeClass("loading")}function Zt(e){const t=e.feature;$(`#${Ge(t,"challenge")}`).parent().remove(),jt($("#challenge-list"),N())}function Kt(e){const t=V(),a=B(),n=e.feature||e,s=(-1===n.getId().indexOf("bsl")?a:t).get("featureHtml"),o=$("#challenge-list"),i=$('<li class="list-group-item"></li>').append(s(n,"challenge"));o.append(i),jt(o,N())}const Xt={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Wt=`${Xt.VITE_BASEMAP_URL}?token=${Xt.VITE_ARC_TOKEN}`;function Ht(t,a){return new Promise(((n,s)=>{E((()=>import("./index-N13p4pSy.js")),__vite__mapDeps([0,1]),import.meta.url).then((o=>new Promise((()=>{o.apply(t,`${Wt}&language=${e.language}`).then((e=>{const t=tt(a),s=ut.getSource(),o=St.getSource();s.on("loadcomplete",Yt),o.on("loadcomplete",Yt),ut.on("change:visible",Yt),St.on("change:visible",Yt),e.addLayer(gt),e.addLayer(bt),e.addLayer(Q),e.addLayer(ee),e.addLayer(t),e.addLayer(ut),e.addLayer(St),e.set("bgLayer",bt),e.set("selectLayer",Q),e.set("drawLayer",ee),e.set("caiLayer",St),e.set("bslLayer",ut),e.set("challengeLayer",t),n(e)})).catch((e=>{console.error(e),s(e)}))})))).catch((e=>{console.error(e),s(e)}))}))}function Qt(e){const t=$(e.target),a=$("#map-tab"),n=$("#map"),s=$("#map-container"),o=t.get(0)===a.get(0),i=a.is(":visible");i&&!o?$("body").append(s.addClass("wayout")):i&&o?n.append(s.removeClass("wayout")):s.removeClass("wayout")}window.dealWithMap=Qt,$(".nav-link").on("click",Qt);class ea extends a{constructor(e){const t=$(e.map.getTargetElement()).find(".feature-tip").get(0);super({id:D("feature-tip"),element:t||$(ea.HTML).get(0),offset:[5,5],className:"overlay-1 ol ol-overlay-container ol-selectable"}),this.setMap(e.map),this.map=this.getMap(),this.tip=$(this.getElement()),this.addTips(e.tips),this.map.on("pointermove",this.label.bind(this))}hide(){this.tip.fadeOut((()=>{this.setPosition(void 0)}))}addTips(e){e.forEach((e=>{e.layer.tip=e.label}))}out(e){$.contains(this.map.getTargetElement(),e.target)||this.hide()}label(e){const t=this.map.forEachFeatureAtPixel(e.pixel,((e,t)=>t&&t.getVisible()&&t.tip?t.tip(e):null));t?(this.tip.html(t.html),this.tip.addClass(t.css),this.setPosition(e.coordinate),this.tip.localize().show(),this.position()):this.hide()}position(){const e=this.map.getSize(),t=this.tip.width(),a=this.tip.height(),n=this.map.getPixelFromCoordinate(this.getPosition()),s=n[1]+a>e[1]?"bottom":"top",o=n[0]+t>e[0]?"right":"left";this.setPositioning(`${s}-${o}`)}}function ta(e){const t=e.get("name"),a=1===e.get("eligible")?"feature.value.eligible":"feature.value.not_eligible";const n=$("<div></div>").append(`<span class="name">${t}</span>`).append(` (<span class="tip-prop" data-i18n="${a}"></span>)`);return{html:$('<div><div class="title" data-i18n="layer.cai.name"></div></div>').append(n)}}function aa(e){var t;const a=e.get("addr"),n=function(e){return"Y"===e?"feature.value.enforce":"feature.value.not_enforce"}(e.get("enforce")),s=e.get("fed_fund"),o=e.get("state_fund"),i=[];s&&i.push(s),o&&i.push($('<div data-i18n="feature.value.state_fund_abbr"></div>').localize().html());const r=null==(t=e.get("service"))?void 0:t.toLowerCase(),l=e.get("mdu"),c=$("<div></div>").append(`<div class="address">${a}</div>`).append(`(<span class="enforce" data-i18n="${n}" />`).append(i.length>0?`, <span class="fund">${i.join(", ")}</span>`:"").append(`, <span data-i18n="feature.value.${r}"></span>`).append(l>0?`, <span class="mdu">MDU ${l}</span>)`:")");return{html:$('<div><div class="title" data-i18n="layer.bsl.name"></div></div>').append(c)}}function na(e){const t=e.get("tr"),a=e.get("bg");return{html:$(`<div>\n    <div class="title" data-i18n="[prepend]feature.field.tr"> ${t}</div>\n    <div class="title" data-i18n="[prepend]feature.field.bg"> ${a}</div>\n  </div>`)}}ea.TipDef,ea.LabelFunction,ea.Label,ea.Options,ea.HTML='<div class="feature-tip" role="tooltip"></div>';class sa extends v{constructor(e){const t=$('<button class="legend-opener" data-i18n="[title]legend.name"></button>');super({element:$('<div class="legend ol-unselectable ol-control ol-collapsed"></div>').append(t).append(e).get(0)}),this.legend=e.hide(),this.button=t,t.on("click",this.show.bind(this)),e.find(".legend-closer").on("click",this.hide.bind(this))}show(){$(this.element).removeClass("ol-collapsed").addClass("ol-expanded").prop("dir",$("html").prop("dir")),this.button.hide(),this.legend.fadeIn()}hide(){this.legend.fadeOut((()=>{$(this.element).removeClass("ol-expanded").addClass("ol-collapsed"),this.button.show()}))}}function oa(e){const t=$(e.target),a=t.data("layer"),n=t.is(":checked"),s=a.get("name");a.setVisible(n),$(`#location-list li.${s}`)[n?"show":"hide"]()}var ia={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ra=new b({target:"map-container"});function la(e){const t=$("#locations"),n=$("#challenges");A(ra,t,n),Ht(ra,e).then((s=>{if(function(){const e=ra.getControls().getArray().filter((e=>e instanceof y))[0];ra.removeControl(e)}(),function(){let e=!0;const t=$(".col-sm-4");$(window).on("resize",(a=>{const n=$("#map-container");$(window).width()>972?($(".col-sm-8").append(n),t.addClass("col-sm-4"),$("#location-tab").trigger("click")):($("#map").append(n),t.removeClass("col-sm-4"),e&&(e=!1,$("#location-tab").trigger("click")))}))}(),De($("#challenge"),e),Bt(s,$("#locate"),e),function(e,t,a){e.getView();const n=k().getSource(),s=$('<ul id="location-list" class="list-group"></ul>'),o=$('<ul id="challenge-list" class="list-group"></ul>');t.append(s),a.append(o),ct(t.find("input.enforce"),t.find("input.mdu")),n.on("addfeature",Kt),n.on("removefeature",Zt),n.getFeatures().forEach((e=>{Kt(e)}))}(s,t,n),function(e){const t=U(),a=z().getSource(),n=t.getSource(),s=k().getSource();G();const o=new m({source:a,type:"Polygon",freehand:!0,style:X}),i=new h({className:"select",interaction:o,active:!1,onToggle:t=>{z().setVisible(t),G().setActive(!t),$(e.getTargetElement())[t?"addClass":"removeClass"]("draw-select")}});$(i.getButtonElement()).addClass("select-button"),i.set("select",!0),e.addOverlay(Ot),e.addControl(i),e.addInteraction(o),e.addControl(new kt({selectedSource:n,challengeSource:s})),o.on("drawend",zt),e.on("singleclick",Ut)}(s),function(e){new ea({map:e,tips:[{layer:B(),label:ta},{layer:V(),label:aa},{layer:O(),label:na}]})}(s),Y(s),function(e){$("body").append(Pe);const t=$("#popup"),n=new a({element:t.get(0),autoPan:{animation:{duration:250}},className:"overlay-2 ol ol-overlay-container ol-selectable"});n.active=!0,n.setActive=Ve,$("#popup-content").data("map",e),e.addOverlay(n),e.set("popupOverlay",n),e.on("singleclick",Be)}(s),function(e){const t=$("#legend"),a=e.getView();t.find("#cai-check").data("layer",B()).on("change",oa),t.find("#bsl-check").data("layer",V()).on("change",oa),t.find("#bg-check").data("layer",O()).on("change",oa),a.on("change:resolution",(()=>{const e=a.getZoom();t.find("input").each(((t,a)=>{const n=$(a).data("layer");if($(a).prop("disabled",e<=n.getMinZoom()),"checkbox"===$(a).attr("type")){const e=a.id;"enforce-check"!==e&&"mdu-check"!==e&&$(a).prop("checked",n.getVisible())}}))})),new sa(t).setMap(e),ct(t.find("input.enforce"),t.find("input.mdu"))}(s),!e){const e=s.getView(),t=ia,a=JSON.parse(t.VITE_CENTER),n=1*t.VITE_ZOOM;e.setZoom(n),e.setCenter(a)}s.once("postrender",(()=>{$("body").removeClass("loading"),$(window).trigger("resize"),$("#search").trigger("focus")})),function(){const e=JSON.parse('["en", "es"]');let t=0,a=0;const n=$(".banner .dropdown .btn-primary"),s=setInterval((()=>{t=t<e.length-1?t+1:0,a+=1,a===10*e.length?(n.attr("data-i18n","translate").localize(),clearInterval(s)):n.attr("data-i18n",`translate.${e[t]}`).localize()}),1e3)}()}))}$(".ol-attribution button").addClass("attribution"),new Promise(((a,n)=>{const s=function(){const e=document.location.search,t={};e&&e.substring(1).split("&").forEach((e=>{const a=e.split("=");t[a[0]]=a[1]}));const a=t.locale;if(void 0!==a)return a.split("-")[0];document.location=`./?locale=${navigator.language.split("-")[0]}`}(),o={en:S};(function(e){return new Promise(((t,a)=>{e!==T?w(Object.assign({"./en/translation.js":()=>E((()=>Promise.resolve().then((()=>C))),void 0,import.meta.url),"./es/translation.js":()=>E((()=>import("./translation-DvMYGmxs.js")),__vite__mapDeps([]),import.meta.url),"./he/translation.js":()=>E((()=>import("./translation-K_xsQ7Z2.js")),__vite__mapDeps([]),import.meta.url)}),`./${e}/translation.js`).then((a=>{void 0!==a&&t({locale:e,translation:a})})).catch((a=>{console.warn(`No translations for locale="${e}"`),t({locale:T})})):t({locale:T})}))})(s).then((n=>{const s=n.locale;s!==T&&(o[s]=n.translation.default,$("#map-container").attr("dir","ltr"),$("html").attr("lang",s).attr("dir",o[s].translation.dir||"ltr")),e.init({defaultLocale:T,fallbackLng:T,defaultNS:"translation",resources:o,lng:s},((n,s)=>{t.init(e,$,{useOptionsAttr:!0}),$("[data-i18n]").localize(),a(o)}))}))})).catch((e=>console.error("Failed to initialize i18n"))).then((()=>{var e;void 0!==le()?"true"===localStorage.getItem("always")?la(!0):(e=la,ge.attr("data-i18n","dialog.restore").localize(),me.show().one("click",(()=>be(e,!0))),he.show().one("click",(()=>be(e,!1))),ve.hide(),$("#dialog .always").show(),fe.show()):la(!1)}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-N13p4pSy.js","./vendor-cBnjCObF.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}