import{$ as e,i as t,j as a,G as n,P as s,a as i,F as o,L as r,W as l,V as c,O as d,d as p,b as u,T as _,t as g,c as f,D as m,o as h,C as E,e as I,M as v,R as b}from"./vendor-LuzlqZi2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const T={},y=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link");n=Promise.all(t.map((t=>{if(t=function(e,t){return new URL(e,t).href}(t,a),t in T)return;T[t]=!0;const n=t.endsWith(".css"),s=n?'[rel="stylesheet"]':"";if(!!a)for(let a=e.length-1;a>=0;a--){const s=e[a];if(s.href===t&&(!n||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${t}"]${s}`))return;const i=document.createElement("link");return i.rel=n?"stylesheet":"modulepreload",n||(i.as="script",i.crossOrigin=""),i.href=t,document.head.appendChild(i),n?new Promise(((e,a)=>{i.addEventListener("load",e),i.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${t}`))))})):void 0})))}return n.then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},L=(e,t)=>{const a=e[t];return a?"function"==typeof a?a():Promise.resolve(a):new Promise(((e,a)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+t)))}))},S="illinois",R="en";function C(){return t.language||R}const V={VITE_APP_URL:"https://d1wntdefyoxmnb.cloudfront.net/illinois",VITE_STATE:"illinois",VITE_SUBMIT_DATE:"Jan 22 2023 00:00:00 CST",VITE_SUBMIT_URL:"https://dev.ilbroadbandmapping.com/start_from_map/",VITE_APP_TITLE:"Illinois BEAD Challenge",VITE_APP_DESC:"Illinois BEAD Challenge",VITE_APP_THEME_COLOR:"#111a52",VITE_APP_TWITTER:"@ILBroadbandLab",VITE_CHALLENGE_FILL:"rgba(0, 105, 217, .25)",VITE_CHALLENGE_STROKE:"rgb(0, 105, 217)",VITE_SELECT_FILL:"rgba(255, 240, 0, .8)",VITE_SELECT_STROKE:"rgb(0, 105, 217)",VITE_DRAW_FILL:"rgba(237, 195, 128, .15)",VITE_DRAW_STROKE:"rgba(0, 98, 204, .5)",VITE_BG_FILL:"rgba(17, 26, 82, 0.1)",VITE_BG_STROKE:"rgba(17, 26, 82, .25)",VITE_BOUNDARY_STROKE:"rgb(17, 26, 82)",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10333725,"ymin":4292000,"xmax":-9570950,"ymax":5339715,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_GEOCODE_URL:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",VITE_ANALYTICS:"\x3c!-- analytics code in prd only --\x3e",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},A={},w={challenge:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#111a52" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M6.043 19.496l-1.482 1.505c-2.791-2.201-4.561-5.413-4.561-9.001s1.77-6.8 4.561-9l1.482 1.504c-2.326 1.835-3.804 4.512-3.804 7.496s1.478 5.661 3.804 7.496zm.675-7.496c0-1.791.887-3.397 2.282-4.498l-1.481-1.502c-1.86 1.467-3.04 3.608-3.04 6s1.18 4.533 3.04 6l1.481-1.502c-1.396-1.101-2.282-2.707-2.282-4.498zm15.043 0c0-2.984-1.478-5.661-3.804-7.496l1.482-1.504c2.791 2.2 4.561 5.412 4.561 9s-1.77 6.8-4.561 9.001l-1.482-1.505c2.326-1.835 3.804-4.512 3.804-7.496zm-6.761 4.498l1.481 1.502c1.86-1.467 3.04-3.608 3.04-6s-1.18-4.533-3.04-6l-1.481 1.502c1.396 1.101 2.282 2.707 2.282 4.498s-.886 3.397-2.282 4.498zm-3-7.498c-1.656 0-3 1.343-3 3s1.344 3 3 3 3-1.343 3-3-1.344-3-3-3z"/></svg>',served:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#CC0202" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M0 7.244c3.071-3.24 7.314-5.244 12-5.244 4.687 0 8.929 2.004 12 5.244l-2.039 2.15c-2.549-2.688-6.071-4.352-9.961-4.352s-7.412 1.664-9.961 4.352l-2.039-2.15zm5.72 6.034c1.607-1.696 3.827-2.744 6.28-2.744s4.673 1.048 6.28 2.744l2.093-2.208c-2.143-2.261-5.103-3.659-8.373-3.659s-6.23 1.398-8.373 3.659l2.093 2.208zm3.658 3.859c.671-.708 1.598-1.145 2.622-1.145 1.023 0 1.951.437 2.622 1.145l2.057-2.17c-1.197-1.263-2.851-2.044-4.678-2.044s-3.481.782-4.678 2.044l2.055 2.17zm2.622 1.017c-1.062 0-1.923.861-1.923 1.923s.861 1.923 1.923 1.923 1.923-.861 1.923-1.923-.861-1.923-1.923-1.923z"/></svg>',underserved:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#F7B500" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M0 7.244c3.071-3.24 7.314-5.244 12-5.244 4.687 0 8.929 2.004 12 5.244l-2.039 2.15c-2.549-2.688-6.071-4.352-9.961-4.352s-7.412 1.664-9.961 4.352l-2.039-2.15zm5.72 6.034c1.607-1.696 3.827-2.744 6.28-2.744s4.673 1.048 6.28 2.744l2.093-2.208c-2.143-2.261-5.103-3.659-8.373-3.659s-6.23 1.398-8.373 3.659l2.093 2.208zm3.658 3.859c.671-.708 1.598-1.145 2.622-1.145 1.023 0 1.951.437 2.622 1.145l2.057-2.17c-1.197-1.263-2.851-2.044-4.678-2.044s-3.481.782-4.678 2.044l2.055 2.17zm2.622 1.017c-1.062 0-1.923.861-1.923 1.923s.861 1.923 1.923 1.923 1.923-.861 1.923-1.923-.861-1.923-1.923-1.923z"/></svg>',unserved:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#008450" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M0 7.244c3.071-3.24 7.314-5.244 12-5.244 4.687 0 8.929 2.004 12 5.244l-2.039 2.15c-2.549-2.688-6.071-4.352-9.961-4.352s-7.412 1.664-9.961 4.352l-2.039-2.15zm5.72 6.034c1.607-1.696 3.827-2.744 6.28-2.744s4.673 1.048 6.28 2.744l2.093-2.208c-2.143-2.261-5.103-3.659-8.373-3.659s-6.23 1.398-8.373 3.659l2.093 2.208zm3.658 3.859c.671-.708 1.598-1.145 2.622-1.145 1.023 0 1.951.437 2.622 1.145l2.057-2.17c-1.197-1.263-2.851-2.044-4.678-2.044s-3.481.782-4.678 2.044l2.055 2.17zm2.622 1.017c-1.062 0-1.923.861-1.923 1.923s.861 1.923 1.923 1.923 1.923-.861 1.923-1.923-.861-1.923-1.923-1.923z"/></svg>',"y-eligible":'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><rect fill="#000" x="3" y="3" width="42" height="42"/><rect fill="#fff" x="6" y="6" width="36" height="36"/><rect fill="#008450" x="9" y="9" width="30" height="30"/><path fill="#fff" transform="translate(12, 12)" d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>',"n-eligible":'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><rect fill="#000" x="3" y="3" width="42" height="42"/><rect fill="#fff" x="6" y="6" width="36" height="36"/><rect fill="#CC0202" x="9" y="9" width="30" height="30"/><path fill="#fff" transform="translate(13.2, 13.2) scale(0.9 0.9)" d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"/></svg>'};function x(e,t){A[e]=t}function P(){return A.map}function D(){return P().getView()}function O(){return P().get("cai")}function B(){return P().get("bsl")}function F(){return P().get("bg")}function k(){return P().get("challenge").getSource()}function G(){return P().get("select")}function U(){return G().getSource()}function $(){return P().get("draw")}function N(){return $().getSource()}function z(e){return e===O()||e===B()}function M(){return P().get("popupOverlay")}function K(){return P().get("locationOverlay")}function q(){return V.VITE_STATE}function Y(e){return null!==k().getFeatureById(e.getId())||e.get("challenge")}function j(e){return`data:image/svg+xml;utf8,${encodeURIComponent(w[e])}`}function W(e,t,a){a=a||"1 = 1";const n=encodeURIComponent(a),s=`{"xmin":${t[0]},"ymin":${t[1]},"xmax":${t[2]},"ymax":${t[3]},"spatialReference":{"wkid":102100,"latestWkid":3857}}`;return`${e}&esriSpatialRelIntersects&geometry=${encodeURIComponent(s)}&where=${n}`}function J(){return e(`#${A.challengeTab.attr("aria-labelledby")}`)}function H(){return A.translate}function Z(t){const a=C(),n=new Intl.NumberFormat(a).format(t.max_up),s=new Intl.NumberFormat(a).format(t.max_down);return"0"===s||"0"===n?'<span data-i18n="feature.value.unknown"/>':e("<div></div>").append(`<span>${s}</span>`).append('<span class="division-sym">/</span>').append(`<span>${n}</span>`).localize().html()}const X=[{},{prop:"name",name:"table.column.name",csv:"NAME",layer:"cai"},{prop:"addr",name:"table.column.addr",csv:"ADDRESS"},{prop:"city",name:"table.column.city",csv:"CITY"},{prop:"state",name:"table.column.state",csv:"STATE",decode:!0,value:"addr_state"},{prop:"zip",name:"table.column.zip",csv:"ZIP"},{prop:"lid",name:"table.column.lid",csv:"LOCATION_ID"},{prop:"type",name:"table.column.type",csv:"TYPE",decode:!0,layer:"cai"},{prop:"eligible",name:"table.column.eligible",csv:"ELIGIBILITY",decode:!0,layer:"cai"},{prop:"max_up",name:"table.column.max_up",csv:"MAX_UPLOAD_SPEED",layer:"cai"},{prop:"max_down",name:"table.column.max_down",csv:"MAX_DOWNLOAD_SPEED",layer:"cai"},{prop:"mdu",name:"table.column.mdu",csv:"MULTI_DWELLING_UNITS",layer:"bsl"},{prop:"service",name:"table.column.service",csv:"SERVICEABILITY",decode:!0,layer:"bsl"},{prop:"enforce",name:"table.column.enforce",csv:"ENFORCEABLE_COMMITMENT",decode:!0,layer:"bsl"},{prop:"fed_fund",name:"table.column.fed_fund",csv:"FEDERAL_FUNDING",decode:!0,layer:"bsl"},{prop:"state_fund",name:"table.column.state_fund",csv:"STATE_FUNDING",decode:!0,layer:"bsl"}],Q={quotes:!1,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0,newline:"\n",skipEmptyLines:!1,columns:function(){const e=["FID_DO_NOT_EDIT","COORDINATE_DO_NOT_EDIT"];return X.forEach((t=>{void 0!==t.csv&&e.push(t.csv)})),e}()},ee=new n({dataProjection:"EPSG:3857"});function te(){const e=localStorage.getItem("challenges");if(null!==e){const t=JSON.parse(e);if(t.features.length>0)return t}}function ae(e){const t=s.parse(e.target.result,{...Q,skipFirstNLines:1}).data,a=k();t.forEach((e=>{a.addFeature(function(e){const t={challenge:!0};X.forEach((a=>{a.csv&&(t[a.prop]=e[a.csv])})),t.geometry=new i(JSON.parse(e.COORDINATE_DO_NOT_EDIT));const a=new o(t);return a.setId(e.FID_DO_NOT_EDIT),a}(e))})),ne(a.getFeatures())}function ne(e){const t=ee.writeFeatures(e);localStorage.setItem("challenges",t)}function se(e){!function(e,t){if(void 0!==t){const a=ee.readFeatures(t);e.addFeatures(a)}}(e,te())}function ie(e){const t=e.target.files.item(0),a=new FileReader;a.onload=ae,a.readAsText(t)}function oe(){const e=[];return k().getFeatures().forEach((t=>{const a=function(e){const t={};return X.forEach((a=>{t[a.csv]=e[a.prop]})),t}(t.getProperties());a.FID_DO_NOT_EDIT=t.getId(),a.COORDINATE_DO_NOT_EDIT=function(e){const t=e.getGeometry();return JSON.stringify(t.getCoordinates())}(t),e.push(a)})),encodeURIComponent(s.unparse(e,Q))}function re(){localStorage.removeItem("challenges"),localStorage.removeItem("location")}e("body").append('<div id="dialog" class="modal fade" data-bs-keyboard="false" data-bs-backdrop="static" tabindex="-1" aria-hidden="true">\n  <div id="modal" class="modal-dialog">\n    <div class="modal-content">\n    <div class="modal-header">\n      <h2></h2>\n      <button type="button" class="btn-close" data-bs-dismiss="modal" data-i18n="[aria-label]btn.close.no"></button>\n    </div>\n    <div class="modal-body"></div>\n      <div class="modal-footer">\n        <div class="start">\n          <input id="always" type="checkbox" class="form-check-input always">\n          <label for="always" class="always" data-i18n="dialog.always"></label>\n        </div>\n        <div class="end">\n          <button type="button" class="btn btn-secondary no" data-bs-dismiss="modal" data-i18n="btn.no.name"></button>\n          <button type="button" class="btn btn-primary yes" data-i18n="btn.yes.name"></button>\n          <button type="button" class="btn btn-primary ok" data-i18n="btn.ok.name"></button>\n          </div>\n      </div>\n    </div>\n  </div>\n</div>');const le=new bootstrap.Modal("#dialog"),ce=e("#dialog .modal-header").hide(),de=e("#dialog .modal-footer").hide(),pe=e("#dialog button.yes").hide(),ue=e("#dialog button.no").hide(),_e=e("#dialog button.ok").hide(),ge=e("#dialog input.always").on("change",(()=>{return e=ge.is(":checked"),void localStorage.setItem("always",e);var e})),fe=e("#dialog .always").hide(),me=e("#dialog .modal-body"),he=e("#modal").get(0);function Ee(t,a){le.hide(),e("body").removeClass("intro"),he.className="modal-dialog",me.removeAttr("data-i18n").empty(),ce.hide().find("h2").removeAttr("data-i18n").empty(),de.hide(),pe.hide().off(),ue.hide().off(),_e.hide(),fe.hide(),"function"==typeof t&&t(a)}function Ie(){var e;he.className="guide",e=me,L(Object.assign({"./illinois/en.js":()=>y((()=>import("./en-Mmj6XNBO.js")),__vite__mapDeps([]),import.meta.url),"./illinois/es.js":()=>y((()=>import("./es-9XAHckeG.js")),__vite__mapDeps([]),import.meta.url)}),`./${q()}/${C()}.js`).then((t=>{e.empty().append(t.default)})),ce.show().find("h2").attr("data-i18n","dialog.guide.title").localize(),le.show()}e("#dialog button.btn-close").off().on("click",Ee),_e.on("click",Ee);const ve=972;function be(){const t=e("#map-tab").hasClass("active"),a=e("#challenge-tab").hasClass("active"),n=e("#layers-tab").hasClass("active"),s=e(window).width()<ve,i=s&&(a||n);e("#legend")[s?"addClass":"removeClass"]("solo"),e("#locate")[i?"hide":"show"](),e("#tab-content")[t?"addClass":"removeClass"]("map-active");const o=e(window).outerHeight(!0),r=e(window).outerWidth(!0),l=o-(e("#banner").outerHeight(!0)+e("#nav").outerHeight(!0)+(a||n?0:e("#locate").outerHeight(!0))+(r<ve?5:30));e("#tab-content").css("height",`${l}px`)}e(".nav-link").on("click",(function(t){const a=e(t.target),n=e("#map-tab"),s=e("#map"),i=e("#map-container"),o=a.get(0)===n.get(0),r=n.is(":visible");r&&!o?e("body").append(i.addClass("wayout")):r&&o?s.append(i.removeClass("wayout")):i.removeClass("wayout")})).on("click",be);const Te='<button class="help" \n  data-i18n="[title]dialog.guide.title;[aria-label]dialog.guide.title;" \n  type="button"><h2 class="screen-reader-only" data-i18n="dialog.guide.title"\n  ></h2><span aria-hidden="true">?</span></button>';function ye(){return new Promise(((t,a)=>{L(Object.assign({"./banner/illinois.js":()=>y((()=>import("./illinois-OjPvj9IH.js")),__vite__mapDeps([]),import.meta.url)}),`./banner/${q()}.js`).then((a=>{const n=e(a.default),s=e("#challenges");e("body").prepend(n.localize()),n.find("h1, div").on("click",(()=>{document.location=`./?locale=${e("html").prop("lang")}`})),function(t){const a=e(Te);t.append(a),a.on("click",(()=>Ie()))}(e("#map-container")),function(){const t=e(".col-sm-4");e(window).on("resize",(a=>{const n=e("#map-container");e(window).width()>ve?(e(".col-sm-8").append(n),t.addClass("col-sm-4"),e("#layers-tab").trigger("click")):(t.removeClass("col-sm-4"),e("#map-tab").hasClass("active")||e("body").append(n.addClass("wayout"))),be()}))}(),x("challengeTab",s),t({map:e("#map-container").get(0),tabs:{location:e("#locations"),layers:e("#layers"),challenge:s}})})).catch((e=>{console.error({error:e,message:"Failed to load banner."})}))}))}class Le extends r{constructor(e){super(e),this.style=e.style}createRenderer(){return new l(this,{style:this.style})}getStyle(){return this.style}}const Se={"circle-radius":["interpolate",["exponential",2],["zoom"],10,6,17,48],"circle-fill-color":V.VITE_SELECT_FILL,"circle-stroke-color":V.VITE_SELECT_STROKE,"circle-stroke-width":3},Re={"fill-color":V.VITE_DRAW_FILL,"stroke-color":V.VITE_DRAW_STROKE,"stroke-width":3},Ce=new c({}),Ve=new c({}),Ae=new Le({source:Ce,style:Se,minZoom:14});Ae.set("name","selectLayer");const we=new Le({source:Ve,style:Re,minZoom:14});window.select=Ae,Ae.on("change:visible",(()=>{console.warn(Ae.getVisible())})),we.set("name","drawLayer");const xe=[{"circle-radius":["interpolate",["exponential",2],["zoom"],10,6,17,48],"circle-fill-color":V.VITE_CHALLENGE_FILL,"circle-stroke-color":V.VITE_CHALLENGE_STROKE,"circle-stroke-width":3},{"icon-src":j("challenge"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],10,.1,17,1]}];const Pe={VITE_APP_URL:"https://d1wntdefyoxmnb.cloudfront.net/illinois",VITE_STATE:"illinois",VITE_SUBMIT_DATE:"Jan 22 2023 00:00:00 CST",VITE_SUBMIT_URL:"https://dev.ilbroadbandmapping.com/start_from_map/",VITE_APP_TITLE:"Illinois BEAD Challenge",VITE_APP_DESC:"Illinois BEAD Challenge",VITE_APP_THEME_COLOR:"#111a52",VITE_APP_TWITTER:"@ILBroadbandLab",VITE_CHALLENGE_FILL:"rgba(0, 105, 217, .25)",VITE_CHALLENGE_STROKE:"rgb(0, 105, 217)",VITE_SELECT_FILL:"rgba(255, 240, 0, .8)",VITE_SELECT_STROKE:"rgb(0, 105, 217)",VITE_DRAW_FILL:"rgba(237, 195, 128, .15)",VITE_DRAW_STROKE:"rgba(0, 98, 204, .5)",VITE_BG_FILL:"rgba(17, 26, 82, 0.1)",VITE_BG_STROKE:"rgba(17, 26, 82, .25)",VITE_BOUNDARY_STROKE:"rgb(17, 26, 82)",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10333725,"ymin":4292000,"xmax":-9570950,"ymax":5339715,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_GEOCODE_URL:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",VITE_ANALYTICS:"\x3c!-- analytics code in prd only --\x3e",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},De=Pe.VITE_BSL_PROVIDER_URL,Oe=Pe.VITE_PROVIDER_URL;function Be(e,t){console.error({message:`Could not fetch providers for location_id=${t.get("lid")}`,error:e})}function Fe(t){const a=e(t.target),n=a.data("feature"),s=a.data("table");var i;a.removeClass("collapsed"),(s.hasClass("popup")||s.hasClass("table"))&&function(t,a){e(he).addClass("provider"),new MutationObserver((()=>setTimeout((()=>me.removeClass("loading")),500))).observe(t.get(0),{attributes:!0}),me.addClass("loading").append(t),ce.show().find("h2").attr("data-i18n","dialog.provider.title").localize(),e("#dialog button.btn-close").one("click",a),le.show()}(s,(()=>a.attr("aria-expanded",!1))),(i=n,new Promise(((e,t)=>{if(void 0!==i.get("providers"))e(i);else{const t=encodeURIComponent(`location_id=${i.get("lid")}`);fetch(`${De}&where=${t}`).then((t=>{t.json().then((t=>{const a=[];if(t.features.forEach((e=>{a.push(e.properties.provider_id)})),a.length>0){const t=encodeURIComponent(`provider_id IN (${a.join()})`);fetch(`${Oe}&where=${t}`).then((t=>{t.json().then((t=>{const a=[];t.features.forEach((e=>{a.push(e.properties)})),i.set("providers",a,!0),e(i)}))})).catch((e=>Be(e,i)))}else i.set("providers",[]),e(i)}))})).catch((e=>Be(e,i)))}}))).then((t=>{const a=t.get("providers"),n=s.find("tbody").empty();a.length>0?a.forEach((t=>{const a=e("<tr></tr>").append(`<td>${t.name}</td>`).append(`<td>${t.tech}</td>`).append(`<td>${Z(t)}</td>`);n.append(a)})):n.append('<tr><td colspan="3" data-i18n="feature.value.unserved"></td></tr>').localize(),s.removeClass("loading")})).catch((e=>Be(e,n)))}function ke(t,a,n){const s=`prov-${a}-${t.getId()}`,i=e(`<button\n    type="button"\n    class="btn btn-primary providers ${a}"\n    data-bs-toggle="collapse"\n    data-bs-target="#${s}"\n    aria-expanded="false"\n    data-i18n="btn.providers.name">\n  </button>`),o=e(`<table id="${s}" class="collapse hide provider ${a} loading">\n    <thead>\n      <th data-i18n="feature.field.provider"/>\n      <th data-i18n="feature.field.tech"/>\n      <th data-i18n="feature.field.speed"/>\n    </thead>\n    <tbody></tbody>\n  </table>`);n.append(i).append(o),i.data("feature",t).data("table",o).on("click",Fe)}function Ge(t){const a=e(t.target).data("feature");e(`#table-${a.getId()}`).remove()}const Ue=e('<form id="challenge" action="https://dev.ilbroadbandmapping.com/start_from_map/" method="POST">\n  <input name="payload" type="hidden">\n</form>');function $e(){J().attr("data-i18n","tab.challenges.name").removeAttr("aria-alert").removeClass("new").localize()}function Ne(t){t.preventDefault();const a=t.target,n=k().getFeatures(),s={cai:[],bsl:[]};n.forEach((e=>{const t=e.get("lid");e.getId().indexOf("cai")>-1?s.cai.push(t):s.bsl.push(t)})),e(a).find('input[name="payload"]').val(JSON.stringify(s)),a.submit()}function ze(t){t.preventDefault(),function(t,a){const n=e('<table class="table"><thead><tr></tr></thead><tbody></tbody><table>'),s=n.find("thead tr"),i=n.find("tbody");X.forEach((t=>{const a=t.name,n=t.prop,i=e(`<th class="${n||""}"></th>`);s.append(i),void 0!==a&&i.attr("data-i18n",`${a};[title]${a}`)})),t.forEach((t=>{const a=t.getId(),n=e(`<tr id="table-${a}"></tr>`);i.append(n),X.forEach((a=>{var s,i;const o=a.prop,r=e(`<td class="${o||""}"></td>`),l=null==(s=t.get("service"))?void 0:s.toLowerCase();if(void 0===o){const a=e("<img>"),n=e('<img role="button" src="img/trash.svg" data-i18n="[alt]btn.remove_challenge.name;[title]btn.remove_challenge.name">').data("feature",t).on("click",Ge),s=null==(i=t.get("eligible"))?void 0:i.toLowerCase();if(void 0!==l)a.attr("src",`img/${l}.svg`).attr("data-i18n",`[alt]feature.value.${l};[title]feature.value.${l}`),r.append(a).append(n);else{const e="y"===s?"eligible":"not_eligible";a.attr("src",`img/${s}-eligible.svg`).attr("data-i18n",`[alt]feature.value.${e};[title]feature.value.${e}`),r.append(a).append(n)}}else{const e=void 0!==t.get(o)?t.get(o):a.value;if("max_up"===o&&void 0!==l)ke(t,"table",r.addClass("provide"));else if("max_down"===o&&void 0!==l)r.addClass("provide");else if(a.decode&&void 0!==e){const t=`${e}`.toLowerCase();r.attr("data-i18n",`feature.value.${t}`)}else r.html(e).addClass(void 0===e?"empty":"")}n.append(r)}))}));const o=e("#container"),r=e('<div class="challenge-table" style="display:none"></div>'),l=e('<button class="btn btn-primary back" data-i18n="[aria-label]btn.back.name;[title]btn.back.name"></button>').on("click",(()=>{e("body").removeClass("challenge-table"),r.slideUp((()=>{H().fadeIn(),r.remove(),o.attr("aria-hidden",!1)}))}));e(n.find("thead th").get(0)).append(l),r.append(n).css("top",o.get(0).offsetTop+"px"),e("body").addClass("challenge-table").append(r),H().fadeOut(),r.localize().slideDown((()=>{const e=n.find("thead"),t=r.height(),a=parseInt(r.css("padding-top")),s=parseInt(r.css("padding-bottom")),l=e.height(),c=parseInt(e.css("padding-top")),d=parseInt(e.css("padding-bottom"));i.height(t-a-s-l-c-d),o.attr("aria-hidden",!0)}))}(k().getFeatures())}function Me(t){t.preventDefault(),function(){const t=`data:text/csv;charset=utf-8,${oe()}`,a=e('<a class="csv-download"><img></a>');e("body").append(a),a.attr({href:t,download:"Illinois-BEAD-challenge.csv"}).find("img").trigger("click"),a.remove()}()}function Ke(t){t.preventDefault(),function(){let t=e("#load-csv");0===t.length&&(t=e('<input id="load-csv" type="file">'),e("body").append(t),t.on("change",ie)),t.trigger("click")}()}function qe(e){if(e){const e=k();e.getFeatures().forEach((t=>{t.set("challenge",!1,!0),e.removeFeature(t)})),re(),We(!0)}}function Ye(e){var t;e.preventDefault(),t=qe,me.attr("data-i18n","dialog.delete").localize(),de.show(),pe.show().one("click",(()=>Ee(t,!0))),ue.show().one("click",(()=>Ee(t,!1))),le.show()}function je(e){e.preventDefault(),function(){const e=new Date("Jan 22 2023 00:00:00 CST");me.append(`&nbsp;${e.toLocaleString()}`).attr("data-i18n","[prepend]dialog.premature").localize(),de.show(),_e.show(),le.show()}()}function We(t){Ue.find("button").each(((a,n)=>{e(n).hasClass("open")||e(n).prop("disabled",t)}))}function Je(t){const a=function(t){return t instanceof o?t:e(t.target).data("feature")}(t),n=k();a.set("challenge",!0,!0),n.addFeature(a),J().addClass("new").attr("data-i18n","tab.challenges.new;[aria-alert]tab.challenges.new").one("click",$e).localize(),ne(n.getFeatures()),We(!1)}function He(t){const a=k(),n=e(t.target).data("feature"),s=a.getFeatureById(n.getId());n.set("challenge",!1,!0),s.set("challenge",!1,!0),a.removeFeature(s),ne(a.getFeatures()),0===a.getFeatures().length&&($e(),We(!0))}function Ze(t,a){e(t.append(Ue)),function(t){const a=e("<div></div>"),n={};["delete","table","save","open"].forEach((t=>{const s=e('<button class="btn btn-primary"></button>').attr("data-i18n",`[title]form.challenges.${t};[aria-label]form.challenges.${t}`).prop("disabled","open"!==t).addClass(`sm ${t}`);n[t]=s,a.append(s)})),t.append(a),n.save.on("click",Me),n.open.on("click",Ke),n.table.on("click",ze),n.delete.on("click",Ye),t.append('<button data-i18n="form.challenges.submit" type="submit" class="btn btn-primary" disabled></button>')}(Ue),We(!a),function(e){const t=new Date("Jan 22 2023 00:00:00 CST").getTime();(new Date).getTime()>t?e.on("submit",Ne):e.on("submit",je)}(Ue),Ue.localize()}const Xe=e('<div id="popup" class="popup">\n  <a href="#" id="popup-closer" class="popup-closer" data-i18n=[aria-label]btn.close.name}" rel="noopener"></a>\n  <div id="popup-content">\n  </div>\n  <div id="popup-pager">\n    <button class="btn btn-secondary previous" data-incriment="-1" data-i18n="[title]popup.pager.previous;[aria-label]popup.pager.previous"></button>\n    <div>\n      <span class="at">1</span>\n      <span data-i18n="popup.pager.of"></span>\n      <span class="end"></span>\n    </div>\n    <button class="btn btn-secondary next" data-incriment="1" data-i18n="[title]popup.pager.next;[aria-label]popup.pager.next"></button>\n  </div>\n  <div id="popup-standby" aria-hidden="true"></div>\n</div>');function Qe(t){t.setPosition(void 0),e("#popup").removeClass("challenge").css("opacity",0).show()}function et(t){const a=e("#popup").removeClass("challenge"),n=e("#popup-content"),s=e("#popup-pager"),i=e(t.target),o=s.data("features"),r=s.data("htmlFeatures"),l=s.find(".at"),c=l.html()-1,d=parseInt(i.data("incriment"));if(e("#popup-standby").append(n.find(".feature-html")),c+d<r.length&&c+d>0){const e=o[c+d],t=Y(e);l.html(c+d+1),a.attr("data-fid",e.getId()).addClass(t?"challenge":""),n.append(r[c+d])}else{const e=o[0],t=Y(e);l.html(1),a.attr("data-fid",e.getId()).addClass(t?"challenge":""),n.html(r[0])}st()}function tt(t,a,n,s){const i=e("#popup").attr("dir",e("html").attr("dir")).removeClass("challenge"),o=t.get("popupOverlay"),r=e("#popup-content");if(s.length>0){const t=s[0];i.attr("data-fid",n[0].getId()).addClass(n[0].get("challenge")?"challenge":""),r.html(t),function(t,a){e("#popup-standby").empty();for(let s=1;s<a.length;s+=1)e("#popup-standby").append(a[s]);const n=e("#popup-pager").data("features",t).data("htmlFeatures",a);a.length>1?(n.find(".at").html(1),n.find(".end").html(a.length),n.localize().css("display","inline-block")):n.hide()}(n,s),o.setPosition(a),i.animate({opacity:1}),e("#popup-closer").one("click",(e=>{i.fadeOut((()=>Qe(o)))}))}}function at(e){if(M().active){const t=e.map,a=[],n=[];t.forEachFeatureAtPixel(e.pixel,((e,t)=>{const s=t.get("featureHtml");a.push(s(e,"popup")),n.push(e)}),{layerFilter:z,hitTolerance:1e3}),tt(t,e.coordinate,n,a)}}function nt(t){e("#popup"),this.active=t,setTimeout((()=>{Qe(this),t||e("popup").hide()}),500)}function st(){setTimeout((()=>{M().panIntoView()}),500)}function it(t,a){const n=t.getId(),s=[];return a?(s.push(`#location-${n} button.challenge`),s.push(`#challenge-${n} button.challenge`),s.push(`#popup-${n} button.challenge`)):s.push(`[data-fid="${n}"`),e(s.join())}function ot(e,t){return`${t}-${e.getId()}`}function rt(t,a){const n=Y(t),s=e(`<button class="btn btn-primary challenge" data-i18n="${n?"btn.remove_challenge.name":"btn.add_challenge.name"}"></button>`).on("click",n?He:Je).data("feature",t);t.set("challenge",n,!0),a.append(s)}function lt(e){const t=e.feature,a=Y(t),n=a?"btn.remove_challenge.name":"btn.add_challenge.name";it(t,!0).attr("data-i18n",n).off("click",a?Je:He).on("click",a?He:Je).localize(),st(),function(e,t){it(e)[t?"addClass":"removeClass"]("challenge")}(t,a),"addfeature"===e.type&&We(!1)}function ct(t){const a=t.get("distance");if(void 0!==a){const t=C(),n=e('<label data-i18n="feature.value.distance"></label>').localize();let s=new Number((a/1609.34).toFixed(2));return s=new Intl.NumberFormat(t).format(s),e(`<div class="distance">${s} mi</div>`).attr("aria-label",`${s} ${n.html()}`)}return""}function dt(t){const a=void 0!==t.name?`${t.name}<br>`:"",n=t.addr,s=t.city,i=t.state,o=t.zip,r=`${s}, ${i} ${o}`,l=function(e,t){return e.replace(t,"")}(n,r);return"rtl"===e("html").attr("dir")?`${a}${o} ${i}, ${s}<br>${l}`:`${a}${l}<br>${r}`}class pt extends n{constructor(e){super(e),this.idPrefix=e.idPrefix,this.idProp=e.idProp}readFeatureFromObject(e,t){const a=super.readFeatureFromObject(e,t);return a.setId(this.idPrefix+a.get(this.idProp)),a}}class ut extends pt{constructor(e){super(e)}getType(){return"arraybuffer"}readFeature(e,t){const a=p(new Uint8Array(e));return super.readFeature(a.featureCollection.features[0],t)}readFeatures(e,t){const a=p(new Uint8Array(e));return super.readFeatures(a.featureCollection,t)}}class _t extends c{constructor(e){super(e),this.filterUrl=e.url}loadFeatures(e,t,a){if(this.loading){const e=setInterval((()=>{this.loading||(clearInterval(e),this.dispatchEvent("loadcomplete"))}),100)}super.loadFeatures(e,t,a)}filter(e){this.setUrl(((t,a,n)=>this.filterUrl(t,a,n,e))),this.refresh()}}const gt=[{filter:["==",["get","service"],"SERVED"],"icon-src":j("served"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],10,.1,17,1]},{filter:["==",["get","service"],"UNDERSERVED"],"icon-src":j("underserved"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],10,.1,17,1]},{filter:["==",["get","service"],"UNSERVED"],"icon-src":j("unserved"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],10,.1,17,1]}];const ft={VITE_APP_URL:"https://d1wntdefyoxmnb.cloudfront.net/illinois",VITE_STATE:"illinois",VITE_SUBMIT_DATE:"Jan 22 2023 00:00:00 CST",VITE_SUBMIT_URL:"https://dev.ilbroadbandmapping.com/start_from_map/",VITE_APP_TITLE:"Illinois BEAD Challenge",VITE_APP_DESC:"Illinois BEAD Challenge",VITE_APP_THEME_COLOR:"#111a52",VITE_APP_TWITTER:"@ILBroadbandLab",VITE_CHALLENGE_FILL:"rgba(0, 105, 217, .25)",VITE_CHALLENGE_STROKE:"rgb(0, 105, 217)",VITE_SELECT_FILL:"rgba(255, 240, 0, .8)",VITE_SELECT_STROKE:"rgb(0, 105, 217)",VITE_DRAW_FILL:"rgba(237, 195, 128, .15)",VITE_DRAW_STROKE:"rgba(0, 98, 204, .5)",VITE_BG_FILL:"rgba(17, 26, 82, 0.1)",VITE_BG_STROKE:"rgba(17, 26, 82, .25)",VITE_BOUNDARY_STROKE:"rgb(17, 26, 82)",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10333725,"ymin":4292000,"xmax":-9570950,"ymax":5339715,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_GEOCODE_URL:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",VITE_ANALYTICS:"\x3c!-- analytics code in prd only --\x3e",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},mt=`${ft.VITE_BSL_URL}&token=${ft.VITE_ARC_TOKEN}`;function ht(t){const a={},n=e(t.target),s=n.hasClass("enforce")?"input.filter.enforce":"input.filter.mdu";e(s).prop("checked",n.is(":checked")),e("input.filter").each(((t,n)=>{e(n).is(":checked")&&(a[e(n).data("where")]=!0)}));const i=n.data("layer").getSource(),o=Object.keys(a).join(" AND ");i.filter(o)}const Et=new _t({format:new ut({dataProjection:"EPSG:3857",idPrefix:"bsl-",idProp:"lid"}),url:function(e,t,a,n){return W(mt,e,n)},strategy:u}),It=new Le({source:Et,style:gt,minZoom:9});It.set("name","bsl"),It.set("featureHtml",(function(t,a){var n;const s=ot(t,a),i=t.get("lid"),o=dt({addr:t.get("addr"),city:t.get("city"),state:'<span data-i18n="feature.value.addr_state"></span>',zip:0!==parseInt(t.get("zip"))?t.get("zip"):""}),r=null==(n=t.get("service"))?void 0:n.toLowerCase(),l=1===t.get("enforce")?"y":"n",c=t.get("mdu"),d=e(`<div id="${s}" class="feature-html ${`bsl ${a} ${r} ${l}`}"><h4 data-i18n="[prepend]layer.bsl.name"></h4></div>`).append(ct(t)).append(`<address>${o}</address>`).append(`<div class="location-id"><span class="field" data-i18n="[prepend]feature.field.id">:</span> <span>${i}</span></div>`).append(`<div class="enfoce"><span class="field" data-i18n="[prepend]feature.field.enforce">:</span> <span data-i18n="feature.value.${l}"></span></div>`).append(function(t){var a;const n=e('<div class="fund"><span class="field" data-i18n="[prepend]feature.field.fund">: </span></div>'),s=null==(a=t.get("fed_fund"))?void 0:a.toLowerCase(),i=1===t.get("state_fund")?"state_fund":"";return s&&n.append(`<span class="fed_fund" data-i18n="[prepend]feature.value.${s}"></span>`),i&&(s&&n.find(".fed_fund").append(", "),n.append(`<span class="state_fund" data-i18n="feature.value.${i}"></span>`)),n.children().length>1?n:""}(t)).append(`<div class="service"><span class="field" data-i18n="[prepend]feature.field.service">:</span> <span data-i18n="feature.value.${r}"></span></div>`).append(c>1?`<div class="mdu"><span class="field" data-i18n="[prepend]feature.field.mdu">:</span> <span>${c}</span></div>`:"");return ke(t,a,d),rt(t,d),d.localize()}));const vt={"stroke-color":V.VITE_BOUNDARY_STROKE,"stroke-width":3},bt=new c({format:new _,url:`data/${q()}.json`}),Tt=new Le({source:bt,style:vt,minZoom:2,maxZoom:9});Tt.set("name","boundary");const yt={"stroke-color":V.VITE_BG_STROKE,"stroke-width":3,"fill-color":V.VITE_BG_FILL};const Lt={VITE_APP_URL:"https://d1wntdefyoxmnb.cloudfront.net/illinois",VITE_STATE:"illinois",VITE_SUBMIT_DATE:"Jan 22 2023 00:00:00 CST",VITE_SUBMIT_URL:"https://dev.ilbroadbandmapping.com/start_from_map/",VITE_APP_TITLE:"Illinois BEAD Challenge",VITE_APP_DESC:"Illinois BEAD Challenge",VITE_APP_THEME_COLOR:"#111a52",VITE_APP_TWITTER:"@ILBroadbandLab",VITE_CHALLENGE_FILL:"rgba(0, 105, 217, .25)",VITE_CHALLENGE_STROKE:"rgb(0, 105, 217)",VITE_SELECT_FILL:"rgba(255, 240, 0, .8)",VITE_SELECT_STROKE:"rgb(0, 105, 217)",VITE_DRAW_FILL:"rgba(237, 195, 128, .15)",VITE_DRAW_STROKE:"rgba(0, 98, 204, .5)",VITE_BG_FILL:"rgba(17, 26, 82, 0.1)",VITE_BG_STROKE:"rgba(17, 26, 82, .25)",VITE_BOUNDARY_STROKE:"rgb(17, 26, 82)",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10333725,"ymin":4292000,"xmax":-9570950,"ymax":5339715,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_GEOCODE_URL:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",VITE_ANALYTICS:"\x3c!-- analytics code in prd only --\x3e",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},St=`${Lt.VITE_BG_URL}&token=${Lt.VITE_ARC_TOKEN}`;const Rt=new c({format:new ut({dataProjection:"EPSG:3857",idPrefix:"bg-",idProp:"FID"}),url:function(e,t,a){return W(St,e)},strategy:g(f({tileSize:512}))}),Ct=new Le({source:Rt,style:yt,minZoom:9,visible:!1});Ct.set("name","bg");const Vt=[{filter:["==",["get","eligible"],"Y"],"icon-src":j("y-eligible"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],10,.1,17,1]},{filter:["==",["get","eligible"],"N"],"icon-src":j("n-eligible"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],10,.1,17,1]}];const At={VITE_APP_URL:"https://d1wntdefyoxmnb.cloudfront.net/illinois",VITE_STATE:"illinois",VITE_SUBMIT_DATE:"Jan 22 2023 00:00:00 CST",VITE_SUBMIT_URL:"https://dev.ilbroadbandmapping.com/start_from_map/",VITE_APP_TITLE:"Illinois BEAD Challenge",VITE_APP_DESC:"Illinois BEAD Challenge",VITE_APP_THEME_COLOR:"#111a52",VITE_APP_TWITTER:"@ILBroadbandLab",VITE_CHALLENGE_FILL:"rgba(0, 105, 217, .25)",VITE_CHALLENGE_STROKE:"rgb(0, 105, 217)",VITE_SELECT_FILL:"rgba(255, 240, 0, .8)",VITE_SELECT_STROKE:"rgb(0, 105, 217)",VITE_DRAW_FILL:"rgba(237, 195, 128, .15)",VITE_DRAW_STROKE:"rgba(0, 98, 204, .5)",VITE_BG_FILL:"rgba(17, 26, 82, 0.1)",VITE_BG_STROKE:"rgba(17, 26, 82, .25)",VITE_BOUNDARY_STROKE:"rgb(17, 26, 82)",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10333725,"ymin":4292000,"xmax":-9570950,"ymax":5339715,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_GEOCODE_URL:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",VITE_ANALYTICS:"\x3c!-- analytics code in prd only --\x3e",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},wt=`${At.VITE_CAI_URL}&token=${At.VITE_ARC_TOKEN}`;const xt=new _t({format:new ut({dataProjection:"EPSG:3857",idPrefix:"cai-",idProp:"lid"}),url:function(e,t,a){return W(wt,e)},strategy:u}),Pt=new Le({source:xt,style:Vt,minZoom:9});Pt.set("name","cai"),Pt.set("featureHtml",(function(t,a){const n=ot(t,a),s=t.get("lid"),i=dt({name:t.get("name"),addr:t.get("addr"),city:t.get("city"),state:e('<span data-i18n="feature.value.addr_state"></span>').localize().html(),zip:0!==parseInt(t.get("zip"))?t.get("zip"):""}),o=t.get("eligible").toLowerCase(),r=t.get("type").toLowerCase();Z(t.getProperties());const l=e(`<div id="${n}" class="feature-html ${`cai ${a} ${o}`}"><h4 data-i18n="layer.cai.name"></h4></div>`).append(ct(t)).append(`<address>${i}</address>`).append(`<div class="location-id"><span class="field" data-i18n="[prepend]feature.field.id">:</span> <span>${s}</span></div>`).append(`<div class="eligible"><span class="field" data-i18n="[prepend]feature.field.eligible">:</span> <span data-i18n="feature.value.${o}"></span></div>`).append(`<div class="type"><span class="field" data-i18n="[prepend]feature.field.type">:</span> <span data-i18n="feature.value.${r}"></span></div>`);return rt(t,l),l.localize()}));const Dt={VITE_APP_URL:"https://d1wntdefyoxmnb.cloudfront.net/illinois",VITE_STATE:"illinois",VITE_SUBMIT_DATE:"Jan 22 2023 00:00:00 CST",VITE_SUBMIT_URL:"https://dev.ilbroadbandmapping.com/start_from_map/",VITE_APP_TITLE:"Illinois BEAD Challenge",VITE_APP_DESC:"Illinois BEAD Challenge",VITE_APP_THEME_COLOR:"#111a52",VITE_APP_TWITTER:"@ILBroadbandLab",VITE_CHALLENGE_FILL:"rgba(0, 105, 217, .25)",VITE_CHALLENGE_STROKE:"rgb(0, 105, 217)",VITE_SELECT_FILL:"rgba(255, 240, 0, .8)",VITE_SELECT_STROKE:"rgb(0, 105, 217)",VITE_DRAW_FILL:"rgba(237, 195, 128, .15)",VITE_DRAW_STROKE:"rgba(0, 98, 204, .5)",VITE_BG_FILL:"rgba(17, 26, 82, 0.1)",VITE_BG_STROKE:"rgba(17, 26, 82, .25)",VITE_BOUNDARY_STROKE:"rgb(17, 26, 82)",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10333725,"ymin":4292000,"xmax":-9570950,"ymax":5339715,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_GEOCODE_URL:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",VITE_ANALYTICS:"\x3c!-- analytics code in prd only --\x3e",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Ot=Dt.VITE_ARC_TOKEN,Bt=Dt.VITE_GEOCODE_URL,Ft=encodeURIComponent(Dt.VITE_SEARCH_EXTENT),kt=`findAddressCandidates?f=pjson&outSR=3857&token=${Ot}&searchExtent=${Ft}&singleLine=`,Gt=`suggest?f=json&token=${Ot}&searchExtent=${Ft}&text=`;function Ut(t){const a=e("#search").val();t.preventDefault(),""!==a.trim()&&(e("#locate button").addClass("loading"),e("#possible").slideUp(),function(e){const t=`${Bt}${kt}${encodeURIComponent(e)}`;return new Promise(((e,a)=>{fetch(t).then((t=>{t.json().then((t=>{t.error&&a(t.error),e(t.candidates)})).catch((e=>{console.error(e),a(e)}))})).catch((e=>{console.error(e),a(e)}))}))}(a).then((e=>{e.length>0&&(1===e.length||100===e[0].score?zt(e[0]):function(e){Nt(e,"address")}(e))})).catch((e=>console.error(e))))}function $t(t){if("Enter"!==t.code){const t=e("#search").val();t.length>3&&function(e){const t=`${Bt}${Gt}${encodeURIComponent(e)}`;return new Promise(((e,a)=>{fetch(t).then((t=>{t.json().then((t=>{t.error&&a(t.error),e(t.suggestions)})).catch((e=>{console.error(e),a(e)}))})).catch((e=>{console.error(e),a(e)}))}))}(t).then((e=>{!function(e){Nt(e,"text")}(e)})).catch((e=>console.error(e)))}}function Nt(t,a){const n={},s=e("#possible").empty();t.forEach((t=>{const i=t[a];if(!n[i]){const t=e(`<li class="list-group-item">${i}</li>`);n[i]=!0,t.on("click",(a=>{s.slideUp(),e("#search").val(t.html()),e("#locate").trigger("submit")})),s.append(t)}})),s.slideDown()}function zt(t){const a=D(),n=[t.location.x,t.location.y];if(s=a.getCenter(),i=n,s[0]!==i[0]||s[1]!==i[1]){const s=t.address,i=K();i.setPosition(n),a.animate({zoom:16,center:n},(()=>{e("#locate button").removeClass("loading"),e(i.getElement()).attr("title",s).attr("aria-label",s)})),function(e){localStorage.setItem("location",JSON.stringify(e))}(t)}else e("#locate button").removeClass("loading");var s,i}function Mt(){return K().getPosition()}function Kt(t,a){const n=e('<form id="locate"></form>'),s=e('<div class="form-group search-map"><ul id="possible" class="list-group"></ul><button type="submit" class="btn btn-primary" data-i18n="[aria-label]search"><div></div></button></div>'),i=e('<input type="text" class="form-control" id="search" data-i18n="[placeholder]form.search.placeholder;[aria-label]form.search.placeholder">');n.append(s.prepend(i)).localize(),e("#tab-col").prepend(n),i.on("click",(()=>i.select())),e(document).on("click",(()=>e("#possible").slideUp())),e("body").append('<div id="location" class="location"></div>');const o=new d({element:e("#location").get(0),offset:[-16,-28],className:"overlay-0 ol ol-overlay-container ol-selectable"});if(t.addOverlay(o),t.set("locationOverlay",o),e(n).on("submit",Ut),e("#search").on("keyup",$t),a){const t=function(){const e=localStorage.getItem("location");if(null!==e)return JSON.parse(e)}();void 0!==t&&(e("#locate button").addClass("loading"),zt(t),e("#search").val(t.address))}}const qt=e('<div id="wait"></div>');e("body").append(qt);const Yt=new d({element:qt.get(0),offset:[-20,-20],className:"overlay-3 ol ol-overlay-container ol-selectable"});class jt extends E{constructor(t){const a=e('<button data-i18n="btn.add_challenge.name"></button>'),n=e('<div class="add-selection ol-unselectable ol-control"></div>').append(a).localize(),s=t.view,i=t.selectLayer,o=t.select;super({element:n.get(0)}),this.selectSource=t.selectSource,this.challengeSource=t.challengeSource,a.on("click",this.addChallenges.bind(this)),this.selectSource.on("change",this.hideShow.bind(this)),s.on("change:resolution",(()=>{const e=s.getZoom()<=i.getMinZoom();o.setDisable(e),o.getActive()&&o.setActive(!e),a.prop("disabled",e)}))}hideShow(){const t=this.selectSource.getFeatures();e(".add-selection")[t.length>0?"fadeIn":"fadeOut"]()}addChallenges(){const e=this.getMap().getView();Yt.setPosition(e.getCenter()),setTimeout((()=>{this.selectSource.getFeatures().forEach((e=>{Je(e)})),this.selectSource.clear(),Yt.setPosition(void 0)}),100)}}function Wt(e){const t=P();if(function(e){return e.getControls().getArray().filter((e=>e.get("select")))[0].getActive()}(t)){const a=U(),n=N();let s=!0;t.forEachFeatureAtPixel(e.pixel,(e=>{s=!1;const t=e.getId();if(void 0!==t){const n=a.getFeatureById(t);null===n?a.addFeature(e):a.removeFeature(n)}}),{layerFilter:z}),s&&(a.clear(),n.clear())}}function Jt(e){const t=e.feature.getGeometry(),a=Zt();Yt.setPosition(D().getCenter()),setTimeout((()=>{!function(e,t){const a=U();t.forEach((t=>{const n=t.getGeometry().getCoordinates();e.intersectsCoordinate(n)&&a.addFeature(t)})),Yt.setPosition(void 0)}(t,a)}),100)}function Ht(e,t){const a=t.getGeometry().getCoordinates(),n=new I([e,a]).getLength();t.set("distance",n)}function Zt(){const e=P(),t=e.getView(),a=O(),n=B(),s=a.getSource(),i=n.getSource(),o=t.calculateExtent(e.getSize()),r=a.getVisible()?s.getFeaturesInExtent(o):[],l=n.getVisible()?i.getFeaturesInExtent(o):[];return function(e){const t=Mt();if(t){if(1===e.length)return Ht(t,e[0]),e;e.sort(((e,a)=>{Ht(t,e),Ht(t,a);const n=e.get("distance"),s=a.get("distance");return n<s?-1:n>s?1:0}))}return e}(r.concat(l))}function Xt(e,t){for(const a in t){const n=t[a].filter;if(e.get(n[1][1])==n[2])return t[a]}}function Qt(t){const a=P(),n=O(),s=B(),i=e('<div class="pulse"></div>');e("body").append(i);const o=new d({element:i.get(0),offset:[-30,-30]});a.addOverlay(o);const r=t.getId(),l=e(o.getElement());let c;c=r.indexOf("cai")>-1?n.getStyle():s.getStyle();const p=function(e,t,a){const n=Xt(t,a)["icon-scale"],s=n[3],i=n[5],o=n[1][1],r=Math.floor(e.getZoom()),l=[];for(let d=s;d<=i;d++)l.push(d);let c=l.indexOf(r)+1;return 0===c&&(c=l.length),Math.pow(o,c)/Math.pow(o,l.length)}(D(),t,c),u=Math.floor(48*p),_=function(e,t){return Xt(e,t)["icon-src"]}(t,c);l.css({"background-image":`url("${_}")`,"background-size":`${u}px`}).fadeIn(),o.setPosition(t.getGeometry().getCoordinates()),setTimeout((()=>{l.fadeOut((()=>{a.removeOverlay(o),o.dispose(),l.remove()}))}),3e3)}const ea={chunks:[]};const ta={};function aa(e){const t=ta.tabs.challenge,a=e.children().length>0;t.find(".message")[a?"hide":"show"]()}function na(t,a){t.getGeometry().getCoordinates();const n=e("#map-tab");a.on("click",(()=>{n.is(":visible")&&n.trigger("click"),Qt(t)}))}function sa(t,a,n){const s=e('<li class="list-group-item"></li>').addClass(a.getId().indexOf("cai")>-1?"cai":"bsl").addClass(Y(a)?"challenge":"").append(n(a,"location")).attr("data-fid",a.getId());t.append(s),na(a,s.find("h4"))}function ia(e){const t=O().get("featureHtml"),a=B().get("featureHtml");(function(){const e=ea.chunks[ea.nextChunck];return void 0!==e?(ea.nextChunck=ea.nextChunck+1,e):[]})().forEach((n=>{n.getId().indexOf("cai")>-1?sa(e,n,t):sa(e,n,a)}))}function oa(t){const a=t.feature;e(`#${ot(a,"challenge")}`).parent().remove(),aa(e("#challenge-list"))}function ra(t){const a=B(),n=O(),s=t.feature||t,i=(-1===s.getId().indexOf("bsl")?n:a).get("featureHtml"),o=e("#challenge-list"),r=e('<li class="list-group-item"></li>').append(i(s,"challenge")).attr("data-fid",s.getId());o.append(r),aa(o),na(s,r.find("h4"))}function la(){const t=Zt(),a=e("#location-list").empty();!function(e,t){const a=Math.min(t,Math.ceil(e.length/2));ea.chunks=Array.from({length:Math.ceil(e.length/a)},((t,n)=>e.slice(n*a,n*a+a))),ea.nextChunck=0}(t,20),e("#tab-content").scrollTop(0),ia(a),function(e){const t=ta.tabs.location;t.find("form");const a=e.children().length>0;t.find(".message")[a?"hide":"show"]()}(a,ta.tabs.location),e("#locate button").removeClass("loading")}let ca=0;class da extends d{constructor(t){const a=e(t.map.getTargetElement()).find(".feature-tip").get(0);super({id:(ca+=1,`tip-${ca}`),element:a||e(da.HTML).get(0),offset:[5,5],className:"overlay-1 ol ol-overlay-container ol-selectable"}),this.setMap(t.map),this.map=this.getMap(),this.tip=e(this.getElement()),this.addTips(t.tips),this.map.on("pointermove",this.label.bind(this))}hide(){this.tip.fadeOut((()=>{this.setPosition(void 0)}))}addTips(e){e.forEach((e=>{e.layer.tip=e.label}))}out(t){e.contains(this.map.getTargetElement(),t.target)||this.hide()}label(e){const t=this.map.forEachFeatureAtPixel(e.pixel,((e,t)=>t&&t.getVisible()&&t.tip?t.tip(e):null));t?(this.tip.html(t.html),this.tip.addClass(t.css),this.setPosition(e.coordinate),this.tip.localize().show(),this.position()):this.hide()}position(){const e=this.map.getSize(),t=this.tip.width(),a=this.tip.height(),n=this.map.getPixelFromCoordinate(this.getPosition()),s=n[1]+a>e[1]?"bottom":"top",i=n[0]+t>e[0]?"right":"left";this.setPositioning(`${s}-${i}`)}}function pa(t){const a=t.get("name"),n="Y"===t.get("eligible")?"feature.value.eligible":"feature.value.not_eligible";const s=e("<div></div>").append(`<span class="name">${a}</span>`).append(` (<span class="tip-prop" data-i18n="${n}"></span>)`);return{html:e('<div><div class="title" data-i18n="layer.cai.name"></div></div>').append(s)}}function ua(t){var a;const n=t.get("addr"),s=function(e){return 1===e?"feature.value.enforce":"feature.value.not_enforce"}(t.get("enforce")),i=t.get("fed_fund"),o=t.get("state_fund"),r=[];i&&r.push(i),o&&r.push(e('<div data-i18n="feature.value.state_fund_abbr"></div>').localize().html());const l=null==(a=t.get("service"))?void 0:a.toLowerCase(),c=t.get("mdu"),d=e("<div></div>").append(`<div class="address">${n}</div>`).append(`(<span class="enforce" data-i18n="${s}" />`).append(r.length>0?`, <span class="fund">${r.join(", ")}</span>`:"").append(`, <span data-i18n="feature.value.${l}"></span>`).append(c>0?`, <span class="mdu">MDU ${c}</span>)`:")");return{html:e('<div><div class="title" data-i18n="layer.bsl.name"></div></div>').append(d)}}function _a(t){const a=t.get("tr"),n=t.get("bg");return{html:e(`<div>\n    <div class="title" data-i18n="[prepend]feature.field.tr"> ${a}</div>\n    <div class="title" data-i18n="[prepend]feature.field.bg"> ${n}</div>\n  </div>`)}}da.TipDef,da.LabelFunction,da.Label,da.Options,da.HTML='<div class="feature-tip" role="tooltip"></div>';const ga={VITE_APP_URL:"https://d1wntdefyoxmnb.cloudfront.net/illinois",VITE_STATE:"illinois",VITE_SUBMIT_DATE:"Jan 22 2023 00:00:00 CST",VITE_SUBMIT_URL:"https://dev.ilbroadbandmapping.com/start_from_map/",VITE_APP_TITLE:"Illinois BEAD Challenge",VITE_APP_DESC:"Illinois BEAD Challenge",VITE_APP_THEME_COLOR:"#111a52",VITE_APP_TWITTER:"@ILBroadbandLab",VITE_CHALLENGE_FILL:"rgba(0, 105, 217, .25)",VITE_CHALLENGE_STROKE:"rgb(0, 105, 217)",VITE_SELECT_FILL:"rgba(255, 240, 0, .8)",VITE_SELECT_STROKE:"rgb(0, 105, 217)",VITE_DRAW_FILL:"rgba(237, 195, 128, .15)",VITE_DRAW_STROKE:"rgba(0, 98, 204, .5)",VITE_BG_FILL:"rgba(17, 26, 82, 0.1)",VITE_BG_STROKE:"rgba(17, 26, 82, .25)",VITE_BOUNDARY_STROKE:"rgb(17, 26, 82)",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10333725,"ymin":4292000,"xmax":-9570950,"ymax":5339715,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_GEOCODE_URL:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",VITE_ANALYTICS:"\x3c!-- analytics code in prd only --\x3e",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},fa=`${ga.VITE_BASEMAP_URL}?token=${ga.VITE_ARC_TOKEN}`;function ma(t,a){return new Promise(((n,s)=>{y((()=>import("./index-3-bM2P48.js")),__vite__mapDeps([0,1]),import.meta.url).then((i=>new Promise((()=>{i.apply(t,`${fa}&language=${C()}`).then((t=>{const s=function(e){const t=new c;e?se(t):re();const a=new Le({source:t,style:xe,minZoom:9});return a.set("name","challenge"),t.on("addfeature",lt),t.on("removefeature",lt),a}(a),i=It.getSource(),o=Pt.getSource();It.on("change:visible",la),Pt.on("change:visible",la),i.on("loadcomplete",la),o.on("loadcomplete",la),t.addLayer(Tt),t.addLayer(Ct),t.addLayer(Ae),t.addLayer(we),t.addLayer(s),t.addLayer(It),t.addLayer(Pt),t.set("boundary",Ct),t.set("bg",Ct),t.set("select",Ae),t.set("draw",we),t.set("cai",Pt),t.set("bsl",It),t.set("challenge",s),function(t){const a=t.getView(),n=G(),s=U(),i=N(),o=k();M();const r=new m({source:i,type:"Polygon",freehand:!0,style:Re}),l=new h({className:"select",interaction:r,active:!1,onToggle:a=>{$().setVisible(a),M().setActive(!a),e(t.getTargetElement())[a?"addClass":"removeClass"]("draw-select")}});e(l.getButtonElement()).addClass("select-button"),l.set("select",!0),t.addOverlay(Yt),t.addControl(l),t.addInteraction(r),t.addControl(new jt({select:l,view:a,selectLayer:n,selectSource:s,challengeSource:o})),r.on("drawend",Jt),t.on("singleclick",Wt)}(t),function(e){new da({map:e,tips:[{layer:O(),label:pa},{layer:B(),label:ua},{layer:F(),label:_a}]})}(t),function(){const e=k(),t=U();function a(e){Qt(e.feature)}e.on("addfeature",a),t.on("addfeature",a)}(),function(t){e("body").append(Xe);const a=e("#popup"),n=new d({element:a.get(0),autoPan:{animation:{duration:250}},className:"overlay-2 ol ol-overlay-container ol-selectable"});n.active=!0,n.setActive=nt,t.addOverlay(n),t.set("popupOverlay",n),t.on("singleclick",at),e("#popup-pager .previous, #popup-pager .next").on("click",et)}(t),n(t)})).catch((e=>{console.error(e),s(e)}))})))).catch((e=>{console.error(e),s(e)}))}))}function ha(t){const a=e(t.target),n=a.data("layer"),s=a.is(":checked"),i=n.get("name");n.setVisible(s),e(`#location-list li.${i}`)[s?"show":"hide"]()}function Ea(t,a){const n=e("#legend"),s=t.getView();n.find("#cai-check").data("layer",O()).on("change",ha),n.find("#bsl-check").data("layer",B()).on("change",ha),n.find("#bg-check").data("layer",F()).on("change",ha),s.on("change:resolution",(()=>{const t=s.getZoom();n.find("input").each(((a,n)=>{const s=e(n).data("layer");if(e(n).prop("disabled",t<=s.getMinZoom()),"checkbox"===e(n).attr("type")){const t=n.id;"enforce-check"!==t&&"mdu-check"!==t&&e(n).prop("checked",s.getVisible())}}))}));var i,o;new E({target:a.get(0),element:n.get(0)}).setMap(t),i=n.find("input.enforce"),o=n.find("input.mdu"),i.add(o).data("layer",B()).on("change",ht),i.data("where","enforceable_commitment = 1"),o.data("where","mdu > 1")}e("body").append('<div id="legend" class="legend">\n  <div class="legend-content">\n    <div class="layer">\n      <input id="cai-check" type="checkbox"\n        class="form-check-input layer-check"\n        checked disabled>\n      <h3>\n        <label for="cai-check" data-i18n="layer.cai.name"></label>\n      </h3>\n      <ul>\n        <li>\n          <img src="img/y-eligible.svg" data-i18n="[alt]feature.value.eligible">\n          <span data-i18n="feature.value.eligible"></span>\n        </li>\n        <li>\n          <img src="img/n-eligible.svg" data-i18n="[alt]feature.value.not_eligible">\n          <span data-i18n="feature.value.not_eligible"></span>\n        </li>\n      </ul>\n    </div>\n    <div class="layer">\n      <input id="bsl-check" type="checkbox"\n        class="form-check-input layer-check"\n        checked disabled>\n      <h3><label for="bsl-check" data-i18n="layer.bsl.name"></h3>\n      <div class="filter">\n        <h4 data-i18n="feature.field.service"></h4>\n        <ul>\n          <li>\n            <img src="img/served.svg" data-i18n="[alt]legend.served">\n            <span data-i18n="legend.served"></span>\n          </li>\n          <li>\n            <img src="img/underserved.svg" data-i18n="[alt]legend.underserved">\n            <span data-i18n="legend.underserved"></span>\n          </li>\n          <li>\n            <img src="img/unserved.svg" data-i18n="[alt]legend.unserved">\n            <span data-i18n="legend.unserved"></span>\n          </li>\n        </ul>\n      </div>\n      <div class="filter">\n        <ul>\n          <li>\n            <input id="enforce-check" type="checkbox"\n              class="form-check-input filter enforce"\n              disabled>\n            <img src="img/filter.svg" data-i18n="[alt]legend.filter">\n            <h6><label for="enforce-check" data-i18n="feature.field.enforce"></label></h6>\n          </li>\n          <li>\n            <input id="mdu-check" type="checkbox"\n              class="form-check-input filter mdu"\n              disabled>\n            <img src="img/filter.svg" data-i18n="[alt]legend.filter">\n            <h6><label for="mdu-check" data-i18n="feature.field.mdu"></label></h6>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class="layer" aria-hidden="true">\n      <input id="bg-check" type="checkbox"\n        class="form-check-input layer-check"\n        disabled>\n      <h3><label for="bg-check" data-i18n="layer.bg.name"></label></h3>\n      <ul>\n        <li>\n          <img src="img/bg.svg" data-i18n="[alt]layer.bg.name">\n          <span data-i18n="layer.bg.name"></span>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>');var Ia={VITE_APP_URL:"https://d1wntdefyoxmnb.cloudfront.net/illinois",VITE_STATE:"illinois",VITE_SUBMIT_DATE:"Jan 22 2023 00:00:00 CST",VITE_SUBMIT_URL:"https://dev.ilbroadbandmapping.com/start_from_map/",VITE_APP_TITLE:"Illinois BEAD Challenge",VITE_APP_DESC:"Illinois BEAD Challenge",VITE_APP_THEME_COLOR:"#111a52",VITE_APP_TWITTER:"@ILBroadbandLab",VITE_CHALLENGE_FILL:"rgba(0, 105, 217, .25)",VITE_CHALLENGE_STROKE:"rgb(0, 105, 217)",VITE_SELECT_FILL:"rgba(255, 240, 0, .8)",VITE_SELECT_STROKE:"rgb(0, 105, 217)",VITE_DRAW_FILL:"rgba(237, 195, 128, .15)",VITE_DRAW_STROKE:"rgba(0, 98, 204, .5)",VITE_BG_FILL:"rgba(17, 26, 82, 0.1)",VITE_BG_STROKE:"rgba(17, 26, 82, .25)",VITE_BOUNDARY_STROKE:"rgb(17, 26, 82)",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10333725,"ymin":4292000,"xmax":-9570950,"ymax":5339715,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_GEOCODE_URL:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",VITE_ANALYTICS:"\x3c!-- analytics code in prd only --\x3e",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const va=void 0!==te();function ba(t){ye().then((a=>{const n=new v({target:a.map});e(".ol-attribution button").addClass("attribution"),function(e){const t=e.getControls().getArray().filter((e=>e instanceof b))[0];e.removeControl(t)}(n),x("map",n),ma(n,t).then((n=>{if(Kt(n,t),function(t,a){const n=t.location,s=t.challenge,i=e('<ul id="location-list" class="list-group"></ul>'),o=e('<ul id="challenge-list" class="list-group"></ul>'),r=k();ta.tabs=t,ta.lists={location:i,challenge:o},Ze(s,a),n.append(i),s.append(o),r.on("addfeature",ra),r.on("removefeature",oa),r.getFeatures().forEach((e=>{ra(e)}));const l=e("#tab-content");l.on("scroll",(t=>{const a=l.scrollTop();if(n.is(":visible")){const t=200,n=i.height(),s=a+l.height();e("#location-tab").data("scroll-top",a),s+t>n&&ia(i)}else s.is(":visible")&&e("#challenge-tab").data("scroll-top",a)})),e("#challenge-tab, #location-tab").on("click",(t=>{l.scrollTop(e(t.target).data("scroll-top")||0)}))}(a.tabs,t),Ea(n,a.tabs.layers),!t||void 0===Mt()){const e=n.getView(),t=Ia,a=JSON.parse(t.VITE_CENTER),s=1*t.VITE_ZOOM;e.setZoom(s),e.setCenter(a)}n.once("postrender",(()=>{e("body").removeClass("loading"),e(window).trigger("resize"),e("#search").trigger("focus")})),function(){const t=e('<div class="dropdown">\n  <button id="translate" class="btn btn-primary dropdown-toggle" type="button" data-i18n="translate" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>\n  <div class="dropdown-menu" aria-labelledby="translate">\n  </div>\n</div>'),a=JSON.parse('["en", "es"]');a.forEach((e=>{t.find(".dropdown-menu").append(`<a data-i18n="translate.${e}" class="dropdown-item" href="./?locale=${e}" rel="noopener"></a>`)})),e(".banner").append(t.localize()),x("translate",t);let n=0,s=0;const i=e(".banner .dropdown .btn-primary"),o=setInterval((()=>{n=n<a.length-1?n+1:0,s+=1,s===10*a.length?(i.attr("data-i18n","translate").localize(),clearInterval(o)):i.attr("data-i18n",`translate.${a[n]}`).localize()}),1e3)}(),va||function(){const t=e("body");e("body").addClass("intro"),he.className="intro",me.attr("data-i18n","[html]dialog.intro").localize(),ce.show().find("h2").attr("data-i18n","dialog.intro.title").localize(),e("#show-guide").on("click",(()=>t.removeClass("intro"))).on("click",Ie),le.show()}()}))}))}(function(){const n=function(){const e=document.location.search,t={};e&&e.substring(1).split("&").forEach((e=>{const a=e.split("=");t[a[0]]=a[1]}));let a=t.locale;return void 0!==a?a.split("-")[0]:(a=navigator.language.split("-")[0],a===R?a:void(document.location=`./?locale=${a}`))}();return new Promise(((s,i)=>{L(Object.assign({"./illinois/en.js":()=>y((()=>import("./en-hJczL5vL.js")),__vite__mapDeps([]),import.meta.url)}),`./${S}/en.js`).then((i=>{const o={en:i};(function(e){return new Promise(((t,a)=>{e!==R?L(Object.assign({"./illinois/en.js":()=>y((()=>import("./en-hJczL5vL.js")),__vite__mapDeps([]),import.meta.url),"./illinois/es.js":()=>y((()=>import("./es-I3U9pf8k.js")),__vite__mapDeps([]),import.meta.url),"./illinois/he.js":()=>y((()=>import("./he-P4YEr8W6.js")),__vite__mapDeps([]),import.meta.url)}),`./${S}/${e}.js`).then((a=>{void 0!==a&&t({locale:e,translation:a})})).catch((a=>{console.warn(`No translations for locale="${e}"`),t({locale:R})})):t({locale:R})}))})(n).then((n=>{const i=n.locale;i!==R&&(o[i]=n.translation,e("#map-container").attr("dir","ltr"),e("html").attr("lang",i).attr("dir",function(e){return t.dir(e)}(i))),t.init({defaultLocale:R,fallbackLng:R,defaultNS:"translation",resources:o,lng:i},((n,i)=>{a.init(t,e,{useOptionsAttr:!0}),e("[data-i18n]").localize(),s(o)}))}))})).catch((e=>{console.error({error:e,message:`Failed to load default translations for ${S}`}),i()}))})).catch((e=>console.error({error:e,message:"Failed to initialize i18n"})))})().then((()=>{var e;va?"true"===localStorage.getItem("always")?ba(!0):(e=ba,me.attr("data-i18n","dialog.restore").localize(),de.show(),pe.show().one("click",(()=>Ee(e,!0))),ue.show().one("click",(()=>Ee(e,!1))),fe.show(),le.show()):ba(!1)}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-3-bM2P48.js","./vendor-LuzlqZi2.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}