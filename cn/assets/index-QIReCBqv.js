import{i as e,j as t,O as a,L as n,W as s,V as i,G as o,P as r,a as l,F as c,d,b as u,T as p,t as f,c as g,D as m,o as h,C as v,e as _,M as b,R as y}from"./vendor-cBnjCObF.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const I={},E=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link");n=Promise.all(t.map((t=>{if(t=function(e,t){return new URL(e,t).href}(t,a),t in I)return;I[t]=!0;const n=t.endsWith(".css"),s=n?'[rel="stylesheet"]':"";if(!!a)for(let a=e.length-1;a>=0;a--){const s=e[a];if(s.href===t&&(!n||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${t}"]${s}`))return;const i=document.createElement("link");return i.rel=n?"stylesheet":"modulepreload",n||(i.as="script",i.crossOrigin=""),i.href=t,document.head.appendChild(i),n?new Promise(((e,a)=>{i.addEventListener("load",e),i.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${t}`))))})):void 0})))}return n.then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},w=(e,t)=>{const a=e[t];return a?"function"==typeof a?a():Promise.resolve(a):new Promise(((e,a)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+t)))}))},S={translation:{"app.title":"Illinois BEAD Challenge","app.desc":"Illinois BEAD Challenge","banner.state_seal.alt":"Illinois Stae Seal","banner.bb_lab.alt":"Illinois Broadband Lab Logo","tab.map.name":"Map","tab.location.msg":"<p>Search for a location to display a list of Community Anchor Institutions and Broadband Service Locations.</p>","tab.locations.long_msg":'<p>The Illinois BEAD Challenge Map contains all up-to-date Broadband Serviceable Locations (BSLs) and Community Anchor Institutions (CAIs) in Illinois. This map can be used as a resource for participating in Illinois\' challenge process. Any location on this map can be challenged.</p><h2>How it works:</h2><ul><li>Search for an address or locate an area on the map using the zoom function.</li><li>Click on a location to view the availability of broadband, and whether this location is currently eligible for funding.</li><li>If you would like to challenge the information you see, select the location(s) and click "Add Challenge." Added locations will show up in the Challenges tab.</li><li>You can select locations on the map by using the Select tool <img src="img/select.svg" alt="Select tool" style="width:20px;height:20px">. Locations can be added one at a time by clicking on them, or you can lasso a group of locations by drawing a loop around multiple locations.</li><li>Once you have finished your selection process, click the "Submit Challenges" button and you will be forwarded to the Challenge Portal to upload evidence and complete the challenge process.</li></ul><p>There is no limit or minimum to the number of locations you can select to challenge, or number of times you can submit challenges.</p><p>If you have a file of pre-selected challenges with Location IDs, you can skip these steps and upload the file directly to the <a href="javascript:alert(\'no url\')">Challenge Portal</a>.</p><p><a id="show-guide" noopener href="#">Click here</a> for a more detailed user guide.</p>',"tab.challenge.msg":'<p class="message">Add a Challenge by clicking the challenge button on a Community Anchor Institution or Broadband Service Location in the Service Locations list, or by selecting locations on the map.</p>',"tab.locations.name":"Service Locations","tab.challenges.name":"Challenges","tab.challenges.new":"New Challenge","dialog.restore":"Would you like to restore the challenges from your last session?","dialog.always":"Always restore challenges","dialog.delete":"Are you sure you want to delete all challenges?","dialog.premature":"Challeng submission begins on","guide.title":"User guide","guide.url":"./guide.en.html","map.current_location":"Current Location","legend.name":"Layers","legend.served":"Served (Not eligible)","legend.underserved":"Underserved (Eligible)","legend.unserved":"Unserved (Eligible)","legend.filter":"Filter","form.search.placeholder":"Search for an address or ZIP Code...","form.challenges.submit":"Submit Challenges","form.challenges.table":"View challenges in table","form.challenges.save":"Save challenges as CSV","form.challenges.open":"Load challenges from CSV","form.challenges.delete":"Delete all challenges","layer.bsl.name":"Broadband Service Location","layer.cai.name":"Community Anchor Institution","layer.bg.name":"Census Block Group","feature.field.id":"Location ID","feature.field.service":"Serviceability","feature.field.enforce":"Enforceable Commitment","feature.field.eligible":"Eligibility","feature.field.mdu":"Multiple Dwelling Units","feature.field.speed":"Speed","feature.field.provider":"Provider","feature.field.tech":"Technology","feature.field.type":"Type","feature.field.tr":"Tract","feature.field.bg":"Block Group","feature.field.fund":"Funding","feature.value.addr_state":"IL","feature.value.eligible":"Eligible","feature.value.not_eligible":"Not Eligible","feature.value.served":"Served","feature.value.underserved":"Underserved","feature.value.unserved":"Unserved","feature.value.enforce":"Enforceable","feature.value.not_enforce":"Not Enforceable","feature.value.n":"No","feature.value.y":"Yes","feature.value.0":"No","feature.value.1":"Yes","feature.value.s":"School","feature.value.l":"Library","feature.value.g":"Government facility","feature.value.h":"Health facility","feature.value.f":"Public Safety","feature.value.p":"Public Housing","feature.value.c":"Community Support Organization","feature.value.distance":"miles from your location","feature.value.rdof":"Rural Digital Opportunity Fund","feature.value.rep":"Rural Econnectivity Program","feature.value.tbcp":"Tribal Broadband Connectivity Program","feature.value.tlp":"Telephone Loan Program (TLP)","feature.value.caf_ii":"Connect America Fund Phase II","feature.value.ccgp":"Community Connect Grant Program","feature.value.bip":"Broadband Infrastructure Program","feature.value.bprt":"Bringing Puerto Rico Together","feature.value.cusvi":"Connect U.S. Virgin Islands","feature.value.state_fund":"Connect Ilinois","feature.value.state_fund_abbr":"Conn. IL","feature.value.unkown":"Unkown","feature.value.unavailable":"Unavailable","feature.value.submitted":"Already submitted","btn.add_challenge.name":"Add to Challenge","btn.how_it_works.name":"How it works","btn.remove_challenge.name":"Remove from Challenge","btn.yes.name":"Yes","btn.no.name":"No","btn.ok.name":"OK","btn.close.name":"Close","btn.back.name":"Back to the map","btn.select.name":"Select locations to challenge","btn.providers.name":"Providers","table.column.name":"Name","table.column.addr":"Address","table.column.city":"City","table.column.state":"State","table.column.zip":"ZIP Code","table.column.county":"County","table.column.lid":"Location ID","table.column.type":"Type","table.column.eligible":"Eligiblity","table.column.max_up":"Max Upload Speed","table.column.max_down":"Max Download Speed","table.column.mdu":"Muti Dwelling Units","table.column.service":"Servicibility","table.column.enforce":"Enforceable Commitment","table.column.blank":"",translate:"Translate","translate.en":"English","translate.es":"Español","translate.pl":"Polski","translate.he":"עִברִית","translate.yi":"יידיש"}},C=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"})),T="en";const x={challenge:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#111a52" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M6.043 19.496l-1.482 1.505c-2.791-2.201-4.561-5.413-4.561-9.001s1.77-6.8 4.561-9l1.482 1.504c-2.326 1.835-3.804 4.512-3.804 7.496s1.478 5.661 3.804 7.496zm.675-7.496c0-1.791.887-3.397 2.282-4.498l-1.481-1.502c-1.86 1.467-3.04 3.608-3.04 6s1.18 4.533 3.04 6l1.481-1.502c-1.396-1.101-2.282-2.707-2.282-4.498zm15.043 0c0-2.984-1.478-5.661-3.804-7.496l1.482-1.504c2.791 2.2 4.561 5.412 4.561 9s-1.77 6.8-4.561 9.001l-1.482-1.505c2.326-1.835 3.804-4.512 3.804-7.496zm-6.761 4.498l1.481 1.502c1.86-1.467 3.04-3.608 3.04-6s-1.18-4.533-3.04-6l-1.481 1.502c1.396 1.101 2.282 2.707 2.282 4.498s-.886 3.397-2.282 4.498zm-3-7.498c-1.656 0-3 1.343-3 3s1.344 3 3 3 3-1.343 3-3-1.344-3-3-3z"/></svg>',served:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#CC0202" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M0 7.244c3.071-3.24 7.314-5.244 12-5.244 4.687 0 8.929 2.004 12 5.244l-2.039 2.15c-2.549-2.688-6.071-4.352-9.961-4.352s-7.412 1.664-9.961 4.352l-2.039-2.15zm5.72 6.034c1.607-1.696 3.827-2.744 6.28-2.744s4.673 1.048 6.28 2.744l2.093-2.208c-2.143-2.261-5.103-3.659-8.373-3.659s-6.23 1.398-8.373 3.659l2.093 2.208zm3.658 3.859c.671-.708 1.598-1.145 2.622-1.145 1.023 0 1.951.437 2.622 1.145l2.057-2.17c-1.197-1.263-2.851-2.044-4.678-2.044s-3.481.782-4.678 2.044l2.055 2.17zm2.622 1.017c-1.062 0-1.923.861-1.923 1.923s.861 1.923 1.923 1.923 1.923-.861 1.923-1.923-.861-1.923-1.923-1.923z"/></svg>',underserved:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#F7B500" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M0 7.244c3.071-3.24 7.314-5.244 12-5.244 4.687 0 8.929 2.004 12 5.244l-2.039 2.15c-2.549-2.688-6.071-4.352-9.961-4.352s-7.412 1.664-9.961 4.352l-2.039-2.15zm5.72 6.034c1.607-1.696 3.827-2.744 6.28-2.744s4.673 1.048 6.28 2.744l2.093-2.208c-2.143-2.261-5.103-3.659-8.373-3.659s-6.23 1.398-8.373 3.659l2.093 2.208zm3.658 3.859c.671-.708 1.598-1.145 2.622-1.145 1.023 0 1.951.437 2.622 1.145l2.057-2.17c-1.197-1.263-2.851-2.044-4.678-2.044s-3.481.782-4.678 2.044l2.055 2.17zm2.622 1.017c-1.062 0-1.923.861-1.923 1.923s.861 1.923 1.923 1.923 1.923-.861 1.923-1.923-.861-1.923-1.923-1.923z"/></svg>',unserved:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#008450" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M0 7.244c3.071-3.24 7.314-5.244 12-5.244 4.687 0 8.929 2.004 12 5.244l-2.039 2.15c-2.549-2.688-6.071-4.352-9.961-4.352s-7.412 1.664-9.961 4.352l-2.039-2.15zm5.72 6.034c1.607-1.696 3.827-2.744 6.28-2.744s4.673 1.048 6.28 2.744l2.093-2.208c-2.143-2.261-5.103-3.659-8.373-3.659s-6.23 1.398-8.373 3.659l2.093 2.208zm3.658 3.859c.671-.708 1.598-1.145 2.622-1.145 1.023 0 1.951.437 2.622 1.145l2.057-2.17c-1.197-1.263-2.851-2.044-4.678-2.044s-3.481.782-4.678 2.044l2.055 2.17zm2.622 1.017c-1.062 0-1.923.861-1.923 1.923s.861 1.923 1.923 1.923 1.923-.861 1.923-1.923-.861-1.923-1.923-1.923z"/></svg>',"y-eligible":'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><rect fill="#000" x="3" y="3" width="42" height="42"/><rect fill="#fff" x="6" y="6" width="36" height="36"/><rect fill="#008450" x="9" y="9" width="30" height="30"/><path fill="#fff" transform="translate(12, 12)" d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>',"n-eligible":'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><rect fill="#000" x="3" y="3" width="42" height="42"/><rect fill="#fff" x="6" y="6" width="36" height="36"/><rect fill="#CC0202" x="9" y="9" width="30" height="30"/><path fill="#fff" transform="translate(13.2, 13.2) scale(0.9 0.9)" d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"/></svg>',trash:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path fill="#111a52" transform="translate(6, 6) scale(1.5)" d="m20.015 6.506h-16v14.423c0 .591.448 1.071 1 1.071h14c.552 0 1-.48 1-1.071 0-3.905 0-14.423 0-14.423zm-5.75 2.494c.414 0 .75.336.75.75v8.5c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-8.5c0-.414.336-.75.75-.75zm-4.5 0c.414 0 .75.336.75.75v8.5c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-8.5c0-.414.336-.75.75-.75zm-.75-5v-1c0-.535.474-1 1-1h4c.526 0 1 .465 1 1v1h5.254c.412 0 .746.335.746.747s-.334.747-.746.747h-16.507c-.413 0-.747-.335-.747-.747s.334-.747.747-.747zm4.5 0v-.5h-3v.5z" fill-rule="nonzero"/></svg>'},R={},L={};function A(e,t,a){!function(e,t,a){if(void 0!==L.map)throw"store must only be called once";if(void 0===e)throw"store must be called with a map parameter";if(void 0===t)throw"store must be called with a locationTab parameter";if(void 0===a)throw"store must be called with a challengeTab parameter"}(e,t,a),L.map=e,L.locationTab=t,L.challengeTab=a}function D(e){const t=R[e];return R[e]=void 0===t?0:t+1,`${e}-${R[e]}`}function k(e){return`data:image/svg+xml;utf8,${encodeURIComponent(x[e])}`}function P(){return L.map}function F(){return L.map.get("caiLayer")}function B(){return L.map.get("bslLayer")}function V(){return L.map.get("bgLayer")}function O(){return L.map.get("challengeLayer")}function U(){return L.map.get("selectLayer")}function z(){return L.map.get("drawLayer")}function G(){return L.map.get("popupOverlay")}function N(){return L.challengeTab}function M(e){return e===F()||e===B()}function q(e,t,a){a=a||"1 = 1";const n=encodeURIComponent(a),s=`{"xmin":${t[0]},"ymin":${t[1]},"xmax":${t[2]},"ymax":${t[3]},"spatialReference":{"wkid":102100,"latestWkid":3857}}`;return`${e}&esriSpatialRelIntersects&geometry=${encodeURIComponent(s)}&where=${n}`}function J(){return P().get("locationOverlay")}function Y(e,t){for(const a in t){const n=t[a].filter;if(e.get(n[1][1])==n[2])return t[a]}}function j(e){const t=e.getView(),n=F(),s=B(),i=O().getSource(),o=U().getSource();function r(i){const o=$('<div class="pulse"></div>');$("body").append(o);const r=new a({element:o.get(0),offset:[-30,-30]});e.addOverlay(r);const l=i.feature,c=l.getId(),d=$(r.getElement());let u;u=c.indexOf("cai")>-1?n.getStyle():s.getStyle();const p=function(e,t,a){const n=Y(t,a)["icon-scale"],s=n[3],i=n[5],o=n[1][1],r=Math.floor(e.getZoom()),l=[];for(let d=s;d<=i;d++)l.push(d);const c=l.indexOf(r)+1;return Math.pow(o,c)/Math.pow(o,l.length)}(t,l,u),f=Math.floor(48*p),g=function(e,t){return Y(e,t)["icon-src"]}(l,u);d.css({"background-image":`url("${g}")`,"background-size":`${f}px`}).fadeIn(),r.setPosition(l.getGeometry().getCoordinates()),setTimeout((()=>{d.fadeOut((()=>{e.removeOverlay(r),r.dispose(),d.remove()}))}),3e3)}i.on("addfeature",r),o.on("addfeature",r)}class Z extends n{constructor(e){super(e),this.style=e.style}createRenderer(){return new s(this,{style:this.style})}getStyle(){return this.style}}const K={"circle-radius":["interpolate",["exponential",2],["zoom"],4,0,17,56],"circle-fill-color":"rgba(255, 240, 0, .8)","circle-stroke-color":"rgb(0, 105, 217)","circle-stroke-width":3},X={"fill-color":"rgba(237, 195, 128, .15)","stroke-color":"rgba(0, 98, 204, .5)","stroke-width":3},W=new i({}),H=new i({}),Q=new Z({source:W,style:K,minZoom:6});Q.set("name","selectLayer");const ee=new Z({source:H,style:X,minZoom:6});ee.set("name","drawLayer");const te=[{"circle-radius":["interpolate",["exponential",2],["zoom"],4,0,17,56],"circle-fill-color":"rgba(0, 105, 217, .25)","circle-stroke-color":"rgb(0, 105, 217)","circle-stroke-width":3},{"icon-src":k("challenge"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]}],ae=[{},{prop:"name",name:"table.column.name",csv:"NAME"},{prop:"addr",name:"table.column.addr",csv:"ADDRESS"},{prop:"city",name:"table.column.city",csv:"CITY"},{prop:"state",name:"table.column.state",csv:"STATE"},{prop:"zip",name:"table.column.zip",csv:"ZIP"},{prop:"county",name:"table.column.county",csv:"COUNTY"},{prop:"lid",name:"table.column.lid",csv:"LOCATION_ID"},{prop:"type",name:"table.column.type",csv:"TYPE",decode:!0},{prop:"eligible",name:"table.column.eligible",csv:"ELIGIBILITY",decode:!0},{prop:"max_up",name:"table.column.max_up",csv:"MAX_UPLOAD_SPEED"},{prop:"max_down",name:"table.column.max_down",csv:"MAX_DOWNLOAD_SPEED"},{prop:"mdu",name:"table.column.mdu",csv:"MULTI_DWELLING_UNITS"},{prop:"service",name:"table.column.service",csv:"SERVICEABILITY",decode:!0},{prop:"enforce",name:"table.column.enforce",csv:"ENFORCEABLE_COMMITMENT",decode:!0}];function ne(e){const t=$(e.target).data("feature");xe(e),$(`#table-${t.getId()}`).remove()}const se={quotes:!1,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0,newline:"\n",skipEmptyLines:!1,columns:function(){const e=["FID_DO_NOT_EDIT","COORDINATE_DO_NOT_EDIT"];return ae.forEach((t=>{void 0!==t.csv&&e.push(t.csv)})),e}()},ie=new o({dataProjection:"EPSG:3857"});function oe(){const e=[];return O().getSource().getFeatures().forEach((t=>{const a=function(e){const t={};return ae.forEach((a=>{t[a.csv]=e[a.prop]})),t}(t.getProperties());a.FID_DO_NOT_EDIT=t.getId(),a.COORDINATE_DO_NOT_EDIT=function(e){const t=e.getGeometry();return JSON.stringify(t.getCoordinates())}(t),e.push(a)})),encodeURIComponent(r.unparse(e,se))}function re(e){const t=ie.writeFeatures(e);localStorage.setItem("challenges",t)}function le(){const e=localStorage.getItem("challenges");if(null!==e){const t=JSON.parse(e);if(t.features.length>0)return t}}function ce(e,t){if(void 0!==t){const a=ie.readFeatures(t);e.addFeatures(a)}}function de(){localStorage.removeItem("challenges"),localStorage.removeItem("location")}function ue(e){const t=r.parse(e.target.result,{...se,skipFirstNLines:1}).data,a=O().getSource();t.forEach((e=>{a.addFeature(function(e){const t={challenge:!0};ae.forEach((a=>{a.csv&&(t[a.prop]=e[a.csv])})),t.geometry=new l(JSON.parse(e.COORDINATE_DO_NOT_EDIT));const a=new c(t);return a.setId(e.FID_DO_NOT_EDIT),a}(e))}))}function pe(e){const t=e.target.files[0],a=new FileReader;a.onload=ue,a.readAsText(t)}const fe=$('<iframe data-i18n="[src]guide.url"></iframe>');$("body").append('<div class="modal fade" id="dialog" tabindex="-1" aria-hidden="true">\n  <div id="modal" class="modal-dialog">\n    <div class="modal-content">\n    <div class="modal-header">\n      <h2 data-i18n="guide.title"></h2>\n      <button type="button" class="btn-close" data-bs-dismiss="modal" data-i18n="[aria-label]btn.close.no"></button>\n    </div>\n    <div class="modal-body"></div>\n      <div class="modal-footer">\n        <div class="start">\n          <input id="always" type="checkbox" class="form-check-input always">\n          <label for="always" class="always" data-i18n="dialog.always"></label>\n        </div>\n        <div class="end">\n          <button type="button" class="btn btn-secondary no" data-bs-dismiss="modal" data-i18n="btn.no.name"></button>\n          <button type="button" class="btn btn-primary yes" data-i18n="btn.yes.name"></button>\n          <button type="button" class="btn btn-primary ok" data-i18n="btn.ok.name"></button>\n          </div>\n      </div>\n    </div>\n  </div>\n</div>');const ge=new bootstrap.Modal("#dialog",{keyboard:!1,backdrop:"static"}),me=$("#dialog .modal-header"),he=$("#dialog .modal-body"),ve=$("#dialog button.yes"),_e=$("#dialog button.no"),be=$("#dialog button.ok"),ye=$("#dialog input.always");function Ie(e,t){ge.hide(),e(t)}function Ee(){$("#modal").addClass("guide").removeClass("modal-dialog"),me.show(),he.html(fe.localize()),ve.hide(),_e.hide(),be.hide(),$("#dialog .always").hide(),ge.show()}function we(){const e=N().attr("aria-labelledby");return $(`#${e}`)}function Se(){we().attr("data-i18n","tab.challenges.name").removeAttr("aria-alert").removeClass("new").localize()}function $e(e){e.preventDefault();const t=O().getSource().getFeatures(),a={cai:[],bsl:[]};t.forEach((e=>{e.getId().indexOf("cai")>-1?a.cai.push({location_id:e.get("lid"),name:e.get("name"),address:e.get("addr"),zip:e.get("zip")}):a.bsl.push(e.get("lid"))})),nt.addFeatures(t),function(e){const t=ie.writeFeatures(e);localStorage.setItem("submission",t)}(nt.getFeatures()),De(!0),console.warn(a)}function Ce(e){const t=function(e){return e instanceof c?e:$(e.target).data("feature")}(e),a=O().getSource();t.set("challenge",!0),a.addFeature(t),we().addClass("new").attr("data-i18n","tab.challenges.new;[aria-alert]tab.challenges.new").one("click",Se).localize(),re(a.getFeatures()),Te(!1)}function Te(e){L.challengeTab.find("form").find("button").each(((t,a)=>{$(a).hasClass("open")||$(a).prop("disabled",e)}))}function xe(e){const t=$(e.target).data("feature"),a=O().getSource();t.set("challenge",!1),a.removeFeature(t),re(a.getFeatures()),0===a.getFeatures().length&&(Se(),Te(!0))}function Re(e){e.preventDefault();!function(e){const t=$('<table class="table"><thead><tr></tr></thead><tbody></tbody><table>'),a=t.find("thead tr"),n=t.find("tbody");ae.forEach((e=>{const t=e.name,n=$("<th></th>");a.append(n),void 0!==t&&n.attr("data-i18n",t)})),e.forEach((e=>{const t=e.getId(),a=$(`<tr id="table-${t}"></tr>`);n.append(a),ae.forEach((t=>{var n,s;const i=$("<td></td>"),o=t.prop;if(void 0===o){const t=$("<img>"),a=$(`<img role="button" src="${k("trash")}" data-i18n="[alt]btn.remove_challenge.name;[title]btn.remove_challenge.name">`).data("feature",e).on("click",ne),o=null==(n=e.get("service"))?void 0:n.toLowerCase(),r=null==(s=e.get("eligible"))?void 0:s.toLowerCase();if(void 0!==o)t.attr("src",k(o)).attr("data-i18n",`[alt]feature.value.${o};[title]feature.value.${o}`);else{const e="y"===r?"eligible":"not_eligible";t.attr("src",k(`${r}-eligible`)).attr("data-i18n",`[alt]feature.value.${e};[title]feature.value.${e}`)}i.append(t).append(a)}else{const a=e.get(o);if(t.decode&&void 0!==a){const e=(a+"").toLowerCase();i.attr("data-i18n",`feature.value.${e}`)}else i.html(a).addClass(void 0===a?"empty":"")}a.append(i)}))}));const s=$("#container"),i=$('<div class="challenge-table" style="display:none"></div>'),o=$('<button class="btn btn-primary back" data-i18n="[aria-label]btn.back.name;[title]btn.back.name"></button>').on("click",(()=>{$("body").removeClass("challenge-table"),i.slideUp((()=>{i.remove(),s.attr("aria-hidden",!1)}))}));$(t.find("thead th").get(0)).append(o),i.append(t).css("top",s.get(0).offsetTop+"px"),$("body").addClass("challenge-table").append(i),i.localize().slideDown((()=>s.attr("aria-hidden",!0)))}(O().getSource().getFeatures())}function Le(e){e.preventDefault(),function(){const e=`data:text/csv;charset=utf-8,${oe()}`,t=$('<a class="csv-download"><img></a>');$("body").append(t),t.attr({href:e,download:"Illinois-BEAD-challenge.csv"}).find("img").trigger("click"),t.remove()}()}function Ae(e){e.preventDefault(),function(){let e=$("#load-csv");0===e.length&&(e=$('<input id="load-csv" type="file">'),$("body").append(e),e.on("change",pe)),e.trigger("click")}()}function De(e){if(e){const e=O().getSource();e.getFeatures().forEach((t=>{t.set("challenge",!1),e.removeFeature(t)})),de(),Te(!0)}}function ke(e){var t;e.preventDefault(),t=De,$("#modal").removeClass("guide").addClass("modal-dialog"),me.hide(),he.attr("data-i18n","dialog.delete").localize(),ve.show().one("click",(()=>Ie(t,!0))),_e.show().one("click",(()=>Ie(t,!1))),be.hide(),$("#dialog .always").hide(),ge.show()}function Pe(e){e.preventDefault(),function(){$("#modal").removeClass("guide").addClass("modal-dialog"),me.hide();const e=new Date("Jan 8 2024 00:00:00 CST");he.html(`&nbsp;${e.toLocaleString()}`).attr("data-i18n","[prepend]dialog.premature").localize(),ve.hide(),_e.hide(),be.show().on("click",(()=>ge.hide())),$("#dialog .always").hide(),ge.show()}()}function Fe(e,t){!function(e){const t={};["delete","table","save","open"].forEach((a=>{const n=$('<button class="btn btn-primary"></button>').attr("data-i18n",`[title]form.challenges.${a};[aria-label]form.challenges.${a}`).prop("disabled","open"!==a).addClass(`sm ${a}`);t[a]=n,e.append(n)})),t.save.on("click",Le),t.open.on("click",Ae),t.table.on("click",Re),t.delete.on("click",ke)}(e),Te(!t),function(e){const t=new Date("Jan 8 2024 00:00:00 CST").getTime();(new Date).getTime()>t?e.on("submit",$e):e.on("submit",Pe)}(e),e.localize()}ye.on("change",(()=>{var e;e=ye.is(":checked"),localStorage.setItem("always",e)})),$("#challenge-tab").on("show.bs.tab",(()=>{$("#locate")[$(window).width()<972?"hide":"show"]()})),$("#challenge-tab").on("hide.bs.tab",(()=>$("#locate").show()));const Be=$('<div id="popup" class="popup"><a href="#" id="popup-closer" class="popup-closer" data-i18n=[aria-label]btn.close.name}" rel="noopener">&#10006;</a><div id="popup-content"></div></div>');function Ve(e){e.setPosition(void 0),$("#popup").css("opacity",0).show()}function Oe(e){if(G().active){const t=e.map,a=[];t.forEachFeatureAtPixel(e.pixel,((e,t)=>{t.get("name");const n=t.get("featureHtml");a.push(n(e,"popup"))}),{layerFilter:M,hitTolerance:50}),function(e,t,a){const n=$("#popup").attr("dir",$("html").attr("dir")),s=e.get("popupOverlay"),i=$("#popup-content");if(a.length>0){const e=a[0];i.empty().append(e).data("htmlFeatures",a),s.setPosition(t),n.animate({opacity:1}),$("#popup-closer").one("click",(e=>{n.fadeOut((()=>Ve(s)))}))}}(t,e.coordinate,a)}}function Ue(e){$("#popup"),this.active=e,setTimeout((()=>{Ve(this),e||$("popup").hide()}),500)}function ze(){setTimeout((()=>{G().panIntoView()}),500)}const Ge=["location","challenge","popup"];function Ne(e){const t=e.max_up;return"0"==`${t}`?'<span data-i18n="feature.value.unkown"/>':t+"/"+e.max_down+" mb/s"}function Me(e,t){const a=[],n=t?"button.challenge":"";return Ge.forEach((t=>{"challenge"!==t&&a.push(`#${qe(e,t)} ${n}`)})),$(a.join())}function qe(e,t){return`${t}-${e.getId()}`}function Je(e,t){const a=e.get("challenge"),n=$(`<button class="btn btn-primary challenge" data-i18n="${a?"btn.remove_challenge.name":"btn.add_challenge.name"}"></button>`).on("click",a?xe:Ce).data("feature",e);t.append(n)}function Ye(e){const t=e.feature,a=null!==nt.getFeatureById(t.getId()),n=t.get("challenge"),s=Me(t,!0);if(a)s.each(((e,t)=>{const a=$('<div class="submitted" data-i18n="feature.value.submitted"></div>');$(t).replaceWith(a.localize())}));else{const e=n?"btn.remove_challenge.name":"btn.add_challenge.name";s.attr("data-i18n",e).off("click",n?Ce:xe).on("click",n?xe:Ce).localize()}ze(),function(e,t){const a=Me(e),n=t?"addClass":"removeClass";a.each(((e,t)=>{const a=$(t).parent();if("LI"===a.prop("nodeName"))a[n]("challenge");else{const e=P().get("popupOverlay").getElement();$(e)[n]("challenge")}}))}(t,!a||n),"addfeature"===e.type&&Te(!1)}function je(e){const t=e.get("distance");if(void 0!==t){const e=$('<label data-i18n="feature.value.distance"></label>').localize(),a=(t/1609.34).toFixed(2);return $(`<div class="distance">${a} mi</div>`).attr("aria-label",`${a} ${e.html()}`)}return""}function Ze(e,t){return e.replace(t,"")}const Ke={VITE_SUBMIT_DATE:"Jan 8 2024 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Xe=Ke.VITE_BSL_PROVIDER_URL,We=Ke.VITE_PROVIDER_URL;function He(e,t){console.error({message:`Could not fetch providers for Location_ID=${t.get("lid")}`,error:e})}function Qe(e){const t=$(e.target),a=t.data("feature"),n=t.find("tbody");void 0===a.get("providers")&&(t.addClass("loading"),function(e){return new Promise(((t,a)=>{if(void 0!==e.get("providers"))t(e);else{const a=encodeURIComponent(`location_id=${e.get("lid")}`);fetch(`${Xe}&where=${a}`).then((a=>{a.json().then((a=>{const n=[];if(a.features.forEach((e=>{n.push(e.properties.provider_id)})),n.length>0){const a=encodeURIComponent(`provider_id IN (${n.join()})`);fetch(`${We}&where=${a}`).then((a=>{a.json().then((a=>{const n=[];a.features.forEach((e=>{n.push(e.properties)})),e.set("providers",n,!0),t(e)}))})).catch((t=>He(t,e)))}else e.set("providers",[]),t(e)}))})).catch((t=>He(t,e)))}}))}(a).then((e=>{const a=e.get("providers");a.length>0?a.forEach((e=>{const t=$("<tr></tr>").append(`<td>${e.name}</td>`).append(`<td>${e.tech}</td>`).append(`<td>${Ne(e)}</td>`);n.append(t)})):n.append('<tr><td  colspan="3" data-i18n="feature.value.unserved"></td></tr>').localize(),t.removeClass("loading"),ze()})).catch((e=>He(e,a))))}function et(e,t){var a;const n=qe(e,t),s=null!==nt.getFeatureById(e.getId()),i=e.get("lid"),o=`${e.get("city")}, <span data-i18n="feature.value.addr_state"></span> ${e.get("zip")}`,r=Ze(e.get("addr"),o),l=null==(a=e.get("service"))?void 0:a.toLowerCase(),c=1===e.get("enforce")?"y":"n",d=e.get("mdu"),u=$(`<div id="${n}" class="feature-html ${`bsl ${t} ${l} ${c}`}"><h4 data-i18n="[prepend]layer.bsl.name"></h4></div>`).append(je(e)).append(`<div class="addr">${r}<br>${o}</div>`).append(`<div class="location-id"><span class="field" data-i18n="[prepend]feature.field.id">:</span> <span>${i}</span></div>`).append(`<div class="enfoce"><span class="field" data-i18n="[prepend]feature.field.enforce">:</span> <span data-i18n="feature.value.${c}"></span></div>`).append(function(e){var t;const a=$('<span class="fund"><span class="field" data-i18n="[prepend]feature.field.fund">: </span></span>'),n=null==(t=e.get("fed_fund"))?void 0:t.toLowerCase(),s=1===e.get("state_fund")?"state_fund":"";return n&&a.append(`<span data-i18n="feature.value.${n}"></span>`),s&&(n&&a.append(", "),a.append(`<span data-i18n="feature.value.${s}"></span>`)),a.children().length>1?a:""}(e)).append(`<div class="service"><span class="field" data-i18n="[prepend]feature.field.service">:</span> <span data-i18n="feature.value.${l}"></span></div>`).append(d>1?`<div class="mdu"><span class="field" data-i18n="[prepend]feature.field.mdu">:</span> <span>${d}</span></div>`:"").append(function(e){const t=`prov-${e.getId()}`,a=$(`<table id="${t}" class="collapse hide provider">\n    <thead>\n      <th data-i18n="feature.field.provider"/>\n      <th data-i18n="feature.field.tech"/>\n      <th data-i18n="feature.field.speed"/>\n    </thead>\n    <tbody></tbody>\n  </table>`).data("feature",e),n=$(`<button\n    type="button"\n    class="btn btn-primary providers"\n    data-bs-toggle="collapse"\n    data-bs-target="#${t}"\n    aria-expanded="false"\n    data-i18n="btn.providers.name">\n  </button>`);return a.get(0).addEventListener("show.bs.collapse",Qe),[n,a]}(e));return s?u.append('<div class="submitted" data-i18n="feature.value.submitted"></div>'):Je(e,u),u.localize()}function tt(e,t){const a=qe(e,t),n=0===e.get("lid")?e.get("lid"):'<span data-i18n="feature.value.unavailable"/>',s=null!==nt.getFeatureById(e.getId()),i="0"!==e.get("zip")?e.get("zip"):"",o=`${e.get("city")}, ${$('<span data-i18n="feature.value.addr_state"></span>').localize().html()} ${i}`,r=Ze(e.get("addr"),o),l=e.get("eligible").toLowerCase(),c=e.get("type").toLowerCase(),d=Ne(e.getProperties()),u=$(`<div id="${a}" class="feature-html ${`cai ${t} ${l}`}"><h4 data-i18n="layer.cai.name"></h4></div>`).append(je(e)).append(`<div class="addr">${r}<br>${o}</div>`).append(`<div class="location-id"><span class="field" data-i18n="[prepend]feature.field.id">:</span> <span>${n}</span></div>`).append(`<div class="eligible"><span class="field" data-i18n="[prepend]feature.field.eligible">:</span> <span data-i18n="feature.value.${l}"></span></div>`).append(`<div class="type"><span class="field" data-i18n="[prepend]feature.field.type">:</span> <span data-i18n="feature.value.${c}"></span></div>`).append(`<div class="speed"><span class="field" data-i18n="[prepend]feature.field.speed">:</span> <span>${d}</span></div>`);return s?u.append('<div class="submitted" data-i18n="feature.value.submitted"></div>'):Je(e,u),u.localize()}function at(e){return e.getId().indexOf("bsl")?et(e):tt(e)}const nt=new i;function st(e){const t=new i;e?function(e){ce(e,le())}(t):de();const a=new Z({source:t,style:te,minZoom:12});return a.set("name","challengeLayer"),a.set("featureHtml",at),t.on("addfeature",Ye),t.on("removefeature",Ye),a}ce(nt,function(){const e=localStorage.getItem("submission");return null!==e?JSON.parse(e):{type:"FeatureCollection",features:[]}}());class it extends o{constructor(e){super(e),this.idPrefix=e.idPrefix,this.idProp=e.idProp}readFeatureFromObject(e,t){const a=super.readFeatureFromObject(e,t);return a.setId(this.idPrefix+a.get(this.idProp)),a}}class ot extends it{constructor(e){super(e)}getType(){return"arraybuffer"}readFeature(e,t){const a=d(new Uint8Array(e));return super.readFeature(a.featureCollection,t)}readFeatures(e,t){const a=d(new Uint8Array(e));return super.readFeatures(a.featureCollection,t)}}class rt extends i{constructor(e){super(e),this.filterUrl=e.url}loadFeatures(e,t,a){const n=setInterval((()=>{this.loading||(clearInterval(n),this.dispatchEvent("loadcomplete"))}),100);super.loadFeatures(e,t,a)}filter(e){this.setUrl(((t,a,n)=>this.filterUrl(t,a,n,e))),this.refresh()}}const lt=[{filter:["==",["get","service"],"SERVED"],"icon-src":k("served"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]},{filter:["==",["get","service"],"UNDERSERVED"],"icon-src":k("underserved"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]},{filter:["==",["get","service"],"UNSERVED"],"icon-src":k("unserved"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]}];const ct={VITE_SUBMIT_DATE:"Jan 8 2024 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},dt=`${ct.VITE_BSL_URL}&token=${ct.VITE_ARC_TOKEN}`;function ut(e){const t={},a=$(e.target),n=a.hasClass("enforce")?"input.filter.enforce":"input.filter.mdu";$(n).prop("checked",a.is(":checked")),$("input.filter").each(((e,a)=>{$(a).is(":checked")&&(t[$(a).data("where")]=!0)}));const s=a.data("layer").getSource(),i=Object.keys(t).join(" AND ");s.filter(i)}function pt(e,t){e.add(t).data("layer",B()).on("change",ut),e.data("where","enforceable_commitment = 1"),t.data("where","mdu > 1")}const ft=new rt({format:new ot({dataProjection:"EPSG:3857",idPrefix:"bsl-",idProp:"lid"}),url:function(e,t,a,n){return q(dt,e,n)},strategy:u}),gt=new Z({source:ft,style:lt,minZoom:14});gt.set("name","bsl"),gt.set("featureHtml",et);const mt={"stroke-color":"rgb(17, 26, 82)","stroke-width":3},ht=new i({format:new p,url:"data/boundary.json"}),vt=new Z({source:ht,style:mt,minZoom:2,maxZoom:10}),_t={"stroke-color":"rgba(17, 26, 82, .25)","stroke-width":3,"fill-color":"rgba(17, 26, 82, 0.1)"};const bt={VITE_SUBMIT_DATE:"Jan 8 2024 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},yt=`${bt.VITE_BG_URL}&token=${bt.VITE_ARC_TOKEN}`;const It=new i({format:new ot({dataProjection:"EPSG:3857",idPrefix:"bg-",idProp:"FID"}),url:function(e,t,a){return q(yt,e)},strategy:f(g({tileSize:512}))}),Et=new Z({source:It,style:_t,minZoom:10,visible:!1});Et.set("name","bg");const wt=[{filter:["==",["get","eligible"],"Y"],"icon-src":k("y-eligible"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]},{filter:["==",["get","eligible"],"N"],"icon-src":k("n-eligible"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]}];const St={VITE_SUBMIT_DATE:"Jan 8 2024 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},$t=`${St.VITE_CAI_URL}&token=${St.VITE_ARC_TOKEN}`;const Ct=new rt({format:new ot({dataProjection:"EPSG:3857",idPrefix:"cai-",idProp:"OBJECTID"}),url:function(e,t,a){return q($t,e)},strategy:u}),Tt=new Z({source:Ct,style:wt,minZoom:14});Tt.set("name","cai"),Tt.set("featureHtml",tt);const xt="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",Rt={VITE_SUBMIT_DATE:"Jan 8 2024 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Lt=Rt.VITE_ARC_TOKEN,At=encodeURIComponent(Rt.VITE_SEARCH_EXTENT),Dt=`findAddressCandidates?f=pjson&outSR=3857&token=${Lt}&searchExtent=${At}&singleLine=`,kt=`suggest?f=json&token=${Lt}&searchExtent=${At}&text=`;function Pt(e){const t=$("#search").val();e.preventDefault(),$("#locate button").addClass("loading"),$("#possible").slideUp(),function(e){const t=`${xt}${Dt}${encodeURIComponent(e)}`;return new Promise(((e,a)=>{fetch(t).then((t=>{t.json().then((t=>{t.error&&a(t.error),e(t.candidates)})).catch((e=>{console.error(e),a(e)}))})).catch((e=>{console.error(e),a(e)}))}))}(t).then((t=>{t.length>0&&(1===t.length||100===t[0].score?Vt(t[0],$(e.target).data("view")):function(e){Bt(e,"address")}(t))})).catch((e=>console.error(e)))}function Ft(e){if("Enter"!==e.code){const e=$("#search").val();e.length>3&&function(e){const t=`${xt}${kt}${encodeURIComponent(e)}`;return new Promise(((e,a)=>{fetch(t).then((t=>{t.json().then((t=>{t.error&&a(t.error),e(t.suggestions)})).catch((e=>{console.error(e),a(e)}))})).catch((e=>{console.error(e),a(e)}))}))}(e).then((e=>{!function(e){Bt(e,"text")}(e)})).catch((e=>console.error(e)))}}function Bt(e,t){const a={},n=$("#possible").empty();e.forEach((e=>{const s=e[t];if(!a[s]){const e=$(`<li class="list-group-item">${s}</li>`);a[s]=!0,e.on("click",(t=>{n.slideUp(),$("#search").val(e.html()),$("#locate").trigger("submit")})),n.append(e)}})),n.slideDown()}function Vt(e,t){const a=[e.location.x,e.location.y];if(n=t.getCenter(),s=a,n[0]!==s[0]||n[1]!==s[1]){const n=e.address,s=J();s.setPosition(a),t.animate({zoom:16,center:a},(()=>{$(s.getElement()).attr("title",n).attr("aria-label",n)})),function(e){localStorage.setItem("location",JSON.stringify(e))}(e)}else $("#locate button").removeClass("loading");var n,s}function Ot(e,t,n){const s=$('<div class="form-group search-map"><ul id="possible" class="list-group"></ul><button type="submit" class="btn btn-primary" data-i18n="[aria-label]search"><div></div></button></div>'),i=$('<input type="text" class="form-control" id="search" data-i18n="[placeholder]form.search.placeholder;[aria-label]form.search.placeholder">');t.prepend(s.prepend(i)).localize(),$("body").append('<div id="location" class="location"></div>'),i.on("click",(()=>i.select())),$(document).on("click",(()=>$("#possible").slideUp()));const o=new a({element:$("#location").get(0),offset:[-16,-28],className:"overlay-0 ol ol-overlay-container ol-selectable"}),r=e.getView();if(e.addOverlay(o),e.set("locationOverlay",o),$(t).data("view",r).on("submit",Pt),$("#search").on("keyup",Ft),n){$("#locate button").addClass("loading");const e=function(){const e=localStorage.getItem("location");if(null!==e)return JSON.parse(e)}();Vt(e,r),$("#search").val(e.address)}}const Ut=$('<div id="wait"></div>');$("body").append(Ut);const zt=new a({element:Ut.get(0),offset:[-20,-20],className:"overlay-3 ol ol-overlay-container ol-selectable"});window.waitOverlay=zt;class Gt extends v{constructor(e){const t=$('<button data-i18n="btn.add_challenge.name"></button>');super({element:$('<div class="add-selection ol-unselectable ol-control"></div>').append(t).localize().get(0)}),this.selectedSource=e.selectedSource,this.challengeSource=e.challengeSource,t.on("click",this.addChallenges.bind(this)),this.selectedSource.on("change",this.hideShow.bind(this))}hideShow(){const e=this.selectedSource.getFeatures();$(".add-selection")[e.length>0?"fadeIn":"fadeOut"]()}addChallenges(){const e=this.getMap().getView();zt.setPosition(e.getCenter()),setTimeout((()=>{this.selectedSource.getFeatures().forEach((e=>{Ce(e)})),this.selectedSource.clear(),zt.setPosition(void 0)}),100)}}function Nt(e){const t=P();if(function(e){return e.getControls().getArray().filter((e=>e.get("select")))[0].getActive()}(t)){const a=U().getSource(),n=z().getSource();let s=!0;t.forEachFeatureAtPixel(e.pixel,((e,t)=>{s=!1;const n=e.getId();if(!(null!==nt.getFeatureById(n))&&void 0!==n){const t=a.getFeatureById(n);null===t?a.addFeature(e):a.removeFeature(t)}}),{layerFilter:M}),s&&(a.clear(),n.clear())}}function Mt(e){const t=e.feature.getGeometry(),a=Yt();zt.setPosition(P().getView().getCenter()),setTimeout((()=>{!function(e,t){const a=U().getSource();t.forEach((t=>{if(null===nt.getFeatureById(t.getId())){const n=t.getGeometry().getCoordinates();e.intersectsCoordinate(n)&&a.addFeature(t)}})),zt.setPosition(void 0)}(t,a)}),100)}function qt(e,t){const a=t.getGeometry().getCoordinates(),n=new _([e,a]).getLength();t.set("distance",n)}function Jt(e){const t=J().getPosition();if(t){if(1===e.length)return qt(t,e[0]),e;e.sort(((e,a)=>{qt(t,e),qt(t,a);const n=e.get("distance"),s=a.get("distance");return n<s?-1:n>s?1:0}))}return e}function Yt(){const e=P(),t=e.getView(),a=F(),n=B(),s=a.getSource(),i=n.getSource(),o=t.calculateExtent(e.getSize()),r=a.getVisible()?s.getFeaturesInExtent(o):[],l=n.getVisible()?i.getFeaturesInExtent(o):[];return Jt(r.concat(l))}function jt(e){const t=L.locationTab.find("form"),a=$('button[aria-controls="how-it-works"]'),n="true"===a.attr("aria-expanded"),s=e.children().length>0;t.show(),n&&s&&a.trigger("click"),n||s||a.trigger("click")}function Zt(e,t){t.find("form");const a=e.children().length>0;t.find(".message")[a?"hide":"show"]()}function Kt(e,t,a){const n=$('<li class="list-group-item"></li>').addClass(t.getId().indexOf("cai")>-1?"cai":"bsl").append(a(t,"location"));e.append(n)}function Xt(){const e=$("#location-list").empty(),t=Yt(),a=F().get("featureHtml"),n=B().get("featureHtml");t.forEach((t=>{t.getId().indexOf("cai")>-1?Kt(e,t,a):Kt(e,t,n)})),jt(e),$("#locate button").removeClass("loading")}function Wt(e){const t=e.feature;$(`#${qe(t,"challenge")}`).parent().remove(),Zt($("#challenge-list"),N())}function Ht(e){const t=B(),a=F(),n=e.feature||e,s=(-1===n.getId().indexOf("bsl")?a:t).get("featureHtml"),i=$("#challenge-list"),o=$('<li class="list-group-item"></li>').append(s(n,"challenge"));i.append(o),Zt(i,N())}const Qt={VITE_SUBMIT_DATE:"Jan 8 2024 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},ea=`${Qt.VITE_BASEMAP_URL}?token=${Qt.VITE_ARC_TOKEN}`;function ta(t,a){return new Promise(((n,s)=>{E((()=>import("./index-N13p4pSy.js")),__vite__mapDeps([0,1]),import.meta.url).then((i=>new Promise((()=>{i.apply(t,`${ea}&language=${e.language}`).then((e=>{const t=st(a),s=gt.getSource(),i=Tt.getSource();s.on("loadcomplete",Xt),i.on("loadcomplete",Xt),gt.on("change:visible",Xt),Tt.on("change:visible",Xt),e.addLayer(vt),e.addLayer(Et),e.addLayer(Q),e.addLayer(ee),e.addLayer(t),e.addLayer(gt),e.addLayer(Tt),e.set("bgLayer",Et),e.set("selectLayer",Q),e.set("drawLayer",ee),e.set("caiLayer",Tt),e.set("bslLayer",gt),e.set("challengeLayer",t),n(e)})).catch((e=>{console.error(e),s(e)}))})))).catch((e=>{console.error(e),s(e)}))}))}function aa(e){const t=$(e.target),a=$("#map-tab"),n=$("#map"),s=$("#map-container"),i=t.get(0)===a.get(0),o=a.is(":visible");o&&!i?$("body").append(s.addClass("wayout")):o&&i?n.append(s.removeClass("wayout")):s.removeClass("wayout")}window.dealWithMap=aa,$(".nav-link").on("click",aa);class na extends a{constructor(e){const t=$(e.map.getTargetElement()).find(".feature-tip").get(0);super({id:D("feature-tip"),element:t||$(na.HTML).get(0),offset:[5,5],className:"overlay-1 ol ol-overlay-container ol-selectable"}),this.setMap(e.map),this.map=this.getMap(),this.tip=$(this.getElement()),this.addTips(e.tips),this.map.on("pointermove",this.label.bind(this))}hide(){this.tip.fadeOut((()=>{this.setPosition(void 0)}))}addTips(e){e.forEach((e=>{e.layer.tip=e.label}))}out(e){$.contains(this.map.getTargetElement(),e.target)||this.hide()}label(e){const t=this.map.forEachFeatureAtPixel(e.pixel,((e,t)=>t&&t.getVisible()&&t.tip?t.tip(e):null));t?(this.tip.html(t.html),this.tip.addClass(t.css),this.setPosition(e.coordinate),this.tip.localize().show(),this.position()):this.hide()}position(){const e=this.map.getSize(),t=this.tip.width(),a=this.tip.height(),n=this.map.getPixelFromCoordinate(this.getPosition()),s=n[1]+a>e[1]?"bottom":"top",i=n[0]+t>e[0]?"right":"left";this.setPositioning(`${s}-${i}`)}}function sa(e){const t=e.get("name"),a=1===e.get("eligible")?"feature.value.eligible":"feature.value.not_eligible";const n=$("<div></div>").append(`<span class="name">${t}</span>`).append(` (<span class="tip-prop" data-i18n="${a}"></span>)`);return{html:$('<div><div class="title" data-i18n="layer.cai.name"></div></div>').append(n)}}function ia(e){var t;const a=e.get("addr"),n=function(e){return"Y"===e?"feature.value.enforce":"feature.value.not_enforce"}(e.get("enforce")),s=e.get("fed_fund"),i=e.get("state_fund"),o=[];s&&o.push(s),i&&o.push($('<div data-i18n="feature.value.state_fund_abbr"></div>').localize().html());const r=null==(t=e.get("service"))?void 0:t.toLowerCase(),l=e.get("mdu"),c=$("<div></div>").append(`<div class="address">${a}</div>`).append(`(<span class="enforce" data-i18n="${n}" />`).append(o.length>0?`, <span class="fund">${o.join(", ")}</span>`:"").append(`, <span data-i18n="feature.value.${r}"></span>`).append(l>0?`, <span class="mdu">MDU ${l}</span>)`:")");return{html:$('<div><div class="title" data-i18n="layer.bsl.name"></div></div>').append(c)}}function oa(e){const t=e.get("tr"),a=e.get("bg");return{html:$(`<div>\n    <div class="title" data-i18n="[prepend]feature.field.tr"> ${t}</div>\n    <div class="title" data-i18n="[prepend]feature.field.bg"> ${a}</div>\n  </div>`)}}na.TipDef,na.LabelFunction,na.Label,na.Options,na.HTML='<div class="feature-tip" role="tooltip"></div>';$("body").append('  <div id="legend" class="legend" style="display: none;">\n  <h2 data-i18n="[append]legend.name">\n    <a href="#" class="legend-closer" data-i18n="[aria-label]close" rel="noopener">&#10006;</a>\n  </h2>\n  <div class="legend-content">\n    <div class="layer">\n      <input id="cai-check" type="checkbox"\n        class="form-check-input layer-check"\n        data-i18n="[aria-label]layer.cai.name" disabled>\n      <h3 data-i18n="layer.cai.name"></h3>\n      <ul>\n        <li>\n          <img src="img/y-eligible.svg" data-i18n="[alt]feature.value.eligible">\n          <span data-i18n="feature.value.eligible"></span>\n        </li>\n        <li>\n          <img src="img/n-eligible.svg" data-i18n="[alt]feature.value.not_eligible">\n          <span data-i18n="feature.value.not_eligible"></span>\n        </li>\n      </ul>\n    </div>\n    <div class="layer">\n      <input id="bsl-check" type="checkbox"\n        class="form-check-input layer-check"\n        data-i18n="[aria-label]layer.bsl.name" disabled>\n      <h3 data-i18n="layer.bsl.name"></h3>\n      <div class="filter">\n        <h4 data-i18n="feature.field.service"></h4>\n        <ul>\n          <li>\n            <img src="img/served.svg" data-i18n="[alt]legend.served">\n            <span data-i18n="legend.served"></span>\n          </li>\n          <li>\n            <img src="img/underserved.svg" data-i18n="[alt]legend.underserved">\n            <span data-i18n="legend.underserved"></span>\n          </li>\n          <li>\n            <img src="img/unserved.svg" data-i18n="[alt]legend.unserved">\n            <span data-i18n="legend.unserved"></span>\n          </li>\n        </ul>\n      </div>\n      <div class="filter">\n        <ul>\n          <li>\n            <input id="enforce-check" type="checkbox"\n              class="form-check-input filter enforce"\n              data-i18n="[aria-label]feature.field.enforce" disabled>\n            <img src="img/filter.svg" data-i18n="[alt]legend.filter">\n            <h6 data-i18n="feature.field.enforce"></h6>\n          </li>\n          <li>\n            <input id="mdu-check" type="checkbox"\n              class="form-check-input filter mdu"\n              data-i18n="[aria-label]feature.field.mdu" disabled>\n            <img src="img/filter.svg" data-i18n="[alt]legend.filter">\n            <h6 data-i18n="feature.field.mdu"></h6>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class="layer">\n      <input id="bg-check" type="checkbox"\n        class="form-check-input layer-check"\n        data-i18n="[aria-label]layer.bg.name" disabled>\n      <h3 data-i18n="layer.bg.name"></h3>\n      <ul>\n        <li>\n          <img src="img/bg.svg" data-i18n="[alt]layer.bg.name">\n          <span data-i18n="layer.bg.name"></span>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>');class ra extends v{constructor(e){const t=$('<button class="legend-opener" data-i18n="[title]legend.name"></button>');super({element:$('<div class="legend ol-unselectable ol-control ol-collapsed"></div>').append(t).append(e).get(0)}),this.legend=e.hide(),this.button=t,t.on("click",this.show.bind(this)),e.find(".legend-closer").on("click",this.hide.bind(this))}show(){$(this.element).removeClass("ol-collapsed").addClass("ol-expanded").prop("dir",$("html").prop("dir")),this.button.hide(),this.legend.fadeIn()}hide(){this.legend.fadeOut((()=>{$(this.element).removeClass("ol-expanded").addClass("ol-collapsed"),this.button.show()}))}}function la(e){const t=$(e.target),a=t.data("layer"),n=t.is(":checked"),s=a.get("name");a.setVisible(n),$(`#location-list li.${s}`)[n?"show":"hide"]()}var ca={VITE_SUBMIT_DATE:"Jan 8 2024 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://utility.arcgis.com/usrsvcs/servers/add591a48d0042e09224c9942fc1f22a/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,0%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const da=new b({target:"map-container"});function ua(e){const t=$("#locations"),n=$("#challenges");A(da,t,n),ta(da,e).then((s=>{if(function(){const e=da.getControls().getArray().filter((e=>e instanceof y))[0];da.removeControl(e)}(),function(){let e=!0;const t=$(".col-sm-4");$(window).on("resize",(a=>{const n=$("#map-container");$(window).width()>972?($(".col-sm-8").append(n),t.addClass("col-sm-4"),$("#location-tab").trigger("click")):($("#map").append(n),t.removeClass("col-sm-4"),e&&(e=!1,$("#location-tab").trigger("click")))}))}(),Fe($("#challenge"),e),Ot(s,$("#locate"),e),function(e,t,a){e.getView();const n=O().getSource(),s=$('<ul id="location-list" class="list-group"></ul>'),i=$('<ul id="challenge-list" class="list-group"></ul>');t.append(s),a.append(i),$("#show-guide").on("click",Ee),pt(t.find("input.enforce"),t.find("input.mdu")),n.on("addfeature",Ht),n.on("removefeature",Wt),n.getFeatures().forEach((e=>{Ht(e)}))}(s,t,n),function(e){const t=U(),a=z().getSource(),n=t.getSource(),s=O().getSource();G();const i=new m({source:a,type:"Polygon",freehand:!0,style:X}),o=new h({className:"select",interaction:i,active:!1,onToggle:t=>{z().setVisible(t),G().setActive(!t),$(e.getTargetElement())[t?"addClass":"removeClass"]("draw-select")}});$(o.getButtonElement()).addClass("select-button"),o.set("select",!0),e.addOverlay(zt),e.addControl(o),e.addInteraction(i),e.addControl(new Gt({selectedSource:n,challengeSource:s})),i.on("drawend",Mt),e.on("singleclick",Nt)}(s),function(e){new na({map:e,tips:[{layer:F(),label:sa},{layer:B(),label:ia},{layer:V(),label:oa}]})}(s),j(s),function(e){$("body").append(Be);const t=$("#popup"),n=new a({element:t.get(0),autoPan:{animation:{duration:250}},className:"overlay-2 ol ol-overlay-container ol-selectable"});n.active=!0,n.setActive=Ue,$("#popup-content").data("map",e),e.addOverlay(n),e.set("popupOverlay",n),e.on("singleclick",Oe)}(s),function(e){const t=$("#legend"),a=e.getView();t.find("#cai-check").data("layer",F()).on("change",la),t.find("#bsl-check").data("layer",B()).on("change",la),t.find("#bg-check").data("layer",V()).on("change",la),a.on("change:resolution",(()=>{const e=a.getZoom();t.find("input").each(((t,a)=>{const n=$(a).data("layer");if($(a).prop("disabled",e<=n.getMinZoom()),"checkbox"===$(a).attr("type")){const e=a.id;"enforce-check"!==e&&"mdu-check"!==e&&$(a).prop("checked",n.getVisible())}}))})),new ra(t).setMap(e),pt(t.find("input.enforce"),t.find("input.mdu"))}(s),!e){const e=s.getView(),t=ca,a=JSON.parse(t.VITE_CENTER),n=1*t.VITE_ZOOM;e.setZoom(n),e.setCenter(a)}s.once("postrender",(()=>{$("body").removeClass("loading"),$(window).trigger("resize"),$("#search").trigger("focus")})),function(){const e=JSON.parse('["en", "es"]');let t=0,a=0;const n=$(".banner .dropdown .btn-primary"),s=setInterval((()=>{t=t<e.length-1?t+1:0,a+=1,a===10*e.length?(n.attr("data-i18n","translate").localize(),clearInterval(s)):n.attr("data-i18n",`translate.${e[t]}`).localize()}),1e3)}()}))}$(".ol-attribution button").addClass("attribution"),new Promise(((a,n)=>{const s=function(){const e=document.location.search,t={};e&&e.substring(1).split("&").forEach((e=>{const a=e.split("=");t[a[0]]=a[1]}));let a=t.locale;return void 0!==a?a.split("-")[0]:(a=navigator.language.split("-")[0],(a=T)?a:void(document.location=`./?locale=${navigator.language.split("-")[0]}`))}(),i={en:S};(function(e){return new Promise(((t,a)=>{e!==T?w(Object.assign({"./en/translation.js":()=>E((()=>Promise.resolve().then((()=>C))),void 0,import.meta.url),"./es/translation.js":()=>E((()=>import("./translation-lFTQGNfX.js")),__vite__mapDeps([]),import.meta.url),"./he/translation.js":()=>E((()=>import("./translation-K_xsQ7Z2.js")),__vite__mapDeps([]),import.meta.url)}),`./${e}/translation.js`).then((a=>{void 0!==a&&t({locale:e,translation:a})})).catch((a=>{console.warn(`No translations for locale="${e}"`),t({locale:T})})):t({locale:T})}))})(s).then((n=>{const s=n.locale;s!==T&&(i[s]=n.translation.default,$("#map-container").attr("dir","ltr"),$("html").attr("lang",s).attr("dir",i[s].translation.dir||"ltr")),e.init({defaultLocale:T,fallbackLng:T,defaultNS:"translation",resources:i,lng:s},((n,s)=>{t.init(e,$,{useOptionsAttr:!0}),$("[data-i18n]").localize(),a(i)}))}))})).catch((e=>console.error("Failed to initialize i18n"))).then((()=>{var e;void 0!==le()?"true"===localStorage.getItem("always")?ua(!0):(e=ua,$("#modal").removeClass("guide").addClass("modal-dialog"),me.hide(),he.attr("data-i18n","dialog.restore").localize(),ve.show().one("click",(()=>Ie(e,!0))),_e.show().one("click",(()=>Ie(e,!1))),be.hide(),$("#dialog .always").show(),ge.show()):ua(!1)}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-N13p4pSy.js","./vendor-cBnjCObF.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}