import{i as e,j as t,O as a,F as n,S as s,C as o,a as i,V as r,b as l,I as c,G as d,P as u,c as p,d as f,e as g,L as m,W as h,f as v,T as _,t as b,g as y,D as I,o as E,h as w,k as S,M as C,R as T}from"./vendor-QVWB1rBW.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const R={},x=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link");n=Promise.all(t.map((t=>{if(t=function(e,t){return new URL(e,t).href}(t,a),t in R)return;R[t]=!0;const n=t.endsWith(".css"),s=n?'[rel="stylesheet"]':"";if(!!a)for(let a=e.length-1;a>=0;a--){const s=e[a];if(s.href===t&&(!n||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${t}"]${s}`))return;const o=document.createElement("link");return o.rel=n?"stylesheet":"modulepreload",n||(o.as="script",o.crossOrigin=""),o.href=t,document.head.appendChild(o),n?new Promise(((e,a)=>{o.addEventListener("load",e),o.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${t}`))))})):void 0})))}return n.then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},L=(e,t)=>{const a=e[t];return a?"function"==typeof a?a():Promise.resolve(a):new Promise(((e,a)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+t)))}))},A={translation:{"app.title":"Illinois BEAD Challenge","app.desc":"Illinois BEAD Challenge","banner.state_seal.alt":"Illinois Stae Seal","banner.bb_lab.alt":"Illinois Broadband Lab Logo","tab.map.name":"Map","tab.location.msg":"<p>Search for a location to display a list of Community Anchor Institutions and Broadband Service Locations.</p>","tab.locations.long_msg":'<p>The Illinois BEAD Challenge Map contains all up-to-date Broadband Serviceable Locations (BSLs) and Community Anchor Institutions (CAIs) in Illinois. This map can be used as a resource for participating in Illinois\' challenge process. Any location on this map can be challenged.</p><h2>How it works:</h2><ul><li>Search for an address or locate an area on the map using the zoom function.</li><li>Click on a location to view the availability of broadband, and whether this location is currently eligible for funding.</li><li>If you would like to challenge the information you see, select the location(s) and click "Add Challenge." Added locations will show up in the Challenges tab.</li><li>You can select locations on the map by using the Select tool <img src="img/select.svg" alt="Select tool" style="width:20px;height:20px">. Locations can be added one at a time by clicking on them, or you can lasso a group of locations by drawing a loop around multiple locations.</li><li>Once you have finished your selection process, click the "Submit Challenges" button and you will be forwarded to the Challenge Portal to upload evidence and complete the challenge process.</li></ul><p>There is no limit or minimum to the number of locations you can select to challenge, or number of times you can submit challenges.</p><p>If you have a file of pre-selected challenges with Location IDs, you can skip these steps and upload the file directly to the <a href="javascript:alert(\'no url\')">Challenge Portal</a>.</p>',"tab.challenge.msg":'<p class="message">Add a Challenge by clicking the challenge button on a Community Anchor Institution or Broadband Service Location in the Service Locations list, or by selecting locations on the map.</p>',"tab.locations.name":"Service Locations","tab.challenges.name":"Challenges","tab.challenges.new":"New Challenge","dialog.restore":"Would you like to restore the challenges from your last session?","dialog.always":"Always restore challenges","dialog.delete":"Are you sure you want to delete all challenges?","dialog.premature":"Challeng submission begins on","map.current_location":"Current Location","legend.name":"Layers","legend.served":"Served (Not eligible)","legend.underserved":"Underserved (Eligible)","legend.unserved":"Unserved (Eligible)","legend.filter":"Filter","form.search.placeholder":"Search for an address or ZIP Code...","form.challenges.submit":"Submit Challenges","form.challenges.table":"View challenges in table","form.challenges.save":"Save challenges as CSV","form.challenges.open":"Load challenges from CSV","form.challenges.delete":"Delete all challenges","layer.bsl.name":"Broadband Service Location","layer.cai.name":"Community Anchor Institution","layer.bg.name":"Census Block Group","feature.field.id":"Location ID","feature.field.service":"Serviceability","feature.field.enforce":"Enforceable Commitment","feature.field.eligible":"Eligibility","feature.field.mdu":"Multiple Dwelling Units","feature.field.speed":"Speed","feature.field.provider":"Provider","feature.field.tech":"Technology","feature.field.type":"Type","feature.field.tr":"Tract","feature.field.bg":"Block Group","feature.field.fund":"Funding","feature.value.addr_state":"IL","feature.value.eligible":"Eligible","feature.value.not_eligible":"Not Eligible","feature.value.served":"Served","feature.value.underserved":"Underserved","feature.value.unserved":"Unserved","feature.value.enforce":"Enforceable","feature.value.not_enforce":"Not Enforceable","feature.value.n":"No","feature.value.y":"Yes","feature.value.0":"No","feature.value.1":"Yes","feature.value.s":"School","feature.value.l":"Library","feature.value.g":"Government facility","feature.value.h":"Health facility","feature.value.f":"Public Safety","feature.value.p":"Public Housing","feature.value.c":"Community Support Organization","feature.value.distance":"miles from your location","feature.value.rdof":"Rural Digital Opportunity Fund","feature.value.rep":"Rural Econnectivity Program","feature.value.tbcp":"Tribal Broadband Connectivity Program","feature.value.tlp":"Telephone Loan Program (TLP)","feature.value.caf_ii":"Connect America Fund Phase II","feature.value.ccgp":"Community Connect Grant Program","feature.value.bip":"Broadband Infrastructure Program","feature.value.bprt":"Bringing Puerto Rico Together","feature.value.cusvi":"Connect U.S. Virgin Islands","feature.value.state":"Ilinois","feature.value.unkown":"Unkown","feature.value.unavailable":"Unavailable","feature.value.submitted":"Already submitted","btn.add_challenge.name":"Add to Challenge","btn.how_it_works.name":"How it works","btn.remove_challenge.name":"Remove from Challenge","btn.yes.name":"Yes","btn.no.name":"No","btn.ok.name":"OK","btn.close.name":"Close","btn.back.name":"Back to the map","btn.select.name":"Select locations to challenge","btn.providers.name":"Providers","table.column.name":"Name","table.column.addr":"Address","table.column.city":"City","table.column.state":"State","table.column.zip":"ZIP Code","table.column.county":"County","table.column.lid":"Location ID","table.column.type":"Type","table.column.eligible":"Eligiblity","table.column.max_up":"Max Upload Speed","table.column.max_down":"Max Download Speed","table.column.mdu":"Muti Dwelling Units","table.column.service":"Servicibility","table.column.enforce":"Enforceable Commitment","table.column.blank":"",translate:"Translate","translate.en":"English","translate.es":"Español","translate.pl":"Polski","translate.he":"עִברִית","translate.yi":"יידיש"}},D=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"})),P="en";const F={challenge:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#111a52" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M6.043 19.496l-1.482 1.505c-2.791-2.201-4.561-5.413-4.561-9.001s1.77-6.8 4.561-9l1.482 1.504c-2.326 1.835-3.804 4.512-3.804 7.496s1.478 5.661 3.804 7.496zm.675-7.496c0-1.791.887-3.397 2.282-4.498l-1.481-1.502c-1.86 1.467-3.04 3.608-3.04 6s1.18 4.533 3.04 6l1.481-1.502c-1.396-1.101-2.282-2.707-2.282-4.498zm15.043 0c0-2.984-1.478-5.661-3.804-7.496l1.482-1.504c2.791 2.2 4.561 5.412 4.561 9s-1.77 6.8-4.561 9.001l-1.482-1.505c2.326-1.835 3.804-4.512 3.804-7.496zm-6.761 4.498l1.481 1.502c1.86-1.467 3.04-3.608 3.04-6s-1.18-4.533-3.04-6l-1.481 1.502c1.396 1.101 2.282 2.707 2.282 4.498s-.886 3.397-2.282 4.498zm-3-7.498c-1.656 0-3 1.343-3 3s1.344 3 3 3 3-1.343 3-3-1.344-3-3-3z"/></svg>',served:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#CC0202" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M0 7.244c3.071-3.24 7.314-5.244 12-5.244 4.687 0 8.929 2.004 12 5.244l-2.039 2.15c-2.549-2.688-6.071-4.352-9.961-4.352s-7.412 1.664-9.961 4.352l-2.039-2.15zm5.72 6.034c1.607-1.696 3.827-2.744 6.28-2.744s4.673 1.048 6.28 2.744l2.093-2.208c-2.143-2.261-5.103-3.659-8.373-3.659s-6.23 1.398-8.373 3.659l2.093 2.208zm3.658 3.859c.671-.708 1.598-1.145 2.622-1.145 1.023 0 1.951.437 2.622 1.145l2.057-2.17c-1.197-1.263-2.851-2.044-4.678-2.044s-3.481.782-4.678 2.044l2.055 2.17zm2.622 1.017c-1.062 0-1.923.861-1.923 1.923s.861 1.923 1.923 1.923 1.923-.861 1.923-1.923-.861-1.923-1.923-1.923z"/></svg>',underserved:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#F7B500" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M0 7.244c3.071-3.24 7.314-5.244 12-5.244 4.687 0 8.929 2.004 12 5.244l-2.039 2.15c-2.549-2.688-6.071-4.352-9.961-4.352s-7.412 1.664-9.961 4.352l-2.039-2.15zm5.72 6.034c1.607-1.696 3.827-2.744 6.28-2.744s4.673 1.048 6.28 2.744l2.093-2.208c-2.143-2.261-5.103-3.659-8.373-3.659s-6.23 1.398-8.373 3.659l2.093 2.208zm3.658 3.859c.671-.708 1.598-1.145 2.622-1.145 1.023 0 1.951.437 2.622 1.145l2.057-2.17c-1.197-1.263-2.851-2.044-4.678-2.044s-3.481.782-4.678 2.044l2.055 2.17zm2.622 1.017c-1.062 0-1.923.861-1.923 1.923s.861 1.923 1.923 1.923 1.923-.861 1.923-1.923-.861-1.923-1.923-1.923z"/></svg>',unserved:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle fill="" stroke="#000" stroke-width="3" cx="24" cy="24" r="19"/><circle fill="#008450" stroke="#fff" stroke-width="3" cx="24" cy="24" r="16"/><path fill="#fff" transform="translate(12, 12)" d="M0 7.244c3.071-3.24 7.314-5.244 12-5.244 4.687 0 8.929 2.004 12 5.244l-2.039 2.15c-2.549-2.688-6.071-4.352-9.961-4.352s-7.412 1.664-9.961 4.352l-2.039-2.15zm5.72 6.034c1.607-1.696 3.827-2.744 6.28-2.744s4.673 1.048 6.28 2.744l2.093-2.208c-2.143-2.261-5.103-3.659-8.373-3.659s-6.23 1.398-8.373 3.659l2.093 2.208zm3.658 3.859c.671-.708 1.598-1.145 2.622-1.145 1.023 0 1.951.437 2.622 1.145l2.057-2.17c-1.197-1.263-2.851-2.044-4.678-2.044s-3.481.782-4.678 2.044l2.055 2.17zm2.622 1.017c-1.062 0-1.923.861-1.923 1.923s.861 1.923 1.923 1.923 1.923-.861 1.923-1.923-.861-1.923-1.923-1.923z"/></svg>',"y-eligible":'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><rect fill="#000" x="3" y="3" width="42" height="42"/><rect fill="#fff" x="6" y="6" width="36" height="36"/><rect fill="#008450" x="9" y="9" width="30" height="30"/><path fill="#fff" transform="translate(12, 12)" d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>',"n-eligible":'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><rect fill="#000" x="3" y="3" width="42" height="42"/><rect fill="#fff" x="6" y="6" width="36" height="36"/><rect fill="#CC0202" x="9" y="9" width="30" height="30"/><path fill="#fff" transform="translate(13.2, 13.2) scale(0.9 0.9)" d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"/></svg>',trash:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path fill="#111a52" transform="translate(6, 6) scale(1.5)" d="m20.015 6.506h-16v14.423c0 .591.448 1.071 1 1.071h14c.552 0 1-.48 1-1.071 0-3.905 0-14.423 0-14.423zm-5.75 2.494c.414 0 .75.336.75.75v8.5c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-8.5c0-.414.336-.75.75-.75zm-4.5 0c.414 0 .75.336.75.75v8.5c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-8.5c0-.414.336-.75.75-.75zm-.75-5v-1c0-.535.474-1 1-1h4c.526 0 1 .465 1 1v1h5.254c.412 0 .746.335.746.747s-.334.747-.746.747h-16.507c-.413 0-.747-.335-.747-.747s.334-.747.747-.747zm4.5 0v-.5h-3v.5z" fill-rule="nonzero"/></svg>'},B="rgba(0, 105, 217, .25)",V="rgb(0, 105, 217)",O="rgba(255, 240, 0, .8)",k="rgb(0, 105, 217)",U="rgba(237, 195, 128, .15)",G="rgba(0, 98, 204, .5)",z={},N={};function M(e,t,a){!function(e,t,a){if(void 0!==N.map)throw"store must only be called once";if(void 0===e)throw"store must be called with a map parameter";if(void 0===t)throw"store must be called with a locationTab parameter";if(void 0===a)throw"store must be called with a challengeTab parameter"}(e,t,a),N.map=e,N.locationTab=t,N.challengeTab=a}function q(e){const t=z[e];return z[e]=void 0===t?0:t+1,`${e}-${z[e]}`}function Y(e){return`data:image/svg+xml;utf8,${encodeURIComponent(F[e])}`}function J(){return N.map}function j(){return N.map.get("caiLayer")}function Z(){return N.map.get("bslLayer")}function K(){return N.map.get("bgLayer")}function X(){return N.map.get("challengeLayer")}function W(){return N.map.get("selectLayer")}function H(){return N.map.get("drawLayer")}function Q(){return N.map.get("popupOverlay")}function ee(){return N.challengeTab}function te(e){return e===j()||e===Z()}function ae(e,t,a){a=a||"1 = 1";const n=encodeURIComponent(a),s=`{"xmin":${t[0]},"ymin":${t[1]},"xmax":${t[2]},"ymax":${t[3]},"spatialReference":{"wkid":102100,"latestWkid":3857}}`;return`${e}&esriSpatialRelIntersects&geometry=${encodeURIComponent(s)}&where=${n}`}function ne(){return J().get("locationOverlay")}function se(e,t){for(const a in t){const n=t[a].filter;if(e.get(n[1][1])==n[2])return t[a]}}function oe(e){const t=e.getView(),n=j(),s=Z(),o=X().getSource(),i=W().getSource();function r(o){const i=$('<div class="pulse"></div>');$("body").append(i);const r=new a({element:i.get(0),offset:[-30,-30]});e.addOverlay(r);const l=o.feature,c=l.getId(),d=$(r.getElement());let u;u=c.indexOf("cai")>-1?n.getStyle():s.getStyle();const p=function(e,t,a){const n=se(t,a)["icon-scale"],s=n[3],o=n[5],i=n[1][1],r=Math.floor(e.getZoom()),l=[];for(let d=s;d<=o;d++)l.push(d);const c=l.indexOf(r)+1;return Math.pow(i,c)/Math.pow(i,l.length)}(t,l,u),f=Math.floor(48*p),g=function(e,t){return se(e,t)["icon-src"]}(l,u);d.css({"background-image":`url("${g}")`,"background-size":`${f}px`}).fadeIn(),r.setPosition(l.getGeometry().getCoordinates()),setTimeout((()=>{d.fadeOut((()=>{e.removeOverlay(r),r.dispose(),d.remove()}))}),3e3)}o.on("addfeature",r),i.on("addfeature",r)}function ie(e,t){const a=[];for(let s=4;s<=17;s++)a.push(s);const n=a.indexOf(t)+1;return Math.pow(2,n)/Math.pow(2,a.length)}function re(){return[new i({fill:new n({color:U}),stroke:new s({color:G,width:3})})]}const le=new r({}),ce=new r({}),de=new l({source:le,style:function(e,t){const a=J().getView(),r=56*ie(0,Math.floor(a.getZoom())),l=new n({color:O}),c=new s({color:k,width:3}),d=new o({fill:l,stroke:c,radius:r});return[new i({image:d})]},minZoom:6});de.set("name","selectLayer");const ue=new l({source:ce,style:re,minZoom:6});function pe(e,t){const a=J().getView(),r=ie(0,Math.floor(a.getZoom())),l=56*r,d=new n({color:B}),u=new s({color:V,width:3}),p=new o({fill:d,stroke:u,radius:l}),f=new c({src:Y("challenge"),scale:r});return[new i({image:p}),new i({image:f})]}ue.set("name","drawLayer");const fe=[{},{prop:"name",name:"table.column.name",csv:"NAME"},{prop:"addr",name:"table.column.addr",csv:"ADDRESS"},{prop:"city",name:"table.column.city",csv:"CITY"},{prop:"state",name:"table.column.state",csv:"STATE"},{prop:"zip",name:"table.column.zip",csv:"ZIP"},{prop:"county",name:"table.column.county",csv:"COUNTY"},{prop:"lid",name:"table.column.lid",csv:"LOCATION_ID"},{prop:"type",name:"table.column.type",csv:"TYPE",decode:!0},{prop:"eligible",name:"table.column.eligible",csv:"ELIGIBILITY",decode:!0},{prop:"max_up",name:"table.column.max_up",csv:"MAX_UPLOAD_SPEED"},{prop:"max_down",name:"table.column.max_down",csv:"MAX_DOWNLOAD_SPEED"},{prop:"mdu",name:"table.column.mdu",csv:"MULTI_DWELLING_UNITS"},{prop:"service",name:"table.column.service",csv:"SERVICEABILITY",decode:!0},{prop:"enforce",name:"table.column.enforce",csv:"ENFORCEABLE_COMMITMENT",decode:!0}];function ge(e){const t=$(e.target).data("feature");Ve(e),$(`#table-${t.getId()}`).remove()}const me={quotes:!1,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0,newline:"\n",skipEmptyLines:!1,columns:function(){const e=["FID_DO_NOT_EDIT","COORDINATE_DO_NOT_EDIT"];return fe.forEach((t=>{void 0!==t.csv&&e.push(t.csv)})),e}()},he=new d({dataProjection:"EPSG:3857"});function ve(){const e=[];return X().getSource().getFeatures().forEach((t=>{const a=function(e){const t={};return fe.forEach((a=>{t[a.csv]=e[a.prop]})),t}(t.getProperties());a.FID_DO_NOT_EDIT=t.getId(),a.COORDINATE_DO_NOT_EDIT=function(e){const t=e.getGeometry();return JSON.stringify(t.getCoordinates())}(t),e.push(a)})),encodeURIComponent(u.unparse(e,me))}function _e(e){const t=he.writeFeatures(e);localStorage.setItem("challenges",t)}function be(){const e=localStorage.getItem("challenges");if(null!==e){const t=JSON.parse(e);if(t.features.length>0)return t}}function ye(e,t){if(void 0!==t){const a=he.readFeatures(t);e.addFeatures(a)}}function Ie(){localStorage.removeItem("challenges"),localStorage.removeItem("location")}function Ee(e){const t=u.parse(e.target.result,{...me,skipFirstNLines:1}).data,a=X().getSource();t.forEach((e=>{a.addFeature(function(e){const t={challenge:!0};fe.forEach((a=>{a.csv&&(t[a.prop]=e[a.csv])})),t.geometry=new p(JSON.parse(e.COORDINATE_DO_NOT_EDIT));const a=new f(t);return a.setId(e.FID_DO_NOT_EDIT),a}(e))}))}function we(e){const t=e.target.files[0],a=new FileReader;a.onload=Ee,a.readAsText(t)}const Se=new bootstrap.Modal("#dialog",{keyboard:!1,backdrop:"static"}),$e=$("#dialog .modal-body"),Ce=$("#dialog button.yes"),Te=$("#dialog button.no"),Re=$("#dialog button.ok"),xe=$("#dialog input.always");function Le(e,t){Se.hide(),e(t)}function Ae(){const e=ee().attr("aria-labelledby");return $(`#${e}`)}function De(){Ae().attr("data-i18n","tab.challenges.name").removeAttr("aria-alert").removeClass("new").localize()}function Pe(e){e.preventDefault();const t=X().getSource().getFeatures(),a={cai:[],bsl:[]};t.forEach((e=>{e.getId().indexOf("cai")>-1?a.cai.push({location_id:e.get("lid"),name:e.get("name"),address:e.get("addr"),zip:e.get("zip")}):a.bsl.push(e.get("lid"))})),ut.addFeatures(t),function(e){const t=he.writeFeatures(e);localStorage.setItem("submission",t)}(ut.getFeatures()),Ge(!0),console.warn(a)}function Fe(e){const t=function(e){return e instanceof f?e:$(e.target).data("feature")}(e),a=X().getSource();t.set("challenge",!0),a.addFeature(t),Ae().addClass("new").attr("data-i18n","tab.challenges.new;[aria-alert]tab.challenges.new").one("click",De).localize(),_e(a.getFeatures()),Be(!1)}function Be(e){N.challengeTab.find("form").find("button").each(((t,a)=>{$(a).hasClass("open")||$(a).prop("disabled",e)}))}function Ve(e){const t=$(e.target).data("feature"),a=X().getSource();t.set("challenge",!1),a.removeFeature(t),_e(a.getFeatures()),0===a.getFeatures().length&&(De(),Be(!0))}function Oe(e){e.preventDefault();!function(e){const t=$('<table class="table"><thead><tr></tr></thead><tbody></tbody><table>'),a=t.find("thead tr"),n=t.find("tbody");fe.forEach((e=>{const t=e.name,n=$("<th></th>");a.append(n),void 0!==t&&n.attr("data-i18n",t)})),e.forEach((e=>{const t=e.getId(),a=$(`<tr id="table-${t}"></tr>`);n.append(a),fe.forEach((t=>{var n,s;const o=$("<td></td>"),i=t.prop;if(void 0===i){const t=$("<img>"),a=$(`<img role="button" src="${Y("trash")}" data-i18n="[alt]btn.remove_challenge.name;[title]btn.remove_challenge.name">`).data("feature",e).on("click",ge),i=null==(n=e.get("service"))?void 0:n.toLowerCase(),r=null==(s=e.get("eligible"))?void 0:s.toLowerCase();if(void 0!==i)t.attr("src",Y(i)).attr("data-i18n",`[alt]feature.value.${i};[title]feature.value.${i}`);else{const e="y"===r?"eligible":"not_eligible";t.attr("src",Y(`${r}-eligible`)).attr("data-i18n",`[alt]feature.value.${e};[title]feature.value.${e}`)}o.append(t).append(a)}else{const a=e.get(i);if(t.decode&&void 0!==a){const e=(a+"").toLowerCase();o.attr("data-i18n",`feature.value.${e}`)}else o.html(a).addClass(void 0===a?"empty":"")}a.append(o)}))}));const s=$("#container"),o=$('<div class="challenge-table" style="display:none"></div>'),i=$('<button class="btn btn-primary back" data-i18n="[aria-label]btn.back.name;[title]btn.back.name"></button>').on("click",(()=>{$("body").removeClass("challenge-table"),o.slideUp((()=>{o.remove(),s.attr("aria-hidden",!1)}))}));$(t.find("thead th").get(0)).append(i),o.append(t).css("top",s.get(0).offsetTop+"px"),$("body").addClass("challenge-table").append(o),o.localize().slideDown((()=>s.attr("aria-hidden",!0)))}(X().getSource().getFeatures())}function ke(e){e.preventDefault(),function(){const e=`data:text/csv;charset=utf-8,${ve()}`,t=$('<a class="csv-download"><img></a>');$("body").append(t),t.attr({href:e,download:"Illinois-BEAD-challenge.csv"}).find("img").trigger("click"),t.remove()}()}function Ue(e){e.preventDefault(),function(){let e=$("#load-csv");0===e.length&&(e=$('<input id="load-csv" type="file">'),$("body").append(e),e.on("change",we)),e.trigger("click")}()}function Ge(e){if(e){const e=X().getSource();e.getFeatures().forEach((t=>{t.set("challenge",!1),e.removeFeature(t)})),Ie(),Be(!0)}}function ze(e){var t;e.preventDefault(),t=Ge,$e.attr("data-i18n","dialog.delete").localize(),Ce.show().one("click",(()=>Le(t,!0))),Te.show().one("click",(()=>Le(t,!1))),Re.hide(),$("#dialog .always").hide(),Se.show()}function Ne(e){e.preventDefault(),function(){const e=new Date("Jan 8 2023 00:00:00 CST");$e.html(`&nbsp;${e.toLocaleString()}`).attr("data-i18n","[prepend]dialog.premature").localize(),Ce.hide(),Te.hide(),Re.show().on("click",(()=>Se.hide())),$("#dialog .always").hide(),Se.show()}()}function Me(e,t){!function(e){const t={};["delete","table","save","open"].forEach((a=>{const n=$('<button class="btn btn-primary"></button>').attr("data-i18n",`[title]form.challenges.${a};[aria-label]form.challenges.${a}`).prop("disabled","open"!==a).addClass(`sm ${a}`);t[a]=n,e.append(n)})),t.save.on("click",ke),t.open.on("click",Ue),t.table.on("click",Oe),t.delete.on("click",ze)}(e),Be(!t),function(e){const t=new Date("Jan 8 2023 00:00:00 CST").getTime();(new Date).getTime()>t?e.on("submit",Pe):e.on("submit",Ne)}(e),e.localize()}xe.on("change",(()=>{var e;e=xe.is(":checked"),localStorage.setItem("always",e)})),$("#challenge-tab").on("show.bs.tab",(()=>{$("#locate")[$(window).width()<972?"hide":"show"]()})),$("#challenge-tab").on("hide.bs.tab",(()=>$("#locate").show()));const qe=$('<div id="popup" class="popup"><a href="#" id="popup-closer" class="popup-closer" data-i18n=[aria-label]btn.close.name}" rel="noopener">&#10006;</a><div id="popup-content"></div></div>');function Ye(e){e.setPosition(void 0),$("#popup").css("opacity",0).show()}function Je(e){if(Q().active){const t=e.map,a=[];t.forEachFeatureAtPixel(e.pixel,((e,t)=>{t.get("name");const n=t.get("featureHtml");a.push(n(e,"popup"))}),{layerFilter:te,hitTolerance:50}),function(e,t,a){const n=$("#popup").attr("dir",$("html").attr("dir")),s=e.get("popupOverlay"),o=$("#popup-content");if(a.length>0){const e=a[0];o.empty().append(e).data("htmlFeatures",a),s.setPosition(t),n.animate({opacity:1}),$("#popup-closer").one("click",(e=>{n.fadeOut((()=>Ye(s)))}))}}(t,e.coordinate,a)}}function je(e){$("#popup"),this.active=e,setTimeout((()=>{Ye(this),e||$("popup").hide()}),500)}function Ze(){setTimeout((()=>{Q().panIntoView()}),500)}const Ke=["location","challenge","popup"];function Xe(e){const t=e.max_up;return"0"==`${t}`?'<span data-i18n="feature.value.unkown"/>':t+"/"+e.max_down+" mb/s"}function We(e,t){const a=[],n=t?"button.challenge":"";return Ke.forEach((t=>{"challenge"!==t&&a.push(`#${He(e,t)} ${n}`)})),$(a.join())}function He(e,t){return`${t}-${e.getId()}`}function Qe(e,t){const a=e.get("challenge"),n=$(`<button class="btn btn-primary challenge" data-i18n="${a?"btn.remove_challenge.name":"btn.add_challenge.name"}"></button>`).on("click",a?Ve:Fe).data("feature",e);t.append(n)}function et(e){const t=e.feature,a=null!==ut.getFeatureById(t.getId()),n=t.get("challenge"),s=We(t,!0);if(a)s.each(((e,t)=>{const a=$('<div class="submitted" data-i18n="feature.value.submitted"></div>');$(t).replaceWith(a.localize())}));else{const e=n?"btn.remove_challenge.name":"btn.add_challenge.name";s.attr("data-i18n",e).off("click",n?Fe:Ve).on("click",n?Ve:Fe).localize()}Ze(),function(e,t){const a=We(e),n=t?"addClass":"removeClass";a.each(((e,t)=>{const a=$(t).parent();if("LI"===a.prop("nodeName"))a[n]("challenge");else{const e=J().get("popupOverlay").getElement();$(e)[n]("challenge")}}))}(t,!a||n),"addfeature"===e.type&&Be(!1)}function tt(e){const t=e.get("distance");if(void 0!==t){const e=$('<label data-i18n="feature.value.distance"></label>').localize(),a=(t/1609.34).toFixed(2);return $(`<div class="distance">${a} mi</div>`).attr("aria-label",`${a} ${e.html()}`)}return""}function at(e,t){return e.replace(t,"")}const nt={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,null%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},st=nt.VITE_BSL_PROVIDER_URL,ot=nt.VITE_PROVIDER_URL;function it(e,t){console.error({message:`Could not fetch providers for Location_ID=${t.get("lid")}`,error:e})}function rt(e){const t=$(e.target),a=t.data("feature"),n=t.find("tbody");void 0===a.get("providers")&&(t.addClass("loading"),function(e){return new Promise(((t,a)=>{if(void 0!==e.get("providers"))t(e);else{const a=encodeURIComponent(`location_id=${e.get("lid")}`);fetch(`${st}&where=${a}`).then((a=>{a.json().then((a=>{const n=[];if(a.features.forEach((e=>{n.push(e.properties.provider_id)})),n.length>0){const a=encodeURIComponent(`provider_id IN (${n.join()})`);fetch(`${ot}&where=${a}`).then((a=>{a.json().then((a=>{const n=[];a.features.forEach((e=>{n.push(e.properties)})),e.set("providers",n,!0),t(e)}))})).catch((t=>it(t,e)))}else e.set("providers",[]),t(e)}))})).catch((t=>it(t,e)))}}))}(a).then((e=>{const a=e.get("providers");a.length>0?a.forEach((e=>{const t=$("<tr></tr>").append(`<td>${e.name}</td>`).append(`<td>${e.tech}</td>`).append(`<td>${Xe(e)}</td>`);n.append(t)})):n.append('<tr><td  colspan="3" data-i18n="feature.value.unserved"></td></tr>').localize(),t.removeClass("loading"),Ze()})).catch((e=>it(e,a))))}function lt(e,t){var a;const n=He(e,t),s=null!==ut.getFeatureById(e.getId()),o=e.get("lid"),i=`${e.get("city")}, <span data-i18n="feature.value.addr_state"></span> ${e.get("zip")}`,r=at(e.get("addr"),i),l=null==(a=e.get("service"))?void 0:a.toLowerCase(),c=1===e.get("enforce")?"y":"n",d=e.get("mdu"),u=$(`<div id="${n}" class="feature-html ${`bsl ${t} ${l} ${c}`}"><h4 data-i18n="[prepend]layer.bsl.name"></h4></div>`).append(tt(e)).append(`<div class="addr">${r}<br>${i}</div>`).append(`<div class="county">${e.get("county")} COUNTY</div>`).append(`<div class="location-id"><span class="field" data-i18n="[prepend]feature.field.id">:</span> <span>${o}</span></div>`).append(`<div class="enfoce"><span class="field" data-i18n="[prepend]feature.field.enforce">:</span> <span data-i18n="feature.value.${c}"></span></div>`).append(function(e){var t,a;const n=$('<span class="fund"><span class="field" data-i18n="[prepend]feature.field.fund">:</span></span>'),s=null==(t=e.get("fed_fund"))?void 0:t.toLowerCase(),o=null==(a=e.get("state_fund"))?void 0:a.toLowerCase();return s&&n.append(`<span data-i18n="feature.value.${s}"></span>`),o&&(s&&n.append(", "),n.append(`<span data-i18n="feature.value.${o}"></span>`)),n.children().length>0?n:""}(e)).append(`<div class="service"><span class="field" data-i18n="[prepend]feature.field.service">:</span> <span data-i18n="feature.value.${l}"></span></div>`).append(d>1?`<div class="mdu"><span class="field" data-i18n="[prepend]feature.field.mdu">:</span> <span>${d}</span></div>`:"").append(function(e){const t=`prov-${e.getId()}`,a=$(`<table id="${t}" class="collapse hide provider">\n    <thead>\n      <th data-i18n="feature.field.provider"/>\n      <th data-i18n="feature.field.tech"/>\n      <th data-i18n="feature.field.speed"/>\n    </thead>\n    <tbody></tbody>\n  </table>`).data("feature",e),n=$(`<button\n    type="button"\n    class="btn btn-primary providers"\n    data-bs-toggle="collapse"\n    data-bs-target="#${t}"\n    aria-expanded="false"\n    data-i18n="btn.providers.name">\n  </button>`);return a.get(0).addEventListener("show.bs.collapse",rt),[n,a]}(e));return s?u.append('<div class="submitted" data-i18n="feature.value.submitted"></div>'):Qe(e,u),u.localize()}function ct(e,t){const a=He(e,t),n=0===e.get("lid")?e.get("lid"):'<span data-i18n="feature.value.unavailable"/>',s=null!==ut.getFeatureById(e.getId()),o=`${e.get("city")}, <span data-i18n="feature.value.addr_state"></span> ${e.get("zip")}`,i=at(e.get("addr"),o),r=e.get("eligible").toLowerCase(),l=e.get("type").toLowerCase(),c=Xe(e.getProperties()),d=$(`<div id="${a}" class="feature-html ${`cai ${t} ${r}`}"><h4 data-i18n="layer.cai.name"></h4></div>`).append(tt(e)).append(`<div class="addr">${i}<br>${o}</div>`).append(`<div class="county">${e.get("county")} COUNTY</div>`).append(`<div class="location-id"><span class="field" data-i18n="[prepend]feature.field.id">:</span> <span>${n}</span></div>`).append(`<div class="eligible"><span class="field" data-i18n="[prepend]feature.field.eligible">:</span> <span data-i18n="feature.value.${r}"></span></div>`).append(`<div class="type"><span class="field" data-i18n="[prepend]feature.field.type">:</span> <span data-i18n="feature.value.${l}"></span></div>`).append(`<div class="speed"><span class="field" data-i18n="[prepend]feature.field.speed">:</span> <span>${c}</span></div>`);return s?d.append('<div class="submitted" data-i18n="feature.value.submitted"></div>'):Qe(e,d),d.localize()}function dt(e){return e.getId().indexOf("bsl")?lt(e):ct(e)}const ut=new r;function pt(e){const t=new r;e?function(e){ye(e,be())}(t):Ie();const a=new l({source:t,style:pe,minZoom:12});return a.set("name","challengeLayer"),a.set("featureHtml",dt),t.on("addfeature",et),t.on("removefeature",et),a}ye(ut,function(){const e=localStorage.getItem("submission");return null!==e?JSON.parse(e):{type:"FeatureCollection",features:[]}}());class ft extends d{constructor(e){super(e),this.idPrefix=e.idPrefix,this.idProp=e.idProp}readFeatureFromObject(e,t){const a=super.readFeatureFromObject(e,t);return a.setId(this.idPrefix+a.get(this.idProp)),a}}class gt extends ft{constructor(e){super(e)}getType(){return"arraybuffer"}readFeature(e,t){const a=g(new Uint8Array(e));return super.readFeature(a.featureCollection,t)}readFeatures(e,t){const a=g(new Uint8Array(e));return super.readFeatures(a.featureCollection,t)}}class mt extends r{constructor(e){super(e),this.filterUrl=e.url}loadFeatures(e,t,a){const n=setInterval((()=>{this.loading||(clearInterval(n),this.dispatchEvent("loadcomplete"))}),100);super.loadFeatures(e,t,a)}filter(e){this.setUrl(((t,a,n)=>this.filterUrl(t,a,n,e))),this.refresh()}}class ht extends m{constructor(e){super(e),this.style=e.style}createRenderer(){return new h(this,{style:this.style})}getStyle(){return this.style}}const vt=[{filter:["==",["get","service"],"SERVED"],"icon-src":Y("served"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]},{filter:["==",["get","service"],"UNDERSERVED"],"icon-src":Y("underserved"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]},{filter:["==",["get","service"],"UNSERVED"],"icon-src":Y("unserved"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]}];const _t={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,null%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},bt=`${_t.VITE_BSL_URL}&token=${_t.VITE_ARC_TOKEN}`;function yt(e){const t={},a=$(e.target),n=a.hasClass("enforce")?"input.filter.enforce":"input.filter.mdu";$(n).prop("checked",a.is(":checked")),$("input.filter").each(((e,a)=>{$(a).is(":checked")&&(t[$(a).data("where")]=!0)}));const s=a.data("layer").getSource(),o=Object.keys(t).join(" AND ");s.filter(o)}function It(e,t){e.add(t).data("layer",Z()).on("change",yt),e.data("where","enforceable_commitment = 1"),t.data("where","mdu > 1")}const Et=new ht({source:new mt({format:new gt({dataProjection:"EPSG:3857",idPrefix:"bsl-",idProp:"lid"}),url:function(e,t,a,n){return ae(bt,e,n)},strategy:v}),style:vt,minZoom:14});Et.set("name","bsl"),Et.set("featureHtml",lt);const wt={"stroke-color":"rgb(17, 26, 82)","stroke-width":3},St=new ht({source:new r({format:new _,url:"data/boundary.json"}),style:wt,minZoom:4,maxZoom:5}),$t={"stroke-color":"rgba(17, 26, 82, .25)","stroke-width":3,"fill-color":"rgba(17, 26, 82, 0.1)"};const Ct={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,null%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Tt=`${Ct.VITE_BG_URL}&token=${Ct.VITE_ARC_TOKEN}`;const Rt=new ht({source:new r({format:new gt({dataProjection:"EPSG:3857",idPrefix:"bg-",idProp:"FID"}),url:function(e,t,a){return ae(Tt,e)},strategy:b(y({tileSize:512}))}),style:$t,minZoom:10,visible:!1});Rt.set("name","bg");const xt=[{filter:["==",["get","eligible"],"Y"],"icon-src":Y("y-eligible"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]},{filter:["==",["get","eligible"],"N"],"icon-src":Y("n-eligible"),"icon-size":[48,48],"icon-scale":["interpolate",["exponential",2],["zoom"],4,0,17,1]}];const Lt={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,null%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},At=`${Lt.VITE_CAI_URL}&token=${Lt.VITE_ARC_TOKEN}`;const Dt=new ht({source:new mt({format:new gt({dataProjection:"EPSG:3857",idPrefix:"cai-",idProp:"OBJECTID"}),url:function(e,t,a){return ae(At,e)},strategy:v}),style:xt,minZoom:14});Dt.set("name","cai"),Dt.set("featureHtml",ct);const Pt="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",Ft={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,null%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Bt=Ft.VITE_ARC_TOKEN,Vt=encodeURIComponent(Ft.VITE_SEARCH_EXTENT),Ot=`findAddressCandidates?f=pjson&outSR=3857&token=${Bt}&searchExtent=${Vt}&singleLine=`,kt=`suggest?f=json&token=${Bt}&searchExtent=${Vt}&text=`;function Ut(e){const t=$("#search").val();e.preventDefault(),$("#locate button").addClass("loading"),$("#possible").slideUp(),function(e){const t=`${Pt}${Ot}${encodeURIComponent(e)}`;return new Promise(((e,a)=>{fetch(t).then((t=>{t.json().then((t=>{t.error&&a(t.error),e(t.candidates)})).catch((e=>{console.error(e),a(e)}))})).catch((e=>{console.error(e),a(e)}))}))}(t).then((t=>{t.length>0&&(1===t.length||100===t[0].score?Nt(t[0],$(e.target).data("view")):function(e){zt(e,"address")}(t))})).catch((e=>console.error(e)))}function Gt(e){if("Enter"!==e.code){const e=$("#search").val();e.length>3&&function(e){const t=`${Pt}${kt}${encodeURIComponent(e)}`;return new Promise(((e,a)=>{fetch(t).then((t=>{t.json().then((t=>{t.error&&a(t.error),e(t.suggestions)})).catch((e=>{console.error(e),a(e)}))})).catch((e=>{console.error(e),a(e)}))}))}(e).then((e=>{!function(e){zt(e,"text")}(e)})).catch((e=>console.error(e)))}}function zt(e,t){const a={},n=$("#possible").empty();e.forEach((e=>{const s=e[t];if(!a[s]){const e=$(`<li class="list-group-item">${s}</li>`);a[s]=!0,e.on("click",(t=>{n.slideUp(),$("#search").val(e.html()),$("#locate").trigger("submit")})),n.append(e)}})),n.slideDown()}function Nt(e,t){const a=[e.location.x,e.location.y];if(n=t.getCenter(),s=a,n[0]!==s[0]||n[1]!==s[1]){const n=e.address,s=ne();s.setPosition(a),t.animate({zoom:16,center:a},(()=>{$(s.getElement()).attr("title",n).attr("aria-label",n)})),function(e){localStorage.setItem("location",JSON.stringify(e))}(e)}else $("#locate button").removeClass("loading");var n,s}function Mt(e,t,n){const s=$('<div class="form-group search-map"><ul id="possible" class="list-group"></ul><button type="submit" class="btn btn-primary" data-i18n="[aria-label]search"><div></div></button></div>'),o=$('<input type="text" class="form-control" id="search" data-i18n="[placeholder]form.search.placeholder;[aria-label]form.search.placeholder">');t.prepend(s.prepend(o)).localize(),$("body").append('<div id="location" class="location"></div>'),o.on("click",(()=>o.select())),$(document).on("click",(()=>$("#possible").slideUp()));const i=new a({element:$("#location").get(0),offset:[-16,-28],className:"overlay-0 ol ol-overlay-container ol-selectable"}),r=e.getView();if(e.addOverlay(i),e.set("locationOverlay",i),$(t).data("view",r).on("submit",Ut),$("#search").on("keyup",Gt),n){$("#locate button").addClass("loading");const e=function(){const e=localStorage.getItem("location");if(null!==e)return JSON.parse(e)}();Nt(e,r),$("#search").val(e.address)}}const qt=$('<div id="wait"></div>');$("body").append(qt);const Yt=new a({element:qt.get(0),offset:[-20,-20],className:"overlay-3 ol ol-overlay-container ol-selectable"});window.waitOverlay=Yt;class Jt extends w{constructor(e){const t=$('<button data-i18n="btn.add_challenge.name"></button>');super({element:$('<div class="add-selection ol-unselectable ol-control"></div>').append(t).localize().get(0)}),this.selectedSource=e.selectedSource,this.challengeSource=e.challengeSource,t.on("click",this.addChallenges.bind(this)),this.selectedSource.on("change",this.hideShow.bind(this))}hideShow(){const e=this.selectedSource.getFeatures();$(".add-selection")[e.length>0?"fadeIn":"fadeOut"]()}addChallenges(){const e=this.getMap().getView();Yt.setPosition(e.getCenter()),setTimeout((()=>{this.selectedSource.getFeatures().forEach((e=>{Fe(e)})),this.selectedSource.clear(),Yt.setPosition(void 0)}),100)}}function jt(e){const t=J();if(function(e){return e.getControls().getArray().filter((e=>e.get("select")))[0].getActive()}(t)){const a=W().getSource(),n=H().getSource();let s=!0;t.forEachFeatureAtPixel(e.pixel,((e,t)=>{s=!1;const n=e.getId();if(!(null!==ut.getFeatureById(n))&&void 0!==n){const t=a.getFeatureById(n);null===t?a.addFeature(e):a.removeFeature(t)}}),{layerFilter:te}),s&&(a.clear(),n.clear())}}function Zt(e){const t=e.feature.getGeometry(),a=Wt();Yt.setPosition(J().getView().getCenter()),setTimeout((()=>{!function(e,t){const a=W().getSource();t.forEach((t=>{if(null===ut.getFeatureById(t.getId())){const n=t.getGeometry().getCoordinates();e.intersectsCoordinate(n)&&a.addFeature(t)}})),Yt.setPosition(void 0)}(t,a)}),100)}function Kt(e,t){const a=t.getGeometry().getCoordinates(),n=new S([e,a]).getLength();t.set("distance",n)}function Xt(e){const t=ne().getPosition();if(t){if(1===e.length)return Kt(t,e[0]),e;e.sort(((e,a)=>{Kt(t,e),Kt(t,a);const n=e.get("distance"),s=a.get("distance");return n<s?-1:n>s?1:0}))}return e}function Wt(){const e=J(),t=e.getView(),a=j(),n=Z(),s=a.getSource(),o=n.getSource(),i=t.calculateExtent(e.getSize()),r=a.getVisible()?s.getFeaturesInExtent(i):[],l=n.getVisible()?o.getFeaturesInExtent(i):[];return Xt(r.concat(l))}function Ht(e){const t=N.locationTab.find("form"),a=$('button[aria-controls="how-it-works"]'),n="true"===a.attr("aria-expanded"),s=e.children().length>0;t.show(),n&&s&&a.trigger("click"),n||s||a.trigger("click")}function Qt(e,t){t.find("form");const a=e.children().length>0;t.find(".message")[a?"hide":"show"]()}function ea(e,t,a){const n=$('<li class="list-group-item"></li>').addClass(t.getId().indexOf("cai")>-1?"cai":"bsl").append(a(t,"location"));e.append(n)}function ta(){const e=$("#location-list").empty(),t=Wt(),a=j().get("featureHtml"),n=Z().get("featureHtml");t.forEach((t=>{t.getId().indexOf("cai")>-1?ea(e,t,a):ea(e,t,n)})),Ht(e),$("#locate button").removeClass("loading")}function aa(e){const t=e.feature;$(`#${He(t,"challenge")}`).parent().remove(),Qt($("#challenge-list"),ee())}function na(e){const t=Z(),a=j(),n=e.feature||e,s=(-1===n.getId().indexOf("bsl")?a:t).get("featureHtml"),o=$("#challenge-list"),i=$('<li class="list-group-item"></li>').append(s(n,"challenge"));o.append(i),Qt(o,ee())}const sa={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,null%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},oa=`${sa.VITE_BASEMAP_URL}?token=${sa.VITE_ARC_TOKEN}`;function ia(t,a){return new Promise(((n,s)=>{x((()=>import("./index-icFe-1_9.js")),__vite__mapDeps([0,1]),import.meta.url).then((o=>new Promise((()=>{o.apply(t,`${oa}&language=${e.language}`).then((e=>{const t=pt(a),s=Et.getSource(),o=Dt.getSource();s.on("loadcomplete",ta),o.on("loadcomplete",ta),Et.on("change:visible",ta),Dt.on("change:visible",ta),e.addLayer(St),e.addLayer(Rt),e.addLayer(de),e.addLayer(ue),e.addLayer(t),e.addLayer(Et),e.addLayer(Dt),e.set("bgLayer",Rt),e.set("selectLayer",de),e.set("drawLayer",ue),e.set("caiLayer",Dt),e.set("bslLayer",Et),e.set("challengeLayer",t),n(e)})).catch((e=>{console.error(e),s(e)}))})))).catch((e=>{console.error(e),s(e)}))}))}function ra(e){const t=$(e.target),a=$("#map-tab"),n=$("#map"),s=$("#map-container"),o=t.get(0)===a.get(0),i=a.is(":visible");i&&!o?$("body").append(s.addClass("wayout")):i&&o?n.append(s.removeClass("wayout")):s.removeClass("wayout")}window.dealWithMap=ra,$(".nav-link").on("click",ra);class la extends a{constructor(e){const t=$(e.map.getTargetElement()).find(".feature-tip").get(0);super({id:q("feature-tip"),element:t||$(la.HTML).get(0),offset:[5,5],className:"overlay-1 ol ol-overlay-container ol-selectable"}),this.setMap(e.map),this.map=this.getMap(),this.tip=$(this.getElement()),this.addTips(e.tips),this.map.on("pointermove",this.label.bind(this))}hide(){this.tip.fadeOut((()=>{this.setPosition(void 0)}))}addTips(e){e.forEach((e=>{e.layer.tip=e.label}))}out(e){$.contains(this.map.getTargetElement(),e.target)||this.hide()}label(e){const t=this.map.forEachFeatureAtPixel(e.pixel,((e,t)=>t&&t.getVisible()&&t.tip?t.tip(e):null));t?(this.tip.html(t.html),this.tip.addClass(t.css),this.setPosition(e.coordinate),this.tip.localize().show(),this.position()):this.hide()}position(){const e=this.map.getSize(),t=this.tip.width(),a=this.tip.height(),n=this.map.getPixelFromCoordinate(this.getPosition()),s=n[1]+a>e[1]?"bottom":"top",o=n[0]+t>e[0]?"right":"left";this.setPositioning(`${s}-${o}`)}}function ca(e){const t=e.get("name"),a=1===e.get("eligible")?"feature.value.eligible":"feature.value.not_eligible";const n=$("<div></div>").append(`<span class="name">${t}</span>`).append(` (<span class="tip-prop" data-i18n="${a}"></span>)`);return{html:$('<div><div class="title" data-i18n="layer.cai.name"></div></div>').append(n)}}function da(e){var t;const a=e.get("addr"),n=function(e){return"Y"===e?"feature.value.enforce":"feature.value.not_enforce"}(e.get("enforce")),s=e.get("fed_fund"),o=e.get("state_fund"),i=[];s&&i.push(s),o&&i.push(o);const r=null==(t=e.get("service"))?void 0:t.toLowerCase(),l=e.get("mdu"),c=$("<div></div>").append(`<div class="address">${a}</div>`).append(`(<span class="enforce" data-i18n="${n}" />`).append(i.length>0?`, <span class="fund">${i.join(", ")}</span>`:"").append(`, <span data-i18n="feature.value.${r}"></span>`).append(l>0?`, <span class="mdu">MDU ${l}</span>)`:")");return{html:$('<div><div class="title" data-i18n="layer.bsl.name"></div></div>').append(c)}}function ua(e){const t=e.get("tr"),a=e.get("bg");return{html:$(`<div>\n    <div class="title" data-i18n="[prepend]feature.field.tr"> ${t}</div>\n    <div class="title" data-i18n="[prepend]feature.field.bg"> ${a}</div>\n  </div>`)}}la.TipDef,la.LabelFunction,la.Label,la.Options,la.HTML='<div class="feature-tip" role="tooltip"></div>';class pa extends w{constructor(e){const t=$('<button class="legend-opener" data-i18n="[title]legend.name"></button>');super({element:$('<div class="legend ol-unselectable ol-control ol-collapsed"></div>').append(t).append(e).get(0)}),this.legend=e.hide(),this.button=t,t.on("click",this.show.bind(this)),e.find(".legend-closer").on("click",this.hide.bind(this))}show(){$(this.element).removeClass("ol-collapsed").addClass("ol-expanded").prop("dir",$("html").prop("dir")),this.button.hide(),this.legend.fadeIn()}hide(){this.legend.fadeOut((()=>{$(this.element).removeClass("ol-expanded").addClass("ol-collapsed"),this.button.show()}))}}function fa(e){const t=$(e.target),a=t.data("layer"),n=t.is(":checked"),s=a.get("name");a.setVisible(n),$(`#location-list li.${s}`)[n?"show":"hide"]()}var ga={VITE_SUBMIT_DATE:"Jan 8 2023 00:00:00 CST",VITE_CENTER:"[-9963555, 4836210]",VITE_ZOOM:"5",VITE_SEARCH_EXTENT:'{"xmin":-10190000,"ymin":4420000,"xmax":-9750000,"ymax":52390000,"spatialReference":{"wkid":102100,"latestWkid":3857}}',VITE_LANGUAGES:'["en", "es"]',VITE_ARC_TOKEN:"AAPK075a045352e64bd583ef4645224e213fBIBCnmrqPubNPP2Sxmi9DxqvDgDZBX1Toq4nMJu4bYGkd_TyL-Oaf426BVzX5-UW",VITE_BASEMAP_URL:"https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/osm/light-gray",VITE_CAI_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_CAI_2023_12_06_Final/FeatureServer/1/query?f=pbf&outSR=3857&outFields=OBJECTID,locationid%20as%20lid,name,type,address%20as%20addr,city,zipcode%20as%20zip,county,eligibility%20as%20eligible,max_download%20as%20max_down,max_upload%20as%20max_up",VITE_BSL_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_BSLFile_2023_12_06_Final/FeatureServer/0/query?f=pbf&outSR=3857&outFields=locationid%20as%20lid,address%20as%20addr,city,zipcode%20as%20zip,county,serviceability%20as%20service,enforceable_commitment%20as%20enforce,funding_program%20as%20fed_fund,null%20as%20state_fund,mdu",VITE_BG_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/Block_Groups_2020_US_Census_Bureau/FeatureServer/0/query?f=pbf&outSR=3857&outFields=FID,BLKGRP%20as%20bg,TRACT%20as%20tr,Shape__Area%20as%20area",VITE_BSL_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/arcgis/rest/services/IL_June2023BDC_LocationID_with_ProviderID/FeatureServer/22/query?f=geojson&outFields=provider_id",VITE_PROVIDER_URL:"https://services.arcgis.com/R0IGaIgf2sox9aCY/ArcGIS/rest/services/IL_June2023BDC_Providers_with_ProviderID/FeatureServer/4/query?f=geojson&outFields=brand_name%20as%20name,technology%20as%20tech,max_download_speed%20as%20max_down,max_upload_speed%20as%20max_up&orderByFields=brand_name%20ASC,technology%20ASC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ma=new C({target:"map-container"});function ha(e){const t=$("#locations"),n=$("#challenges");M(ma,t,n),ia(ma,e).then((s=>{if(function(){const e=ma.getControls().getArray().filter((e=>e instanceof T))[0];ma.removeControl(e)}(),function(){let e=!0;const t=$(".col-sm-4");$(window).on("resize",(a=>{const n=$("#map-container");$(window).width()>972?($(".col-sm-8").append(n),t.addClass("col-sm-4"),$("#location-tab").trigger("click")):($("#map").append(n),t.removeClass("col-sm-4"),e&&(e=!1,$("#location-tab").trigger("click")))}))}(),Me($("#challenge"),e),Mt(s,$("#locate"),e),function(e,t,a){e.getView();const n=X().getSource(),s=$('<ul id="location-list" class="list-group"></ul>'),o=$('<ul id="challenge-list" class="list-group"></ul>');t.append(s),a.append(o),It(t.find("input.enforce"),t.find("input.mdu")),n.on("addfeature",na),n.on("removefeature",aa),n.getFeatures().forEach((e=>{na(e)}))}(s,t,n),function(e){const t=W(),a=H().getSource(),n=t.getSource(),s=X().getSource();Q();const o=new I({source:a,type:"Polygon",freehand:!0,style:re}),i=new E({className:"select",interaction:o,active:!1,onToggle:t=>{H().setVisible(t),Q().setActive(!t),$(e.getTargetElement())[t?"addClass":"removeClass"]("draw-select")}});$(i.getButtonElement()).addClass("select-button"),i.set("select",!0),e.addOverlay(Yt),e.addControl(i),e.addInteraction(o),e.addControl(new Jt({selectedSource:n,challengeSource:s})),o.on("drawend",Zt),e.on("singleclick",jt)}(s),function(e){new la({map:e,tips:[{layer:j(),label:ca},{layer:Z(),label:da},{layer:K(),label:ua}]})}(s),oe(s),function(e){$("body").append(qe);const t=$("#popup"),n=new a({element:t.get(0),autoPan:{animation:{duration:250}},className:"overlay-2 ol ol-overlay-container ol-selectable"});n.active=!0,n.setActive=je,$("#popup-content").data("map",e),e.addOverlay(n),e.set("popupOverlay",n),e.on("singleclick",Je)}(s),function(e){const t=$("#legend"),a=e.getView();t.find("#cai-check").data("layer",j()).on("change",fa),t.find("#bsl-check").data("layer",Z()).on("change",fa),t.find("#bg-check").data("layer",K()).on("change",fa),a.on("change:resolution",(()=>{const e=a.getZoom();t.find("input").each(((t,a)=>{const n=$(a).data("layer");if($(a).prop("disabled",e<=n.getMinZoom()),"checkbox"===$(a).attr("type")){const e=a.id;"enforce-check"!==e&&"mdu-check"!==e&&$(a).prop("checked",n.getVisible())}}))})),new pa(t).setMap(e),It(t.find("input.enforce"),t.find("input.mdu"))}(s),!e){const e=s.getView(),t=ga,a=JSON.parse(t.VITE_CENTER),n=1*t.VITE_ZOOM;e.setZoom(n),e.setCenter(a)}s.once("postrender",(()=>{$("body").removeClass("loading"),$(window).trigger("resize"),$("#search").trigger("focus")})),function(){const e=JSON.parse('["en", "es"]');let t=0,a=0;const n=$(".banner .dropdown .btn-primary"),s=setInterval((()=>{t=t<e.length-1?t+1:0,a+=1,a===10*e.length?(n.attr("data-i18n","translate").localize(),clearInterval(s)):n.attr("data-i18n",`translate.${e[t]}`).localize()}),1e3)}()}))}$(".ol-attribution button").addClass("attribution"),new Promise(((a,n)=>{const s=function(){const e=document.location.search,t={};return e&&e.substring(1).split("&").forEach((e=>{const a=e.split("=");t[a[0]]=a[1]})),(t.locale||navigator.language).split("-")[0]}(),o={en:A};(function(e){return new Promise(((t,a)=>{e!==P?L(Object.assign({"./en/translation.js":()=>x((()=>Promise.resolve().then((()=>D))),void 0,import.meta.url),"./es/translation.js":()=>x((()=>import("./translation-gsT8U7ge.js")),__vite__mapDeps([]),import.meta.url),"./he/translation.js":()=>x((()=>import("./translation-K_xsQ7Z2.js")),__vite__mapDeps([]),import.meta.url)}),`./${e}/translation.js`).then((a=>{void 0!==a&&t({locale:e,translation:a})})).catch((a=>{console.warn(`No translations for locale="${e}"`),t({locale:P})})):t({locale:P})}))})(s).then((n=>{const s=n.locale;s!==P&&(o[s]=n.translation.default,$("#map-container").attr("dir","ltr"),$("html").attr("lang",s).attr("dir",o[s].translation.dir||"ltr")),e.init({defaultLocale:P,fallbackLng:P,defaultNS:"translation",resources:o,lng:s},((n,s)=>{t.init(e,$,{useOptionsAttr:!0}),$("[data-i18n]").localize(),a(o)}))}))})).catch((e=>console.error("Failed to initialize i18n"))).then((()=>{var e;void 0!==be()?"true"===localStorage.getItem("always")?ha(!0):(e=ha,$e.attr("data-i18n","dialog.restore").localize(),Ce.show().one("click",(()=>Le(e,!0))),Te.show().one("click",(()=>Le(e,!1))),Re.hide(),$("#dialog .always").show(),Se.show()):ha(!1)}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-icFe-1_9.js","./vendor-QVWB1rBW.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}