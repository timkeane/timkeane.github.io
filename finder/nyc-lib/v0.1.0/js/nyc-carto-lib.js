/*

nyc-carto-lib-v0.1.0

*/
var nyc=nyc||{};if(typeof proj4!="undefined")proj4.defs("EPSG:2263","+proj\x3dlcc +lat_1\x3d41.03333333333333 +lat_2\x3d40.66666666666666 +lat_0\x3d40.16666666666666 +lon_0\x3d-74 +x_0\x3d300000.0000000001 +y_0\x3d0 +ellps\x3dGRS80 +datum\x3dNAD83 +units\x3dft +to_meter\x3d0.3048006096012192 +no_defs");nyc.inherits=function(childCtor,parentCtor){for(var member in parentCtor.prototype)if(!(member in childCtor.prototype))childCtor.prototype[member]=parentCtor.prototype[member]};nyc.ReplaceTokens=function(){};
nyc.ReplaceTokens.prototype={replace:function(str,values){for(var name in values)str=str.replace(new RegExp("\\$\\{"+name+"\\}","g"),values[name]);return str}};nyc.EventHandling=function(){};
nyc.EventHandling.prototype={on:function(eventName,evtHdlr,hdlrScope){this.addHdlr(eventName,evtHdlr,hdlrScope)},one:function(eventName,evtHdlr,hdlrScope){this.addHdlr(eventName,evtHdlr,hdlrScope,true)},trigger:function(eventName,data){this.evtHdlrs=this.evtHdlrs||{};var handlers=this.evtHdlrs[eventName],remove=[];if(handlers){$.each(handlers,function(index,hdlr){if(hdlr.scope)hdlr.handler.call(hdlr.scope,data);else hdlr.handler(data);if(hdlr.remove)remove.push(hdlr)});$.each(remove,function(_,hdlr){handlers.splice($.inArray(hdlr,
handlers),1)})}},off:function(eventName,evtHdlr,hdlrScope){this.evtHdlrs=this.evtHdlrs||{};var handlers=this.evtHdlrs[eventName];$.each(handlers,function(index,hdlr){if(hdlr.handler===evtHdlr&&hdlr.scope===hdlrScope){handlers.splice(index,1);return false}})},addHdlr:function(eventName,evtHdlr,hdlrScope,one){this.evtHdlrs=this.evtHdlrs||{};this.evtHdlrs[eventName]=this.evtHdlrs[eventName]||[];this.evtHdlrs[eventName].push({handler:evtHdlr,scope:hdlrScope,remove:one})}};var nyc=nyc||{};
nyc.util={isIe:function(){return"ActiveXObject"in window},isIos:function(){return navigator.userAgent.match(/(iPad|iPhone|iPod|iOS)/g)!=null},isSafari:function(){return navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1},formatNumberHtml:function(options){var elems=$(options.elements);if("toLocaleString"in Number)elems.each(function(_,n){var num=$(n).html();if(num.trim()){var opts=options.options||{};if(!options.options&&num.indexOf(".")>-1)opts={style:"decimal",minimumFractionDigits:4};
if(!isNaN(num)&&navigator.language){var lang=options.lang||navigator.language;num=(new Number(num)).toLocaleString(lang,opts);$(n).html(num)}}});return elems},preventDblEventHandler:function(event,handler,scope){var target=$(event.target),last=target.data("last-click"),now=(new Date).getTime();if(last*1+600<now||!last)if(scope)handler.apply(scope,[event]);else handler(event);target.data("last-click",now)}};nyc.util.FormatNumberHtmlOptions;var nyc=nyc||{};nyc.Collapsible=function(options){var heading=$("\x3ch3\x3e\x3c/h3\x3e");this.currentVal=$('\x3cspan class\x3d"current-value"\x3e\x3c/span\x3e');heading.html(options.title||"").append(this.currentVal);$(options.target).prepend(heading).collapsible().collapsible("option",{collapsedIcon:"carat-d",expandedIcon:"carat-u"})};nyc.Collapsible.prototype={currentVal:null};nyc.inherits(nyc.Collapsible,nyc.EventHandling);nyc.Collapsible.Options;var nyc=nyc||{};
nyc.Radio=function(options){var me=this,fieldset=$('\x3cfieldset data-role\x3d"controlgroup"\x3e\x3c/fieldset\x3e'),radio0;me.choices=options.choices;nyc.Radio.uniqueId++;me.inputs=[];$.each(me.choices,function(i,choice){var input=$('\x3cinput type\x3d"radio"\x3e').uniqueId(),label=$("\x3clabel\x3e\x3c/label\x3e");input.attr("name","nyc-radio-name"+"-"+nyc.Radio.uniqueId).attr("value",i);if(i==0){radio0=input;radio0.attr("checked",true)}input.click($.proxy(me.changed,me));label.attr("for",input.attr("id")).html(choice.label);
fieldset.append(input).append(label);me.inputs.push(input)});$(options.target).append(fieldset).trigger("create");nyc.Collapsible.apply(this,[options]);setTimeout(function(){me.changed({target:radio0[0]})},1)};
nyc.Radio.prototype={inputs:null,changed:function(event){var choice=this.choices[event.target.value*1];this.value=choice.value;this.currentVal.html(choice.label);this.trigger("change",choice)},val:function(){return this.value},disabled:function(choiceValue,disabled){var choiceIndex;$.each(this.choices,function(i,choice){if(choice.value==choiceValue){choiceIndex=i;return}});$(this.inputs[choiceIndex]).prop("disabled",disabled).checkboxradio("refresh")}};nyc.inherits(nyc.Radio,nyc.Collapsible);
nyc.Radio.uniqueId=0;var nyc=nyc||{};
nyc.MonthRangePicker=function(options){var labelMin=$("\x3clabel\x3eThe beginning of\x3c/label\x3e"),labelMax=$("\x3clabel\x3ethrough the end of\x3c/label\x3e");this.minDate=this.firstOfMonth(options.minMonth,options.minYear);this.maxDate=this.lastOfMonth(options.maxMonth,options.maxYear);this.minDates=[];this.maxDates=[];this.min=$('\x3cselect class\x3d"date-min"\x3e\x3c/select\x3e').uniqueId();this.max=$('\x3cselect class\x3d"date-max"\x3e\x3c/select\x3e').uniqueId();labelMin.attr("for",this.min.attr("id"));
labelMax.attr("for",this.max.attr("id"));$(options.target).append(labelMin).append(this.min).append(labelMax).append(this.max);nyc.Collapsible.apply(this,[options]);this.populate(options);this.min.get(0).selectedIndex=this.min.children().length-1;this.max.get(0).selectedIndex=this.max.children().length-1;this.min.selectmenu().selectmenu("refresh",true);this.max.selectmenu().selectmenu("refresh",true);$(this.min).change($.proxy(this.disableMax,this));$(this.max).change($.proxy(this.disableMin,this));
this.changed();this.disableMax()};
nyc.MonthRangePicker.prototype={minDate:null,maxDate:null,minDates:null,maxDates:null,min:null,max:null,value:null,months:["January","February","March","April","May","June","July","August","September","October","November","December"],populate:function(options){for(var year=options.minYear;year<=options.maxYear;year++)for(var month=0;month<12;month++){var min=this.firstOfMonth(month,year),max=this.lastOfMonth(month,year);if(min>=this.minDate&&min<=this.maxDate){this.minDates.push(min);this.appendOpt(this.min,
min)}if(max>=this.minDate&&max<=this.maxDate){this.maxDates.push(max);this.appendOpt(this.max,max)}}},appendOpt:function(parent,date){var opt=$("\x3coption\x3e\x3c/option\x3e");opt.html(this.months[date.getMonth()]+" "+date.getFullYear());opt.attr("value",date.toISOString());parent.append(opt)},firstOfMonth:function(month,year){return this.localeDate(year+"-"+this.pad(month+1)+"-01")},lastOfMonth:function(month,year){var date=(new Date(year,month+1,0)).getDate();return this.localeDate(year+"-"+this.pad(month+
1)+"-"+date)},localeDate:function(dateString){var utcDate=dateString?new Date(dateString):new Date;return new Date(utcDate.getTime()+utcDate.getTimezoneOffset()*6E4)},pad:function(number){return(number<10?"0":"")+number},disableMax:function(){var me=this,minDate=new Date(this.min.val());$.each(me.maxDates,function(i,date){$(me.max.children().get(i))[date<minDate?"hide":"show"]()});this.changed()},disableMin:function(){var me=this,maxDate=new Date(this.max.val());$.each(me.minDates,function(i,date){$(me.min.children().get(i))[date>
maxDate?"hide":"show"]()});this.changed()},changed:function(){var start=new Date(this.min.val()),end=new Date(this.max.val());this.currentVal.html(start.toLocaleDateString()+" - "+end.toLocaleDateString());this.value={start:start,end:end};this.trigger("change",this.value)},val:function(){return this.value}};nyc.inherits(nyc.MonthRangePicker,nyc.Collapsible);nyc.MonthRangePicker.DateRange;nyc.MonthRangePicker.Options;var nyc=nyc||{};nyc.Content=function(messages){this.messages=messages};nyc.Content.prototype={messages:null,message:function(msgId,values){return this.replace(this.messages[msgId],values||{})}};nyc.inherits(nyc.Content,nyc.ReplaceTokens);var nyc=nyc||{};
nyc.Dialog=function(){this.container=$(nyc.Dialog.HTML);$("body").append(this.container);this.container.trigger("create");this.okElems=this.container.find(".btn-ok");this.yesNoElems=this.container.find(".btn-yes, .btn-no");this.inputElems=this.container.find("input").parent();this.inputElems=this.inputElems.add(this.container.find(".btn-submit, .btn-cancel"));this.inputElem=this.container.find("input");this.msgElem=this.container.find(".dia-msg");this.okElems.click($.proxy(this.hndlOk,this));this.yesNoElems.click($.proxy(this.hndlYesNo,
this));this.inputElems.click($.proxy(this.hndlInput,this))};
nyc.Dialog.prototype={container:null,okElems:null,yesNoElems:null,inputElems:null,inputElem:null,msgElem:null,callback:null,ok:function(msg,callback){this.show(nyc.Dialog.Type.OK,msg);this.container.find(".btn-ok").focus();this.callback=callback},input:function(msg,placeholder,callback){if(typeof placeholder=="function"){callback=placeholder;placeholder=""}this.inputElem.attr("placeholder",placeholder||"");this.show(nyc.Dialog.Type.INPUT,msg);this.inputElem.focus();this.callback=callback},yesNo:function(msg,
callback){this.show(nyc.Dialog.Type.YES_NO,msg);this.container.find(".btn-yes").focus();this.callback=callback},show:function(type,msg){this.inputElems.css("display",type==nyc.Dialog.Type.INPUT?"inline-block":"none");this.okElems.css("display",type==nyc.Dialog.Type.OK?"inline-block":"none");this.yesNoElems.css("display",type==nyc.Dialog.Type.YES_NO?"inline-block":"none");this.msgElem.html(msg);this.container.fadeIn()},hide:function(){var input=this.inputElem;this.container.fadeOut(function(){input.val("")})},
hndlAny:function(type,result){if(this.callback){this.callback(result);this.callback=null}this.trigger(type,result);this.hide()},hndlOk:function(event){this.hndlAny(nyc.Dialog.EventType.OK,true)},hndlYesNo:function(event){this.hndlAny(nyc.Dialog.EventType.YES_NO,$(event.target).hasClass("btn-yes"))},hndlInput:function(event){var target=event.target,result=false;if(target.tagName!="INPUT"){if($(target).hasClass("btn-submit"))result=this.inputElem.val();this.hndlAny(nyc.Dialog.EventType.INPUT,result)}}};
nyc.inherits(nyc.Dialog,nyc.EventHandling);nyc.Dialog.Type={OK:"ok",YES_NO:"yes-no",INPUT:"input"};nyc.Dialog.EventType={OK:"ok",YES_NO:"yes-no",INPUT:"input"};
nyc.Dialog.HTML='\x3cdiv class\x3d"ui-page-theme-a dia-container"\x3e'+'\x3cdiv class\x3d"dia"\x3e'+'\x3cdiv class\x3d"dia-msg"\x3e\x3c/div\x3e'+"\x3cinput\x3e"+'\x3cdiv class\x3d"dia-btns"\x3e'+'\x3cbutton class\x3d"btn-ok"\x3eOK\x3c/button\x3e'+'\x3cbutton class\x3d"btn-yes"\x3eYes\x3c/button\x3e'+'\x3cbutton class\x3d"btn-no"\x3eNo\x3c/button\x3e'+'\x3cbutton class\x3d"btn-submit"\x3eOK\x3c/button\x3e'+'\x3cbutton class\x3d"btn-cancel"\x3eCancel\x3c/button\x3e'+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e";var nyc=nyc||{};
nyc.Directions=function(mapTarget,routeTarget,url){var me=this;me.mapTarget=mapTarget;me.routeTarget=routeTarget;me.url=(url||nyc.Directions.GOOGLE_URL)+"\x26callback\x3dnyc.directions.init";nyc.directions=me;$(".dir-mode-btn").click($.proxy(this.mode,this));$(window).on("orientationchange resize",me.height);$("#fld-from input").keypress(function(e){if(e.keyCode==13){me.args.from=$("#fld-from input").val();me.directions(me.args)}});$("#dir-toggle a").click(function(e){$("#dir-toggle a").removeClass("ui-btn-active");$(e.target).addClass("ui-btn-active");
$("#dir-panel").slideToggle()})};
nyc.Directions.prototype={map:null,service:null,renderer:null,args:null,modeBtn:"#mode-transit",directions:function(args){var me=this,mode=args.mode||"TRANSIT";me.args=args;if(!this.map){setTimeout(function(){$.getScript(me.url)},500);return}$("#fld-from input").val(args.from||"");$("#fld-to").html(args.to);$("#fld-facility").html(args.facility);if(args.from)this.service.route({origin:args.from,destination:args.to,travelMode:google.maps.TravelMode[mode]},function(response,status){if(status==google.maps.DirectionsStatus.OK){var leg=
response.routes[0].legs[0],addrA=leg.start_address.replace(/\, USA/,""),addrB=leg.end_address.replace(/\, USA/,"");me.renderer.setOptions({map:me.map,panel:$(me.routeTarget).get(0),directions:response});$("#fld-from input").val(addrA);$("#fld-to").html(addrB)}$(".dir-mode-btn").removeClass("active-mode");$(me.modeBtn).addClass("active-mode");me.height();setTimeout(function(){me.trigger(nyc.Directions.EventType.CHANGED,{response:response,status:status})},200)})},init:function(){this.map=new google.maps.Map($(this.mapTarget).get(0),
{mapTypeId:google.maps.MapTypeId.ROADMAP,backgroundColor:"#D3D3D3",panControl:false,streetViewControl:false,mapTypeControl:false,zoomControl:false,maxZoom:18,styles:[{featureType:"administrative.country",stylers:[{visibility:"off"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",stylers:[{visibility:"on"}]},{featureType:"poi.attraction",stylers:[{visibility:"off"}]},{featureType:"poi.business",
stylers:[{visibility:"off"}]},{featureType:"poi.place_of_worship",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#A1D5F1"},{saturation:55},{lightness:13},{visibility:"on"}]},{featureType:"transit.line",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"all",stylers:[{hue:"#d4d4d4"},{saturation:-100},{lightness:27},{visibility:"on"}]},{featureType:"road.local",elementType:"all",stylers:[{hue:"#e8e8e8"},{saturation:-100},{lightness:-9},
{visibility:"on"}]},{featureType:"road.highway",elementType:"all",stylers:[{hue:"#bababa"},{saturation:-100},{lightness:25},{visibility:"on"}]},{featureType:"poi.park",elementType:"all",stylers:[{hue:"#D6DDD5"},{saturation:-76},{lightness:32},{visibility:"on"}]},{featureType:"poi.school",elementType:"all",stylers:[{hue:"#DAD4C3"},{saturation:-51},{lightness:-2},{visibility:"on"}]}]});this.service=new google.maps.DirectionsService;this.renderer=new google.maps.DirectionsRenderer;this.directions(this.args)},
mode:function(event){this.args=this.args||{};this.modeBtn=event.target;this.args.mode=$(this.modeBtn).data("mode");this.directions(this.args)},height:function(){var h=$("#dir-toggle").css("display")=="block"?$("#dir-toggle").height():0;$("#directions").height($("#dir-panel").height()-h-$(".banner").height()-$("#dir-content").height()-$("#copyright").height()-10)}};nyc.inherits(nyc.Directions,nyc.EventHandling);nyc.Directions.EventType={CHANGED:"changed"};nyc.Directions.DEFAULT_GOOGLE_URL="https://maps.googleapis.com/maps/api/js?\x26sensor\x3dfalse\x26libraries\x3dvisualization";
nyc.Directions.Request;nyc.Directions.Response;var nyc=nyc||{};nyc.Geocoder=function(){};nyc.Geocoder.Accuracy={HIGH:0,MEDIUM:100,LOW:1E3,ZIP_CODE:2E3};nyc.Geocoder.prototype={search:function(input){throw"Not Implemented";}};nyc.Geoclient=function(url,projection){this.url=url+"\x26input\x3d";this.projection=projection};
nyc.Geoclient.prototype={url:null,projection:null,search:function(input){var me=this;input=input.trim();if(input.length==5&&!isNaN(input)){var p=me.project(nyc.Geoclient.ZIP_CODE_POINTS[input]);me.trigger(p?nyc.Locate.EventType.GEOCODE:nyc.Locate.EventType.AMBIGUOUS,p?{coordinates:p,accuracy:nyc.Geocoder.Accuracy.ZIP_CODE,type:nyc.Locate.ResultType.GEOCODE,zip:true,name:input}:{input:input,possible:[]})}else if(input.length){input=input.replace(/"/g,"").replace(/'/g,"").replace(/&/g," and ");$.ajax({url:me.url+
input,dataType:"jsonp",success:function(response){me.geoclient(response)},error:function(xhr,status,error){console.error("Geoclient error",[xhr,status,error]);me.trigger(nyc.Locate.EventType.ERROR,[xhr,status,error])}})}},project:function(coordinates){if(coordinates&&this.projection)return proj4("EPSG:2263",this.projection,coordinates);return coordinates},geoclient:function(response){var me=this,results=response.results;if(response.status=="OK")if(results.length==1){var result=results[0];if(result.status==
"EXACT_MATCH"||result.status=="POSSIBLE_MATCH"){var location=me.parse(result);if(location.coordinates[0])me.trigger(nyc.Locate.EventType.GEOCODE,location);else me.trigger(nyc.Locate.EventType.AMBIGUOUS,{input:response.input,possible:[]})}}else me.trigger(nyc.Locate.EventType.AMBIGUOUS,{input:response.input,possible:me.possible(results)});else me.trigger(nyc.Locate.EventType.AMBIGUOUS,{input:response.input,possible:[]})},possible:function(results){var me=this,possible=[];$.each(results,function(i,
r){if(r.status="POSSIBLE_MATCH"){var location=me.parse(r);if(location.coordinates[0])possible.push(location)}});return possible},parse:function(result){var typ=result.request.split(" ")[0],r=result.response,ln1,p,a;if(typ=="intersection"){ln1=r.streetName1+" and "+r.streetName2;p=[r.xCoordinate*1,r.yCoordinate*1];a=nyc.Geocoder.Accuracy.MEDIUM}else if(typ=="blockface"){ln1=r.firstStreetNameNormalized+" btwn "+r.secondStreetNameNormalized+" \x26 "+r.thirdStreetNameNormalized;p=[(r.fromXCoordinate*
1+r.toXCoordinate*1)/2,(r.fromYCoordinate*1+r.toYCoordinate*1)/2];a=nyc.Geocoder.Accuracy.LOW}else{var x=r.internalLabelXCoordinate,y=r.internalLabelYCoordinate;ln1=(r.houseNumber?r.houseNumber+" ":"")+r.firstStreetNameNormalized;p=[(x&&y?x:r.xCoordinate)*1,(x&&y?y:r.yCoordinate)*1];a=x&&y?nyc.Geocoder.Accuracy.HIGH:nyc.Geocoder.Accuracy.MEDIUM}return{type:nyc.Locate.ResultType.GEOCODE,coordinates:this.project(p),accuracy:a,name:this.capitalize(ln1.replace(/  /," ").replace(/  /," ")+", "+r.firstBoroughName)+
", NY "+(r.zipCode||r.leftSegmentZipCode||"")}},capitalize:function(s){var words=s.split(" "),result="";$.each(words,function(i,w){var word=w.toLowerCase();result+=word.substr(0,1).toUpperCase();result+=word.substr(1).toLowerCase();result+=" "});return result.trim()}};nyc.inherits(nyc.Geoclient,nyc.EventHandling);
nyc.Geoclient.ZIP_CODE_POINTS={10474:[1018466,233787],10455:[1007889,236616],10037:[1001661,235627],10024:[991450,225457],10454:[1007449,232863],10026:[997179,231835],10035:[1001886,231364],10025:[993331,230012],10035:[1006595,228454],11101:[1001319,211034],11364:[1051553,211923],10018:[984278,215509],10020:[990012,215729],11005:[1064789,214295],10017:[991869,213252],10001:[983613,213360],10011:[982781,210664],10016:[990291,210665],11104:[1006224,210564],11109:[996054,210740],10010:[988989,208515],
11367:[1032392,205392],10014:[982449,206620],10003:[987465,205563],11222:[998773,204620],11379:[1017432,200740],11429:[1056859,198057],11435:[1036960,195018],11415:[1031798,197376],11418:[1031001,193330],11433:[1043368,193721],11451:[1039899,194697],11221:[1004438,191873],11421:[1023878,191241],11372:[1016528,213126],11004:[1065606,210363],11040:[1065956,213534],10002:[988242,200171],10314:[939259,155728],11693:[1028661,168843],11228:[980891,164066],11096:[1048547,164406],11693:[1032834,164479],11209:[976172,
165379],10304:[962458,165679],10456:[1007883,242372],10472:[1021444,241624],10031:[998088,239814],10039:[1001519,240436],10459:[1013835,240084],10451:[1005368,238290],10473:[1022475,237217],10030:[1000193,237302],10027:[999088,234131],10464:[1047712,250241],10464:[1043291,247861],10461:[1028296,247902],10457:[1012388,247405],10460:[1015132,243510],10032:[1000382,244917],10452:[1005446,244483],11414:[1027256,178677],11231:[979340,182720],11232:[983612,177801],10034:[1005713,255122],10033:[1001707,
248780],10462:[1020685,249420],10040:[1003863,251914],10453:[1008152,249805],11102:[1004636,220364],11370:[1014445,217532],10021:[997020,219120],11361:[1047797,217779],11358:[1040709,216377],11362:[1057749,215220],10044:[996385,214347],11369:[1019957,217722],11103:[1008295,217197],11106:[1001397,217519],11368:[1024870,212082],11377:[1010574,210678],10036:[985413,216821],11355:[1033762,213010],10302:[945946,169124],10465:[1031495,239091],11691:[1053783,158810],11096:[1054217,162199],11223:[991665,
156781],11693:[1030676,160394],11208:[1019700,184749],11207:[1013544,183721],10004:[978925,190480],10004:[971715,190592],11413:[1053380,183328],11217:[989547,187967],11238:[994291,186584],11231:[983057,186217],11422:[1057272,180607],11420:[1036899,184708],11417:[1027410,185709],11215:[989882,181773],11357:[1036533,225804],10029:[999950,227538],"00083":[991590,220538],11356:[1028115,225277],11359:[1046026,228012],10303:[933820,171004],11234:[1004323,163783],11360:[1044984,223892],11105:[1011836,221755],
10128:[997765,224257],11371:[1022003,220457],10023:[988765,222068],11363:[1055047,220385],10028:[995910,222872],11354:[1032198,219054],11216:[998312,187241],11416:[1025796,188584],11233:[1006523,186300],11436:[1040697,185554],11213:[1000284,183308],11212:[1008387,180764],11225:[997345,180829],11218:[990799,173649],11226:[995711,174598],11219:[985166,169604],11210:[999101,167896],11230:[993494,166072],11419:[1033365,190202],11434:[1046577,185969],11204:[987887,164576],10471:[1012587,266570],10470:[1024748,
268409],10466:[1024313,263999],10467:[1019786,258782],11430:[1043607,175068],11203:[1002509,175950],10469:[1026678,255623],10468:[1013897,258046],10463:[1008780,258696],10458:[1015534,253712],11378:[1009641,202115],10009:[990043,203961],10012:[984832,203596],10013:[982892,201665],10007:[982504,199552],11237:[1004600,197083],11385:[1011367,195195],10038:[983418,197803],11206:[1000221,195003],10006:[980563,197293],11412:[1050773,193231],10005:[981339,197038],11251:[993428,194599],10004:[980174,195435],
11411:[1057763,192413],11201:[986968,192156],10004:[972576,193652],11205:[995897,192159],10305:[963310,156060],11229:[999717,158278],11214:[984E3,159330],10306:[950937,145144],11694:[1025530,149310],11224:[984306,149092],10308:[942704,140020],10282:[979981,200244],11211:[999857,199848],11249:[993704,198278],11370:[1016758,227518],10065:[994666,217698],10075:[995301,221633],10069:[987047,221849],10281:[980036,198787],11373:[1017948,208465],10279:[981949,198823],10165:[990124,213288],10168:[990733,
212960],10105:[990067,217259],10118:[988212,211939],10176:[990123,214490],10162:[997739,219667],10170:[990955,213470],10112:[989735,215947],10122:[986550,213178],10107:[989098,218425],10103:[990705,216275],10174:[991094,213106],10166:[990733,213798],10169:[990872,214089],10167:[991259,214199],10177:[990927,214381],10172:[991398,214417],10171:[991426,214709],10270:[982060,196710],10104:[990123,216312],10271:[981339,197293],10110:[989486,213943],10175:[989847,214016],10151:[991702,217332],10173:[990040,
213907],10178:[990429,212814],10119:[986217,213068],10121:[986439,212486],10123:[986827,213032],10106:[989624,218024],10158:[991177,212122],10041:[981727,195435],10120:[987242,212449],10278:[983113,199880],10155:[993143,216531],10043:[982337,195836],10081:[981838,197074],10096:[989071,214235],10097:[988461,216931],10196:[989237,215E3],10196:[989458,214963],10275:[980368,196382],10265:[982060,196164],10045:[981866,197329],10047:[988047,208660],10047:[988047,208660],10080:[980785,198167],10203:[981062,
196965],10259:[981478,197439],10260:[981921,196564],10285:[980147,199224],10286:[981727,196637],10463:[1007644,260043],10475:[1030489,258509],10464:[1036131,258338],10309:[923594,132955],10307:[916899,124411],10280:[979509,197257],10048:[980812,198532],10055:[991564,215802],10019:[989652,217477],10111:[990483,215838],10153:[991896,217478],10154:[991896,215328],10152:[991979,215584],10115:[994299,234675],10022:[993087,215620],11235:[1000973,149936],11693:[1036606,153266],11692:[1041045,155461],11697:[1009230,
143240],10312:[935583,136827],11239:[1021573,175899],11236:[1011642,172461],11220:[979421,172519],10301:[961077,172967],10310:[950582,169591],11426:[1060737,207724],11365:[1041364,208618],11001:[1065508,206646],11375:[1026883,201848],11427:[1053373,205042],11374:[1022389,203771],11366:[1039491,203659],11423:[1048812,200621],11428:[1055655,202207],11432:[1041634,200093]};var nyc=nyc||{};nyc.Lang=function(target,languages){var codes=[],div=$(nyc.Lang.HTML);nyc.lang=this;this.hints=[];this.namedCodes={};$(target).append(div);for(var code in languages){var name=languages[code].val,opt=$("\x3coption\x3e\x3c/option\x3e").attr("value",name).html(languages[code].desc);$("#lang-choice").append(opt);codes.push(code);this.hints.push(languages[code].hint);this.namedCodes[name]=code}this.codes=codes.toString();this.languages=languages;div.trigger("create");$.getScript("//translate.google.com/translate_a/element.js?cb\x3dnyc.lang.init")};
nyc.Lang.prototype={namedCodes:null,code:"",codes:"",translate:null,hints:null,languages:null,init:function(){nyc.lang.translate=new google.translate.TranslateElement({pageLanguage:"en",includedLanguages:nyc.lang.codes,layout:google.translate.TranslateElement.InlineLayout.SIMPLE,autoDisplay:false},"lang-trans");$("#lang-choice").show();nyc.lang.initDropdown();nyc.lang.setLangDropdown();$("#lang-choice-button span").html("Translate").show();nyc.lang.hack();nyc.lang.trigger(nyc.Lang.EventType.READY,
true)},showHint:function(){var hints=this.hints,h=0;setInterval(function(){$("#lang-choice-button span").html(hints[h]||"Translate");h++;if(h==hints.length)h=0},1E3)},chooseLang:function(lang){var choices=$("iframe.goog-te-menu-frame:first").contents().find(".goog-te-menu2-item span.text");if(choices.length){if(lang=="English")nyc.lang.showOriginalText();else $(choices).each(function(){if($(this).text()==lang){$(this).click();return false}});$("#lang-choice-button span").show();this.code=nyc.lang.namedCodes[lang]||
"en";this.trigger(nyc.Lang.EventType.CHANGE,this.code)}else{var me=this;setTimeout(function(){me.chooseLang(lang)},100)}},initDropdown:function(){var me=this;$("#lang-choice").change(function(){me.chooseLang($(this).val())})},showOriginalText:function(){var googBar=$("iframe.goog-te-banner-frame:first");$(googBar.contents().find(".goog-te-button button")).each(function(){if($(this).text()=="Show original"){$(this).trigger("click");if($("#lang-choice").val()!="English")$("#lang-choice").val("English");
return false}})},defaultLang:function(){return navigator.language?navigator.language.split("-")[0]:"en"},setLangDropdown:function(){var defLang=this.defaultLang(),langCode=this.getCookieValue();this.showHint();if(!langCode){for(var code in this.languages)if(code.indexOf(defLang)==0){langCode=code;break}langCode=langCode||"en"}$("#lang-choice").val(this.languages[langCode].val).trigger("change")},lang:function(){return this.code},hack:function(){$("input[placeholder]").each(function(){var next=$(this).next();
if(!next.hasClass("lang-placeholder"))$(this).after('\x3cspan class\x3d"lang-placeholder"\x3e'+$(this).attr("placeholder")+"\x3c/span\x3e");else $(this).attr("placeholder",next.html().replace(/<font>/g,"").replace(/<\/font>/g,""))});$("font").each(function(){if($(this).data("lang-hack")!="hacked"){var parent=$(this).parent();$(this).data("lang-hack","hacked");if(parent.length&&parent[0].tagName.toUpperCase()!="FONT"&&parent.data("role")=="button")$(this).click(function(event){event.stopImmediatePropagation();
parent.trigger("click")})}});$("body").css("top","auto");$("#goog-gt-tt").remove();setTimeout($.proxy(this.hack,this),200)},getCookie:function(){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=cookies[i];while(cookie.charAt(0)==" ")cookie=cookie.substring(1,cookie.length);if(cookie.indexOf("googtrans\x3d")==0)return cookie.substring(10,cookie.length)}},getCookieValue:function(){var cookie=this.getCookie();if(cookie){cookie=cookie.split("/");cookie=cookie[2];return cookie}}};
nyc.inherits(nyc.Lang,nyc.EventHandling);nyc.Lang.EventType={READY:"ready",CHANGE:"change"};nyc.Lang.Choice;nyc.Lang.Choices;nyc.Lang.HTML="\x3cdiv id\x3d'lang-btn' title\x3d'Translate...'\x3e"+"\x3cdiv id\x3d'lang-trans'\x3e\x3c/div\x3e"+"\x3cselect id\x3d'lang-choice' class\x3d'notranslate' translate\x3d'no'\x3e\x3c/select\x3e"+"\x3c/div\x3e";var nyc=nyc||{};nyc.Legend=function(legendTemplate){this.legendTemplate=legendTemplate};nyc.Legend.prototype={legendTemplate:null,html:function(caption){return $(this.replace(this.legendTemplate,{caption:caption}))}};nyc.inherits(nyc.Legend,nyc.ReplaceTokens);nyc.BinLegend=function(name,symbolType,binType){this.name=name;this.symbolType=symbolType;this.binType=binType};
nyc.BinLegend.prototype={symbolType:null,binType:null,rangeTemplate:'\x3ctr\x3e\x3ctd class\x3d"leg-bin leg-bin-${index}"\x3e\x3cimg alt\x3d"${op0} ${from} ${and} ${op1} ${to}" src\x3d"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw\x3d\x3d"\x3e\x3c/td\x3e\x3ctd class\x3d"leg-bin-desc"\x3e${op0} \x3cspan class\x3d"fmt-num"\x3e${from}\x3c/span\x3e ${and} ${op1} \x3cspan class\x3d"fmt-num"\x3e${to}\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e',valueTemplate:'\x3ctr\x3e\x3ctd class\x3d"leg-bin leg-bin-${index}"\x3e\x3cimg alt\x3d"${value}" src\x3d"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw\x3d\x3d"\x3e\x3c/td\x3e\x3ctd class\x3d"leg-bin-desc"\x3e${value}\x3c/td\x3e\x3c/tr\x3e',
html:function(caption,bins){var me=this,table=$('\x3ctable class\x3d"legend"\x3e\x3c/table\x3e'),tbody=$("\x3ctbody\x3e\x3c/tbody");table.append("\x3ccaption\x3e"+caption+"\x3c/caption\x3e");table.append(tbody);table.addClass(this.symbolType);table.addClass(this.binType);table.addClass(this.name.replace(/ /g,"-"));$.each(bins,function(i,bin){if(me.binType!=nyc.BinLegend.BinType.VALUE)tbody.append(me.rangeBin(i,bins[i-1],bin));else tbody.append(me.valueBin(bin))});return table},rangeBin:function(index,
from,to){return this.replace(this.rangeTemplate,{index:index,op0:index==0?"":"\x3e",op1:index==0&&this.binType==nyc.BinLegend.BinType.RANGE_INT?"":"\x3c\x3d",from:isNaN(from)?"":from,and:index==0?"":"and",to:to})},valueBin:function(index,value){return this.replace(this.valueTemplate,{index:index,value:value})}};nyc.inherits(nyc.BinLegend,nyc.Legend);nyc.BinLegend.SymbolType={POLYGON:"leg-polygon",LINE:"leg-line",POINT:"leg-point",GRADUATED_POINT:"leg-grad-point"};
nyc.BinLegend.BinType={RANGE_NUMBER:"leg-range-num",RANGE_INT:"leg-range-int",VALUE:"leg-value"};var nyc=nyc||{};nyc.Locate=function(){};nyc.Locate.prototype={locate:function(){throw"Must be implemented";},track:function(track){throw"Must be implemented";},search:function(input){throw"Must be implemented";}};nyc.Locate.EventType={GEOCODE:"geocode",GEOLOCATION:"geolocation",AMBIGUOUS:"ambiguous",ERROR:"error"};nyc.Locate.ResultType={GEOCODE:"geocode",GEOLOCATION:"geolocation"};nyc.Locate.Result;nyc.Locate.Ambiguous;var nyc=nyc||{};
nyc.LocationMgr=function(options){this.controls=options.controls;this.locate=options.locate;this.locator=options.locator;this.autoLocate=options.autoLocate||this.autoLocate;this.dialog=new nyc.Dialog;this.locate.on(nyc.Locate.EventType.GEOCODE,this.located,this);this.locate.on(nyc.Locate.EventType.GEOLOCATION,this.located,this);this.locate.on(nyc.Locate.EventType.AMBIGUOUS,this.ambiguous,this);this.controls.on(nyc.ZoomSearch.EventType.SEARCH,this.locate.search,this.locate);this.controls.on(nyc.ZoomSearch.EventType.GEOLOCATE,this.locate.locate,
this.locate);this.controls.on(nyc.ZoomSearch.EventType.DISAMBIGUATED,this.located,this);this.locateFromQueryString()};
nyc.LocationMgr.prototype={controls:null,locate:null,locator:null,dialog:null,autoLocate:false,ambiguous:function(data){if(data.possible.length)this.controls.disambiguate(data);else{this.controls.searching(false);this.dialog.ok("The location you entered was not understood")}},located:function(data){var me=this;me.controls.val(data.type==nyc.Locate.EventType.GEOLOCATION?"":data.name);me.locator.zoomLocation(data,function(){me.trigger(data.type,data)})},locateFromQueryString:function(){var qstr=document.location.search,
args={};try{var params=qstr.substr(1).split("\x26");for(var i=0;i<params.length;i++){var p=params[i].split("\x3d");args[p[0]]=decodeURIComponent(p[1])}}catch(ignore){}if(args.address)this.locate.search(args.address);else if(this.autoLocate)this.locate.locate()}};nyc.inherits(nyc.LocationMgr,nyc.EventHandling);nyc.LocationMgr.Options;var nyc=nyc||{};
nyc.Share=function(target){var me=this,html=nyc.Share.HTML,title=$('meta[property\x3d"og:title"]').attr("content");html=html.replace(/\${url}/g,$('meta[property\x3d"og:url"]').attr("content"));html=html.replace(/\${title}/g,title);html=html.replace(/\${description}/g,$('meta[property\x3d"og:description"]').attr("content"));$(target).append(html).trigger("create");$("#share-btn").click(function(){$("#share-btns").fadeToggle(function(){$("*").one("click",function(e){if($("#share-btns").css("opacity")==1)$("#share-btns").fadeOut()})})});
if(this.isIosAppMode())$("#email-btn").attr("target","_blank")};nyc.Share.prototype={isIosAppMode:function(){return navigator.standalone&&nyc.util.isIos()}};
nyc.Share.HTML='\x3ca id\x3d"share-btn" class\x3d"ctl ctl-btn" data-role\x3d"button" title\x3d"Share..."\x3e'+'\x3cspan class\x3d"noshow"\x3eShare...\x3c/span\x3e'+"\x3c/a\x3e"+'\x3cdiv id\x3d"share-btns" class\x3d"ctl"\x3e'+'\x3ca id\x3d"facebook-btn" class\x3d"ctl-btn" data-role\x3d"button" href\x3d"https://www.facebook.com/sharer/sharer.php?u\x3d${url}" target\x3d"_blank" title\x3d"Facebook"\x3e'+'\x3cspan class\x3d"noshow"\x3eFacebook\x3c/span\x3e'+"\x3c/a\x3e"+'\x3ca id\x3d"twitter-btn" class\x3d"ctl-btn" data-role\x3d"button" href\x3d"https://twitter.com/intent/tweet?text\x3d${url} @nycgov\x26source\x3dwebclient" target\x3d"_blank" title\x3d"Twitter"\x3e'+
'\x3cspan class\x3d"noshow"\x3eTwitter\x3c/span\x3e'+"\x3c/a\x3e"+'\x3ca id\x3d"google-btn" class\x3d"ctl-btn" data-role\x3d"button" href\x3d"https://plus.google.com/share?url\x3d${url}" target\x3d"_blank" title\x3d"Google+"\x3e'+'\x3cspan class\x3d"noshow"\x3eGoogle+\x3c/span\x3e'+"\x3c/a\x3e"+'\x3ca id\x3d"linkedin-btn" class\x3d"ctl-btn" data-role\x3d"button" href\x3d"http://www.linkedin.com/shareArticle?mini\x3dtrue\x26url\x3d${url}" target\x3d"_blank" title\x3d"LinkedIn"\x3e'+'\x3cspan class\x3d"noshow"\x3eLinkedIn\x3c/span\x3e'+
"\x3c/a\x3e"+'\x3ca id\x3d"tumblr-btn" class\x3d"ctl-btn" data-role\x3d"button" href\x3d"http://www.tumblr.com/share/link?url\x3d${url}\x26name\x3d${title}\x26description\x3dvia%20NYC.gov" target\x3d"_blank" title\x3d"Tumblr"\x3e'+'\x3cspan class\x3d"noshow"\x3eTumblr\x3c/span\x3e'+"\x3c/a\x3e"+'\x3ca id\x3d"email-btn" class\x3d"ctl-btn" data-role\x3d"button" href\x3d"mailto:?subject\x3d${title}\x26body\x3d${description}%0A%0A${url}" title\x3d"email"\x3e'+'\x3cspan class\x3d"noshow"\x3eEmail\x3c/span\x3e'+
"\x3c/a\x3e"+"\x3c/div\x3e";var nyc=nyc||{};
nyc.ZoomSearch=function(useSearchTypeMenu){var me=this;me.render(useSearchTypeMenu);me.typBtn=$("#btn-srch-typ");me.input=$("#fld-srch-container input");me.list=$("#fld-srch");me.typBtn.click($.proxy(me.searchType,me));me.input.on("keyup change",$.proxy(me.key,me));$("#btn-z-in, #btn-z-out").click($.proxy(me.zoom,me));$("#fld-srch-container .ui-input-clear").click(function(){me.list.slideUp()});$("#btn-geo, #srch-type-geo").click(function(){me.val("");me.input.attr("placeholder","Search for an address...");me.trigger(nyc.ZoomSearch.EventType.GEOLOCATE)});
$("#mnu-srch-typ li").click($.proxy(me.choices,me))};
nyc.ZoomSearch.prototype={isAddrSrch:true,input:true,container:function(){throw"Must be implemented";},zoom:function(event){throw"Must be implemented";},render:function(useSearchTypeMenu){var html=nyc.ZoomSearch[useSearchTypeMenu?"SEARCH_TYPES_HTML":"BASIC_HTML"];this.container().append(html).trigger("create")},key:function(e){if(e.keyCode==13&&this.isAddrSrch){this.triggerSearch();this.list.slideUp()}else{$("#mnu-srch-typ").hide();this.list.slideDown()}},triggerSearch:function(){var input=this.val().trim();
if(input.length){this.input.blur();this.searching(true);this.trigger(nyc.ZoomSearch.EventType.SEARCH,input)}},val:function(val){if(typeof val=="string"){this.input.val(val);this.searching(false)}return this.input.val()},disambiguate:function(ambiguous){var me=this,possible=ambiguous.possible;me.searching(false);if(possible.length){me.emptyList();$.each(possible,function(i,locateResult){me.list.append(me.listItem("addr",locateResult))});me.list.children().first().addClass("ui-first-child");me.list.children().last().addClass("ui-last-child");
me.list.slideDown()}},searching:function(show){$("#fld-srch-container a.ui-input-clear")[show?"addClass":"removeClass"]("searching")},setFeatures:function(featureTypeName,featureTypeTitle,placeholder,features){var me=this,li=$("\x3cli\x3e\x3c/li\x3e"),span=$('\x3cspan class\x3d"ui-btn-icon-left"\x3e\x3c/span\x3e');li.addClass("srch-type-feature");li.addClass("srch-type-"+featureTypeName);li.data("srch-type",featureTypeName);li.data("placeholder",placeholder);span.addClass("srch-icon-"+featureTypeName);
li.append(span);li.append(featureTypeTitle);$("#mnu-srch-typ").append(li).listview("refresh");li.click($.proxy(me.choices,me));$.each(features,function(_,f){$("#fld-srch-retention").append(me.listItem(featureTypeName,{name:f.properties.name,geoJsonGeometry:f.geometry,data:f.properties,accuracy:nyc.Geocoder.Accuracy.HIGH}))})},listItem:function(typeName,data){var li=$('\x3cli class\x3d"ui-li-static ui-body-inherit"\x3e\x3c/li\x3e');li.addClass("srch-type-"+typeName);li.addClass("notranslate");li.attr("translate",
"no");li.html(data.name);li.data("location",{name:data.name,coordinates:data.coordinates,geoJsonGeometry:data.geoJsonGeometry,accuracy:data.accuracy,type:nyc.Locate.ResultType.GEOCODE,data:data.data});li.click($.proxy(this.diambiguated,this));return li},searchType:function(){this.list.hide();$("#mnu-srch-typ").slideToggle();this.flipIcon()},flipIcon:function(){if(this.typBtn.hasClass("ui-icon-carat-d"))this.typBtn.removeClass("ui-icon-carat-d").addClass("ui-icon-carat-u");else this.typBtn.removeClass("ui-icon-carat-u").addClass("ui-icon-carat-d")},
choices:function(e){var featureTypeName=$(e.target).data("srch-type")||"addr",placeholder=$(e.target).data("placeholder")||"Search for an address...";this.isAddrSrch=featureTypeName=="addr";$("#mnu-srch-typ").slideUp();this.val("");this.input.focus();this.flipIcon();this.emptyList();this.input.attr("placeholder",placeholder);this.list.append($("#fld-srch-retention li.srch-type-"+featureTypeName)).listview("refresh")},emptyList:function(){$("#fld-srch-retention").append($("#fld-srch li"));this.list.empty()},
diambiguated:function(e){var li=$(e.target);this.val(li.html());this.trigger(nyc.ZoomSearch.EventType.DISAMBIGUATED,li.data("location"));li.parent().slideUp()}};nyc.inherits(nyc.ZoomSearch,nyc.EventHandling);nyc.ZoomSearch.EventType={SEARCH:"search",GEOLOCATE:"geolocate",DISAMBIGUATED:"disambiguated"};
nyc.ZoomSearch.BASIC_HTML='\x3cdiv id\x3d"ctl-z-srch" class\x3d"ol-unselectable"\x3e'+'\x3cdiv id\x3d"fld-srch-container" class\x3d"ctl"\x3e'+'\x3cul id\x3d"fld-srch" class\x3d"ui-corner-all" data-role\x3d"listview" data-filter\x3d"true" data-filter-reveal\x3d"true" data-filter-placeholder\x3d"Search for an address..."\x3e\x3c/ul\x3e'+"\x3c/div\x3e"+'\x3ca id\x3d"btn-z-in" class\x3d"ctl ctl-btn" data-role\x3d"button" data-icon\x3d"plus" data-iconpos\x3d"notext" data-zoom-incr\x3d"1" title\x3d"Zoom in"\x3e'+
'\x3cspan class\x3d"noshow"\x3eZoom in\x3c/span\x3e'+"\x3c/a\x3e"+'\x3ca id\x3d"btn-z-out" class\x3d"ctl ctl-btn" data-role\x3d"button" data-icon\x3d"minus" data-iconpos\x3d"notext" data-zoom-incr\x3d"-1" title\x3d"Zoom out"\x3e'+"Zoom out"+"\x3c/a\x3e"+'\x3ca id\x3d"btn-geo" class\x3d"ctl ctl-btn" data-role\x3d"button" data-icon\x3d"none" data-iconpos\x3d"notext" title\x3d"Current location"\x3e'+"Zoom out"+"\x3c/a\x3e"+'\x3cul id\x3d"fld-srch-retention"\x3e\x3c/ul\x3e'+"\x3c/div\x3e";
nyc.ZoomSearch.SEARCH_TYPES_HTML='\x3cdiv id\x3d"ctl-z-srch" class\x3d"srch-types ol-unselectable"\x3e'+'\x3cdiv id\x3d"fld-srch-container" class\x3d"ctl"\x3e'+'\x3cul id\x3d"fld-srch" class\x3d"ui-corner-all" data-role\x3d"listview" data-filter\x3d"true" data-filter-reveal\x3d"true" data-filter-placeholder\x3d"Search for an address..."\x3e\x3c/ul\x3e'+'\x3cul id\x3d"mnu-srch-typ" class\x3d"ctl ui-corner-all" data-role\x3d"listview"\x3e'+'\x3cli id\x3d"srch-by"\x3eSearch by...\x3c/li\x3e'+'\x3cli id\x3d"srch-type-geo"\x3e\x3cspan class\x3d"ui-btn-icon-left srch-icon-geo"\x3e\x3c/span\x3eMy current location\x3c/li\x3e'+
'\x3cli id\x3d"srch-type-addr"\x3e\x3cspan class\x3d"ui-btn-icon-left ui-icon-home"\x3e\x3c/span\x3eAddress, intersection, ZIP Code, etc.\x3c/li\x3e'+"\x3c/ul\x3e"+'\x3ca id\x3d"btn-srch-typ" class\x3d"ui-btn ui-icon-carat-d ui-btn-icon-notext" title\x3d"Search Type"\x3eSearch Type\x3c/a\x3e'+"\x3c/div\x3e"+'\x3ca id\x3d"btn-z-in" class\x3d"ctl ctl-btn" data-role\x3d"button" data-icon\x3d"plus" data-iconpos\x3d"notext" data-zoom-incr\x3d"1" title\x3d"Zoom in"\x3e'+'\x3cspan class\x3d"noshow"\x3eZoom in\x3c/span\x3e'+
"\x3c/a\x3e"+'\x3ca id\x3d"btn-z-out" class\x3d"ctl ctl-btn" data-role\x3d"button" data-icon\x3d"minus" data-iconpos\x3d"notext" data-zoom-incr\x3d"-1" title\x3d"Zoom out"\x3e'+"Zoom out"+"\x3c/a\x3e"+'\x3cul id\x3d"fld-srch-retention"\x3e\x3c/ul\x3e'+"\x3c/div\x3e";var nyc=nyc||{};nyc.leaf=nyc.leaf||{};nyc.leaf.EXTENT=L.latLngBounds([40.496,-74.257],[40.916,-73.699]);nyc.leaf.CENTER=L.latLng([40.7033127,-73.979681]);var nyc=nyc||{};nyc.leaf=nyc.leaf||{};
nyc.leaf.Locate=function(map,geocoder,extentLimit){var me=this;me.map=map;me.geocoder=geocoder;me.extentLimit=extentLimit;geocoder.on(nyc.Locate.EventType.GEOCODE,function(data){me.proxyEvent(nyc.Locate.EventType.GEOCODE,data)});geocoder.on(nyc.Locate.EventType.AMBIGUOUS,function(data){me.proxyEvent(nyc.Locate.EventType.AMBIGUOUS,data)});geocoder.on(nyc.Locate.EventType.ERROR,function(data){me.proxyEvent(nyc.Locate.EventType.ERROR,data)});me.geocoder=geocoder;map.on("locationfound",$.proxy(me.geolocated,
me));map.on("locationerror",$.proxy(me.geoError,me))};
nyc.leaf.Locate.prototype={map:null,geocoder:null,extentLimit:null,isGeolocateAllowed:true,locate:function(){if(this.isGeolocateAllowed)this.map.locate({enableHighAccuracy:true,setView:false,maxZoom:nyc.leaf.Locate.ZOOM_LEVEL});else this.trigger(nyc.Locate.EventType.ERROR,"You have disabled location services for this page. To use this feature you must enable location services.")},search:function(input){this.geocoder.search(input)},proxyEvent:function(evt,data){this.trigger(evt,data)},geoError:function(e){if(e.code==
1)this.isGeolocateAllowed=false},geolocated:function(e){if(!this.extentLimit||this.extentLimit.contains(e.latlng))this.trigger(nyc.Locate.EventType.GEOLOCATION,{name:this.dmsString(e.latlng),coordinates:[e.latlng.lng,e.latlng.lat],accuracy:e.accuracy,type:nyc.Locate.ResultType.GEOLOCATION})},dmsString:function(latLng){var lat=latLng.lat,lng=latLng.lng,dmsLat=this.dms(Math.abs(lat)),dmsLng=this.dms(Math.abs(lng));dmsLat+=lat<0?" S ":" N ";dmsLng+=lng<0?" W":" E";return dmsLat+dmsLng},dms:function(deg){var d=
Math.floor(deg),minfloat=(deg-d)*60,m=Math.floor(minfloat),secfloat=(minfloat-m)*60,s=secfloat.toFixed(0);return""+d+"\u00b0 "+m+"' "+s+'"'}};nyc.inherits(nyc.leaf.Locate,nyc.EventHandling);nyc.leaf.Locate.ZOOM_LEVEL=16;var nyc=nyc||{};nyc.leaf=nyc.leaf||{};nyc.leaf.Locator=function(options){this.map=options.map;this.icon=options.icon;this.style=options.style;this.zoom=options.zoom!==undefined?options.zoom:nyc.leaf.Locate.ZOOM_LEVEL};
nyc.leaf.Locator.prototype={map:null,layer:null,style:null,zoomLocation:function(data,callback){var geoJson=data.geoJsonGeometry;if(this.layer)this.map.removeLayer(this.layer);if(geoJson&&geoJson.type!="Point")this.locatedGeoJson(data);else this.locatedCoords(data);callback()},locatedGeoJson:function(data){this.layer=L.geoJson({type:"Feature",geometry:data.geoJsonGeometry},{style:this.style}).addTo(this.map);this.map.fitBounds(this.layer.getBounds())},locatedCoords:function(data){var coords=data.coordinates,
options={title:data.name};coords=[coords[1],coords[0]];if(this.icon)options.icon=this.icon;this.layer=L.marker(coords,options).addTo(this.map);this.map.setView(coords,nyc.leaf.Locate.ZOOM_LEVEL,{pan:{animate:true},zoom:{animate:true}})}};nyc.leaf.Locator.Options;var nyc=nyc||{};nyc.leaf=nyc.leaf||{};nyc.leaf.ZoomSearch=function(map,useSearchTypeMenu){this.map=map;nyc.ZoomSearch.apply(this,[useSearchTypeMenu]);$("#ctl-z-srch").on("click dblclick mouseover mousemove",this.stopEvent)};
nyc.leaf.ZoomSearch.prototype={map:null,container:function(){return $(this.map.getContainer())},zoom:function(event){var z=this.map.getZoom()+$(event.target).data("zoom-incr")*1;if(z>=0&&z<=this.map.getMaxZoom())this.map.setZoom(z)},stopEvent:function(event){L.DomEvent.disableClickPropagation(event.target);$(".cartodb-tooltip").hide()}};nyc.inherits(nyc.leaf.ZoomSearch,nyc.ZoomSearch);nyc.leaf.ZoomSearch.MAX_ZOOM=18;var nyc=nyc||{};nyc.carto=nyc.carto||{};nyc.carto.Sql=function(namedQuery,url){this.namedQuery=namedQuery;this.url=url||nyc.carto.Sql.DEFAULT_URL};nyc.carto.Sql.prototype={namedQuery:null,url:null,execute:function(filterValues,callback){$.ajax({url:this.url,data:{namedQuery:this.namedQuery,filterValues:filterValues},success:callback})}};nyc.carto.Sql.DEFAULT_URL="/carto/named-query";nyc.carto.SqlTemplate=function(){};
nyc.carto.SqlTemplate.prototype={sql:function(template,values,filters){var result=new String(template),where="";for(var column in values){var filter=filters?new String(filters[column]||""):"",vals=values[column];if(values){result=this.replace(result,vals);filter=this.replace(filter,vals);if(where&&filter)where+=" AND ";where+=filter}}result=this.replace(result,{where:where});return result}};nyc.inherits(nyc.carto.SqlTemplate,nyc.ReplaceTokens);var nyc=nyc||{};nyc.carto=nyc.carto||{};nyc.carto.Symbolizer=function(){};nyc.inherits(nyc.carto.Symbolizer,nyc.ReplaceTokens);nyc.inherits(nyc.carto.Symbolizer,nyc.EventHandling);nyc.carto.Symbolizer.EventType={SYMBOLIZED:"symbolized"};var nyc=nyc||{};nyc.carto=nyc.carto||{};nyc.carto.HeatSymbolizer=function(options){this.map=options.map;this.layer=options.layer;this.css=options.css;this.map.on("zoomend",$.proxy(this.symbolize,this));this.sizes=options.sizes||[2,4,8,16,32,64,128,256,512]};
nyc.carto.HeatSymbolizer.prototype={sizes:null,symbolize:function(){this.trigger(nyc.carto.Symbolizer.EventType.SYMBOLIZED,this.setCss())},getSize:function(){var idx=this.map.getZoom()-(19-this.sizes.length);return this.sizes[idx]||1},setCss:function(){var css=this.css,size=this.getSize();css=this.replace(css,{size:size,sizePlus2:size+2,sizePlus4:size+4});this.layer.setCartoCSS(css);return css}};nyc.inherits(nyc.carto.HeatSymbolizer,nyc.carto.Symbolizer);nyc.carto.HeatSymbolizer.Options;var nyc=nyc||{};nyc.carto=nyc.carto||{};nyc.carto.JenksSymbolizer=function(options){this.cartoSql=options.cartoSql;this.baseCss=options.baseCss||"";this.cssRules=options.cssRules;this.jenksSql=this.replace(this.jenksSql,{column:options.jenksColumn,binCount:options.cssRules.length});if(options.outlierFilter)this.jenksSql+=" AND "+options.outlierFilter};
nyc.carto.JenksSymbolizer.prototype={jenksSql:"SELECT CDB_JENKSBINS(ARRAY_AGG(a.${column}::numeric), ${binCount}) FROM (${sql}) a WHERE a.${column} IS NOT NULL",cartoSql:null,baseCss:null,cssRules:null,symbolize:function(layer){var me=this,jenksSql=me.replace(me.jenksSql,{sql:layer.getSQL()});me.cartoSql.execute(jenksSql).done(function(data){var bins=me.bins(data);me.applyCss(layer,bins);me.trigger(nyc.carto.Symbolizer.EventType.SYMBOLIZED,bins)})},applyCss:function(layer,bins){var css=this.baseCss;
if(bins)for(var i=bins.length-1;i>=0;i--)css+=this.replace(this.cssRules[i],{value:bins[i]});layer.setCartoCSS(css)},bins:function(data){var bins=[],jenksbins=data.rows[0].cdb_jenksbins;if(jenksbins){bins.push(jenksbins[0]);for(var bin in jenksbins)if($.inArray(jenksbins[bin],bins)==-1)bins.push(jenksbins[bin]);while(bins[0]==null)bins.shift()}return bins}};nyc.inherits(nyc.carto.JenksSymbolizer,nyc.EventHandling);nyc.inherits(nyc.carto.JenksSymbolizer,nyc.carto.Symbolizer);nyc.carto.JenksSymbolizer.Options;var nyc=nyc||{};nyc.carto=nyc.carto||{};
nyc.carto.Chart=function(options){this.cartoSql=options.cartoSql;this.canvas=$(options.canvas);this.sqlTemplate=options.sqlTemplate;this.descriptionTemplate=options.descriptionTemplate;this.dataColumn=options.dataColumn;this.labelColumn=options.labelColumn;this.filters=options.filters;this.chartOptions=options.chartOptions||{scaleFontColor:"black",scaleLineColor:"rgba(0,0,0,0.3)",customTooltips:this.tip};this.seriesOptions=options.seriesOptions||[{fillColor:"black",strokeColor:"transparent"},{fillColor:"rgba(0,0,0,0.3)",
strokeColor:"transparent"}];this.labelLookupFunction=options.labelLookupFunction||function(lbl){return lbl}};
nyc.carto.Chart.prototype={currentData:null,prevSqls:null,canvas:null,chart:function(filterValuesArray,titleNode,descriptionValues){var me=this,sqls=[],datasets=[];$.each(filterValuesArray,function(_,filterValues){sqls.push(me.sql(me.sqlTemplate,filterValues,me.filters))});if(!me.isSame(sqls)){me.prevSqls=sqls;$.each(sqls,function(_,sql){me.cartoSql.execute(sql).done(function(data){datasets.push(data.rows);if(datasets.length==filterValuesArray.length){me.title(titleNode,descriptionValues);me.updateData(datasets)}})})}},
isSame:function(sqls){if(!this.prevSqls||sqls.length!=this.prevSqls.length)return false;for(var i=0;i<sqls.length;++i)if(sqls[i]!=this.prevSqls[i])return false;return true},title:function(titleNode,descriptionValues){var me=this;$(titleNode).addClass("chart-title");$(titleNode).html(this.replace(this.descriptionTemplate,descriptionValues));$.each(descriptionValues.seriesTitles,function(i,title){var html=new String(nyc.carto.Chart.SERIES_HTML);$(titleNode).append(me.replace(html,{index:i,title:title}))})},
updateData:function(datasets){var dataCol=this.dataColumn,labelCol=this.labelColumn,labelLookupFunction=this.labelLookupFunction,seriesOptions=this.seriesOptions,data={labels:[],datasets:[]};$.each(datasets,function(i,rows){var labels=[],dataset=seriesOptions[i];dataset.data=[];$.each(rows,function(_,row){if(i==0)data.labels.push(labelLookupFunction(row[labelCol]));dataset.data.push(row[dataCol])});data.datasets.push(dataset)});this.currentData=data;this.render()},tip:function(tooltip){var tip=$("#chart-tip");
if(tooltip){var offset=$(tooltip.chart.canvas).offset();if(!tip.length){tip=$('\x3cdiv id\x3d"chart-tip"\x3e\x3c/div\x3e');$("body").append(tip)}tip.html('\x3cdiv class\x3d"chart-tip-title"\x3e'+tooltip.title+"\x3c/div\x3e");$.each(tooltip.labels,function(i,label){tip.append('\x3cdiv class\x3d"chart-tip-'+i+'"\x3e'+label+"\x3c/div\x3e")});tip.css({left:offset.left+tooltip.x+"px",top:offset.top+tooltip.y-10+"px"}).show()}else tip.hide()},render:function(){if(this.currentData){var chart=this.canvas.data("chart"),
ctx=this.canvas.get(0).getContext("2d");if(chart)chart.destroy();chart=(new Chart(ctx)).Bar(this.currentData,this.chartOptions);this.canvas.data("chart",chart)}}};nyc.inherits(nyc.carto.Chart,nyc.carto.SqlTemplate);nyc.carto.Chart.Options;nyc.carto.Chart.SERIES_HTML='\x3cdiv class\x3d"chart-series chart-series-${index}"\x3e\x3cdiv class\x3d"chart-series-icon"\x3e\x3c/div\x3e${title}\x3c/div\x3e';var nyc=nyc||{};nyc.carto=nyc.carto||{};nyc.carto.View=function(){};nyc.carto.View=function(layer){this.layer=layer};nyc.carto.View.prototype={layer:null,visibility:function(visible){this.layer[visible?"show":"hide"]()},update:function(filterValues,descriptionValues){throw"Must be implemented";}};nyc.inherits(nyc.carto.View,nyc.EventHandling);nyc.carto.ViewEventType={UPDATED:"updated"};var nyc=nyc||{};nyc.carto=nyc.carto||{};nyc.carto.SqlView=function(options){var me=this;me.name=options.name;me.layer=options.layer;me.sqlTemplate=options.sqlTemplate;me.filters=options.filters;me.symbolizer=options.symbolizer;me.descriptionTemplate=options.descriptionTemplate||"";me.legend=options.legend};
nyc.carto.SqlView.prototype={sqlTemplate:null,descriptionTemplate:null,filters:null,symbolizer:null,legend:null,update:function(filterValues,descriptionValues){var me=this,sql=me.sql(me.sqlTemplate,filterValues,me.filters),desc=me.replace(me.descriptionTemplate,descriptionValues);me.layer.setSQL(sql);if(me.legend)if(me.symbolizer){me.symbolizer.one(nyc.carto.Symbolizer.EventType.SYMBOLIZED,function(bins){me.trigger(nyc.carto.ViewEventType.UPDATED,me.legend.html(desc,bins))});me.symbolizer.symbolize(me.layer)}else me.trigger(nyc.carto.ViewEventType.UPDATED,
me.legend.html(desc));else me.trigger(nyc.carto.ViewEventType.UPDATED,"")}};nyc.inherits(nyc.carto.SqlView,nyc.carto.View);nyc.inherits(nyc.carto.SqlView,nyc.carto.SqlTemplate);nyc.carto.SqlView.Options;nyc.carto.ViewSwitcher=function(views){var me=this;me.views={};$.each(views,function(_,view){me.views[view.name]=view;view.on(nyc.carto.ViewEventType.UPDATED,function(legendHtml){me.trigger(nyc.carto.ViewEventType.UPDATED,legendHtml)})})};
nyc.carto.ViewSwitcher.prototype={views:null,switchView:function(viewName,filterValues,descriptionValues){var activeView;$(".cartodb-infowindow").fadeOut();for(var name in this.views){var view=this.views[name];if(view){view.visibility(false);if(viewName==name){activeView=view;view.update(filterValues,descriptionValues)}}}activeView.visibility(true)}};nyc.inherits(nyc.carto.ViewSwitcher,nyc.EventHandling);
nyc.carto.Dao=function(cartoSql,sqlTemplate,filters){this.cartoSql=cartoSql;this.sqlTemplate=sqlTemplate;this.filters=filters};nyc.carto.Dao.prototype={cartoSql:null,filters:null,sqlTemplate:null,data:function(filterValues,callback){var sql=this.sql(this.sqlTemplate,filterValues,this.filters);this.cartoSql.execute(sql).done(callback)}};nyc.inherits(nyc.carto.Dao,nyc.carto.SqlTemplate);var nyc=nyc||{};nyc.carto=nyc.carto||{};
nyc.carto.Popup=function(options){var layer=options.layer,interactivity=options.interactivity,tmpl=options.template;this.map=options.map;layer.setInteraction(true);layer.setInteractivity(interactivity);layer.on("featureClick",$.proxy(this.captureClick,this)),layer.on("featureOver",$.proxy(this.captureHover,this)),this.infowin=cdb.vis.Vis.addInfowindow(this.map,layer,interactivity,{infowindowTemplate:tmpl});this.infowin.model.set("sanitizeTemplate",false);this.popupDisplay="none";this.tipDisplay="";
this.onShowPopup=options.onShowPopup||this.onShowPopup;this.onHidePopup=options.onHidePopup||this.onHidePopup;this.onTipChange=options.onTipChange||this.onTipChange;this.tip(this.map,layer,tmpl);$(this.infowin.el).css("z-index",100);this.observePopup(this);$("*").mousemove($.proxy(this.hideTip,this))};
nyc.carto.Popup.prototype={infowin:null,tip:null,popupEventData:null,tipEventData:null,map:null,popupDisplay:null,tipDisplay:null,captureClick:function(){this.popupEventData=arguments},captureHover:function(){this.tipEventData=arguments},tip:function(map,layer,tmpl){var tipTmpl=$(tmpl).find(".tip-tmpl").html();if(tipTmpl){this.tip=map.viz.addOverlay({type:"tooltip",layer:layer,template:tipTmpl,position:"bottom|right",fields:[{}]});$(map.getContainer()).append(this.tip.render().el);this.observeTip(this)}},
observeTip:function(me){var observer=new MutationObserver(function(mutations){var display;$.each(mutations,function(_,mutation){if(mutation.attributeName=="style"){var style=mutation.target.style;display=style.top+style.left;return false}});if(display&&display!=me.tipDisplay)me.tipDisplayChanged(display)});observer.observe(me.tip.render().el,{attributes:true})},tipDisplayChanged:function(display){this.tipDisplay=display;this.onTipChange(this);this.trigger("tipchange",this)},observePopup:function(me){var observer=
new MutationObserver(function(mutations){var display;$.each(mutations,function(_,mutation){if(mutation.attributeName=="style"){display=mutation.target.style.display;return false}});if(display&&display!=me.popupDisplay)me.popupDisplayChanged(display)});observer.observe(me.infowin.el,{attributes:true})},popupDisplayChanged:function(display){this.popupDisplay=display;if(display=="block"){this.onShowPopup(this);this.trigger("showpopup",this)}else{this.onHidePopup(this);this.trigger("hidepopup",this)}},
hideTip:function(event){var map=this.map.getContainer(),pop=this.infowin.el;if(map&&!$.contains(map,event.target)||pop&&$.contains(pop,event.target))$(".cartodb-tooltip").hide()},onShowPopup:function(popup){},onHidePopup:function(popup){},onTipChange:function(popup){}};nyc.inherits(nyc.carto.Popup,nyc.EventHandling);nyc.carto.Popup.EventType={SHOW_POPUP:"showpopup",HIDE_POPUP:"hidepopup",TIP_CHANGE:"tipchange"};nyc.carto.Popup.Options;
//# sourceMappingURL=nyc-carto-lib.sourcemap.json